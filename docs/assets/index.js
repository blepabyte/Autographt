var qs=Object.defineProperty;var Ps=(s,t,e)=>t in s?qs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var It=(s,t,e)=>(Ps(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function Y(){}function Fs(s){return s&&typeof s=="object"&&typeof s.then=="function"}function $n(s){return s()}function gn(){return Object.create(null)}function kt(s){s.forEach($n)}function Ln(s){return typeof s=="function"}function we(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function $s(s){return Object.keys(s).length===0}function wn(s){return s==null?"":s}function D(s,t){s.appendChild(t)}function Q(s,t,e){s.insertBefore(t,e||null)}function X(s){s.parentNode&&s.parentNode.removeChild(s)}function F(s){return document.createElement(s)}function bt(s){return document.createTextNode(s)}function lt(){return bt(" ")}function Ls(){return bt("")}function pt(s,t,e,n){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e,n)}function G(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}function Gs(s){return s===""?null:+s}function Bs(s){return Array.from(s.childNodes)}function yn(s,t){s.value=t==null?"":t}function _n(s,t,e,n){e===null?s.style.removeProperty(t):s.style.setProperty(t,e,n?"important":"")}function bn(s,t){for(let e=0;e<s.options.length;e+=1){const n=s.options[e];if(n.__value===t){n.selected=!0;return}}s.selectedIndex=-1}function Vs(s){const t=s.querySelector(":checked")||s.options[0];return t&&t.__value}let Ht;function ct(s){Ht=s}function He(){if(!Ht)throw new Error("Function called outside component initialization");return Ht}function Ys(s){He().$$.on_mount.push(s)}function Hs(s){He().$$.on_destroy.push(s)}const Vt=[],Pt=[],ce=[],Oe=[],Xs=Promise.resolve();let Ce=!1;function Us(){Ce||(Ce=!0,Xs.then(Xe))}function fe(s){ce.push(s)}function vn(s){Oe.push(s)}const je=new Set;let ie=0;function Xe(){const s=Ht;do{for(;ie<Vt.length;){const t=Vt[ie];ie++,ct(t),Ws(t.$$)}for(ct(null),Vt.length=0,ie=0;Pt.length;)Pt.pop()();for(let t=0;t<ce.length;t+=1){const e=ce[t];je.has(e)||(je.add(e),e())}ce.length=0}while(Vt.length);for(;Oe.length;)Oe.pop()();Ce=!1,je.clear(),ct(s)}function Ws(s){if(s.fragment!==null){s.update(),kt(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(fe)}}const ae=new Set;let vt;function Gn(){vt={r:0,c:[],p:vt}}function Bn(){vt.r||kt(vt.c),vt=vt.p}function mt(s,t){s&&s.i&&(ae.delete(s),s.i(t))}function St(s,t,e,n){if(s&&s.o){if(ae.has(s))return;ae.add(s),vt.c.push(()=>{ae.delete(s),n&&(e&&s.d(1),n())}),s.o(t)}else n&&n()}function As(s,t){const e=t.token={};function n(i,r,o,h){if(t.token!==e)return;t.resolved=h;let u=t.ctx;o!==void 0&&(u=u.slice(),u[o]=h);const l=i&&(t.current=i)(u);let c=!1;t.block&&(t.blocks?t.blocks.forEach((a,p)=>{p!==r&&a&&(Gn(),St(a,1,1,()=>{t.blocks[p]===a&&(t.blocks[p]=null)}),Bn())}):t.block.d(1),l.c(),mt(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[r]=l),c&&Xe()}if(Fs(s)){const i=He();if(s.then(r=>{ct(i),n(t.then,1,t.value,r),ct(null)},r=>{if(ct(i),n(t.catch,2,t.error,r),ct(null),!t.hasCatch)throw r}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,s),!0;t.resolved=s}}function Js(s,t,e){const n=t.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,e)}function xn(s,t,e){const n=s.$$.props[t];n!==void 0&&(s.$$.bound[n]=e,e(s.$$.ctx[n]))}function Ue(s){s&&s.c()}function ye(s,t,e,n){const{fragment:i,after_update:r}=s.$$;i&&i.m(t,e),n||fe(()=>{const o=s.$$.on_mount.map($n).filter(Ln);s.$$.on_destroy?s.$$.on_destroy.push(...o):kt(o),s.$$.on_mount=[]}),r.forEach(fe)}function _e(s,t){const e=s.$$;e.fragment!==null&&(kt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Qs(s,t){s.$$.dirty[0]===-1&&(Vt.push(s),Us(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function We(s,t,e,n,i,r,o,h=[-1]){const u=Ht;ct(s);const l=s.$$={fragment:null,ctx:[],props:r,update:Y,not_equal:i,bound:gn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:gn(),dirty:h,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=e?e(s,t.props||{},(a,p,...m)=>{const g=m.length?m[0]:p;return l.ctx&&i(l.ctx[a],l.ctx[a]=g)&&(!l.skip_bound&&l.bound[a]&&l.bound[a](g),c&&Qs(s,a)),p}):[],l.update(),c=!0,kt(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const a=Bs(t.target);l.fragment&&l.fragment.l(a),a.forEach(X)}else l.fragment&&l.fragment.c();t.intro&&mt(s.$$.fragment),ye(s,t.target,t.anchor,t.customElement),Xe()}ct(u)}class Ae{$destroy(){_e(this,1),this.$destroy=Y}$on(t,e){if(!Ln(e))return Y;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!$s(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zs=Object.prototype.toString;function Z(s){return Zs.call(s).endsWith("Array]")}function Ks(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Z(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,r=i===void 0?s.length:i;if(n<0||n>=s.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>s.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=s[n],h=n+1;h<r;h++)s[h]>o&&(o=s[h]);return o}function ti(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Z(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,r=i===void 0?s.length:i;if(n<0||n>=s.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>s.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=s[n],h=n+1;h<r;h++)s[h]<o&&(o=s[h]);return o}function Sn(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z(s)){if(s.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!Z(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(s.length);var n=ti(s),i=Ks(s);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var r=t.min,o=r===void 0?t.autoMinMax?n:0:r,h=t.max,u=h===void 0?t.autoMinMax?i:1:h;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-o)/(i-n),c=0;c<s.length;c++)e[c]=(s[c]-n)*l+o;return e}const re=" ".repeat(2),Vn=" ".repeat(4);function ei(){return Yn(this)}function Yn(s,t={}){const{maxRows:e=15,maxColumns:n=10,maxNumSize:i=8,padMinus:r="auto"}=t;return`${s.constructor.name} {
${re}[
${Vn}${ni(s,e,n,i,r)}
${re}]
${re}rows: ${s.rows}
${re}columns: ${s.columns}
}`}function ni(s,t,e,n,i){const{rows:r,columns:o}=s,h=Math.min(r,t),u=Math.min(o,e),l=[];if(i==="auto"){i=!1;t:for(let c=0;c<h;c++)for(let a=0;a<u;a++)if(s.get(c,a)<0){i=!0;break t}}for(let c=0;c<h;c++){let a=[];for(let p=0;p<u;p++)a.push(si(s.get(c,p),n,i));l.push(`${a.join(" ")}`)}return u!==o&&(l[l.length-1]+=` ... ${o-e} more columns`),h!==r&&l.push(`... ${r-t} more rows`),l.join(`
${Vn}`)}function si(s,t,e){return(s>=0&&e?` ${En(s,t-1)}`:En(s,t)).padEnd(t)}function En(s,t){let e=s.toString();if(e.length<=t)return e;let n=s.toFixed(t);if(n.length>t&&(n=s.toFixed(Math.max(0,t-(n.length-t)))),n.length<=t&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let i=s.toExponential(t);return i.length>t&&(i=s.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function ii(s,t){s.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},s.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n);return this},s.prototype.addM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n.get(i,r));return this},s.add=function(n,i){return new t(n).add(i)},s.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},s.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n);return this},s.prototype.subM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n.get(i,r));return this},s.sub=function(n,i){return new t(n).sub(i)},s.prototype.subtract=s.prototype.sub,s.prototype.subtractS=s.prototype.subS,s.prototype.subtractM=s.prototype.subM,s.subtract=s.sub,s.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},s.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n);return this},s.prototype.mulM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n.get(i,r));return this},s.mul=function(n,i){return new t(n).mul(i)},s.prototype.multiply=s.prototype.mul,s.prototype.multiplyS=s.prototype.mulS,s.prototype.multiplyM=s.prototype.mulM,s.multiply=s.mul,s.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},s.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n);return this},s.prototype.divM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n.get(i,r));return this},s.div=function(n,i){return new t(n).div(i)},s.prototype.divide=s.prototype.div,s.prototype.divideS=s.prototype.divS,s.prototype.divideM=s.prototype.divM,s.divide=s.div,s.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},s.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)%n);return this},s.prototype.modM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)%n.get(i,r));return this},s.mod=function(n,i){return new t(n).mod(i)},s.prototype.modulus=s.prototype.mod,s.prototype.modulusS=s.prototype.modS,s.prototype.modulusM=s.prototype.modM,s.modulus=s.mod,s.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},s.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)&n);return this},s.prototype.andM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)&n.get(i,r));return this},s.and=function(n,i){return new t(n).and(i)},s.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},s.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)|n);return this},s.prototype.orM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)|n.get(i,r));return this},s.or=function(n,i){return new t(n).or(i)},s.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},s.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)^n);return this},s.prototype.xorM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)^n.get(i,r));return this},s.xor=function(n,i){return new t(n).xor(i)},s.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},s.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)<<n);return this},s.prototype.leftShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)<<n.get(i,r));return this},s.leftShift=function(n,i){return new t(n).leftShift(i)},s.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},s.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>n);return this},s.prototype.signPropagatingRightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>n.get(i,r));return this},s.signPropagatingRightShift=function(n,i){return new t(n).signPropagatingRightShift(i)},s.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},s.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>>n);return this},s.prototype.rightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>>n.get(i,r));return this},s.rightShift=function(n,i){return new t(n).rightShift(i)},s.prototype.zeroFillRightShift=s.prototype.rightShift,s.prototype.zeroFillRightShiftS=s.prototype.rightShiftS,s.prototype.zeroFillRightShiftM=s.prototype.rightShiftM,s.zeroFillRightShift=s.rightShift,s.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},s.not=function(n){return new t(n).not()},s.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},s.abs=function(n){return new t(n).abs()},s.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},s.acos=function(n){return new t(n).acos()},s.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},s.acosh=function(n){return new t(n).acosh()},s.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},s.asin=function(n){return new t(n).asin()},s.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},s.asinh=function(n){return new t(n).asinh()},s.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},s.atan=function(n){return new t(n).atan()},s.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},s.atanh=function(n){return new t(n).atanh()},s.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},s.cbrt=function(n){return new t(n).cbrt()},s.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},s.ceil=function(n){return new t(n).ceil()},s.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},s.clz32=function(n){return new t(n).clz32()},s.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},s.cos=function(n){return new t(n).cos()},s.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},s.cosh=function(n){return new t(n).cosh()},s.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},s.exp=function(n){return new t(n).exp()},s.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},s.expm1=function(n){return new t(n).expm1()},s.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},s.floor=function(n){return new t(n).floor()},s.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},s.fround=function(n){return new t(n).fround()},s.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},s.log=function(n){return new t(n).log()},s.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},s.log1p=function(n){return new t(n).log1p()},s.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},s.log10=function(n){return new t(n).log10()},s.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},s.log2=function(n){return new t(n).log2()},s.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},s.round=function(n){return new t(n).round()},s.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},s.sign=function(n){return new t(n).sign()},s.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},s.sin=function(n){return new t(n).sin()},s.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},s.sinh=function(n){return new t(n).sinh()},s.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},s.sqrt=function(n){return new t(n).sqrt()},s.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},s.tan=function(n){return new t(n).tan()},s.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},s.tanh=function(n){return new t(n).tanh()},s.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},s.trunc=function(n){return new t(n).trunc()},s.pow=function(n,i){return new t(n).pow(i)},s.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},s.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.pow(this.get(i,r),n));return this},s.prototype.powM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.pow(this.get(i,r),n.get(i,r)));return this}}function nt(s,t,e){let n=e?s.rows:s.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function st(s,t,e){let n=e?s.columns:s.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function Ct(s,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==s.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function zt(s,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==s.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function ri(s,t){if(!Z(t))throw new TypeError("row indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=s.rows)throw new RangeError("row indices are out of range")}function oi(s,t){if(!Z(t))throw new TypeError("column indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=s.columns)throw new RangeError("column indices are out of range")}function jn(s,t,e,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(oe("startRow",t),oe("endRow",e),oe("startColumn",n),oe("endColumn",i),t>e||n>i||t<0||t>=s.rows||e<0||e>=s.rows||n<0||n>=s.columns||i<0||i>=s.columns)throw new RangeError("Submatrix indices are out of range")}function be(s,t=0){let e=[];for(let n=0;n<s;n++)e.push(t);return e}function oe(s,t){if(typeof t!="number")throw new TypeError(`${s} must be a number`)}function Nt(s){if(s.isEmpty())throw new Error("Empty matrix has no elements to index")}function hi(s){let t=be(s.rows);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[e]+=s.get(e,n);return t}function ui(s){let t=be(s.columns);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[n]+=s.get(e,n);return t}function li(s){let t=0;for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)t+=s.get(e,n);return t}function ci(s){let t=be(s.rows,1);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[e]*=s.get(e,n);return t}function ai(s){let t=be(s.columns,1);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[n]*=s.get(e,n);return t}function fi(s){let t=1;for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)t*=s.get(e,n);return t}function pi(s,t,e){const n=s.rows,i=s.columns,r=[];for(let o=0;o<n;o++){let h=0,u=0,l=0;for(let c=0;c<i;c++)l=s.get(o,c)-e[o],h+=l,u+=l*l;t?r.push((u-h*h/i)/(i-1)):r.push((u-h*h/i)/i)}return r}function di(s,t,e){const n=s.rows,i=s.columns,r=[];for(let o=0;o<i;o++){let h=0,u=0,l=0;for(let c=0;c<n;c++)l=s.get(c,o)-e[o],h+=l,u+=l*l;t?r.push((u-h*h/n)/(n-1)):r.push((u-h*h/n)/n)}return r}function mi(s,t,e){const n=s.rows,i=s.columns,r=n*i;let o=0,h=0,u=0;for(let l=0;l<n;l++)for(let c=0;c<i;c++)u=s.get(l,c)-e,o+=u,h+=u*u;return t?(h-o*o/r)/(r-1):(h-o*o/r)/r}function gi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t[e])}function wi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t[n])}function yi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t)}function _i(s){const t=[];for(let e=0;e<s.rows;e++){let n=0;for(let i=0;i<s.columns;i++)n+=Math.pow(s.get(e,i),2)/(s.columns-1);t.push(Math.sqrt(n))}return t}function bi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t[e])}function vi(s){const t=[];for(let e=0;e<s.columns;e++){let n=0;for(let i=0;i<s.rows;i++)n+=Math.pow(s.get(i,e),2)/(s.rows-1);t.push(Math.sqrt(n))}return t}function xi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t[n])}function Si(s){const t=s.size-1;let e=0;for(let n=0;n<s.columns;n++)for(let i=0;i<s.rows;i++)e+=Math.pow(s.get(i,n),2)/t;return Math.sqrt(e)}function Ei(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t)}class k{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new b(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)r.set(o,h,n[o*e+h]);return r}static rowVector(t){let e=new b(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new b(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new b(t,e)}static ones(t,e){return new b(t,e).fill(1)}static rand(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let r=new b(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)r.set(o,h,i());return r}static randInt(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:r=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(r))throw new TypeError("max must be an integer");if(i>=r)throw new RangeError("min must be smaller than max");let h=r-i,u=new b(t,e);for(let l=0;l<t;l++)for(let c=0;c<e;c++){let a=i+Math.round(o()*h);u.set(l,c,a)}return u}static eye(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);let i=Math.min(t,e),r=this.zeros(t,e);for(let o=0;o<i;o++)r.set(o,o,n);return r}static diag(t,e,n){let i=t.length;e===void 0&&(e=i),n===void 0&&(n=e);let r=Math.min(i,e,n),o=this.zeros(e,n);for(let h=0;h<r;h++)o.set(h,h,t[h]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new b(n,i);for(let o=0;o<n;o++)for(let h=0;h<i;h++)r.set(o,h,Math.min(t.get(o,h),e.get(o,h)));return r}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new this(n,i);for(let o=0;o<n;o++)for(let h=0;h<i;h++)r.set(o,h,Math.max(t.get(o,h),e.get(o,h)));return r}static checkMatrix(t){return k.isMatrix(t)?t:new b(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&r===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(r=!0,n=e):(i=!1,r=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&r===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(r=!0,n=e):(i=!1,r=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let i=e;for(let r=e;r<t.rows;r++)t.get(r,n)>t.get(i,n)&&(i=r);if(t.get(i,n)===0)n++;else{t.swapRows(e,i);let r=t.get(e,n);for(let o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/r);for(let o=e+1;o<t.rows;o++){let h=t.get(o,n)/t.get(e,n);t.set(o,n,0);for(let u=n+1;u<t.columns;u++)t.set(o,u,t.get(o,u)-t.get(e,u)*h)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,i=n-1;for(;i>=0;)if(t.maxRow(i)===0)i--;else{let r=0,o=!1;for(;r<n&&o===!1;)t.get(i,r)===1?o=!0:r++;for(let h=0;h<i;h++){let u=t.get(h,r);for(let l=r;l<e;l++){let c=t.get(h,l)-u*t.get(i,l);t.set(h,l,c)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new b(this.rows*e,this.columns*n);for(let r=0;r<e;r++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*r,this.columns*o);return i}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){nt(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return b.rowVector(this.getRow(t))}setRow(t,e){nt(this,t),e=Ct(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){nt(this,t),nt(this,e);for(let n=0;n<this.columns;n++){let i=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,i)}return this}getColumn(t){st(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return b.columnVector(this.getColumn(t))}setColumn(t,e){st(this,t),e=zt(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){st(this,t),st(this,e);for(let n=0;n<this.rows;n++){let i=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,i)}return this}addRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=zt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=zt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=zt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=zt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){nt(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){st(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e[n]&&(e[n]=this.get(n,i));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e[i]&&(e[i]=this.get(n,i));return e}case void 0:{let e=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i));return e}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){Nt(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e[n]&&(e[n]=this.get(n,i));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e[i]&&(e[i]=this.get(n,i));return e}case void 0:{let e=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i));return e}default:throw new Error(`invalid option: ${t}`)}}minIndex(){Nt(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}maxRow(t){if(nt(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){nt(this,t),Nt(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),n[1]=i);return n}minRow(t){if(nt(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){nt(this,t),Nt(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),n[1]=i);return n}maxColumn(t){if(st(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){st(this,t),Nt(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),n[0]=i);return n}minColumn(t){if(st(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){st(this,t),Nt(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),n[0]=i);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if(t==="max")return this.max();if(t==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)e=e+this.get(n,i)*this.get(n,i);return Math.sqrt(e)}else throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){k.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=b.checkMatrix(t);let e=this.rows,n=this.columns,i=t.columns,r=new b(e,i),o=new Float64Array(n);for(let h=0;h<i;h++){for(let u=0;u<n;u++)o[u]=t.get(u,h);for(let u=0;u<e;u++){let l=0;for(let c=0;c<n;c++)l+=this.get(u,c)*o[c];r.set(u,h,l)}}return r}strassen2x2(t){t=b.checkMatrix(t);let e=new b(2,2);const n=this.get(0,0),i=t.get(0,0),r=this.get(0,1),o=t.get(0,1),h=this.get(1,0),u=t.get(1,0),l=this.get(1,1),c=t.get(1,1),a=(n+l)*(i+c),p=(h+l)*i,m=n*(o-c),g=l*(u-i),f=(n+r)*c,d=(h-n)*(i+o),w=(r-l)*(u+c),y=a+g-f+w,S=m+f,N=p+g,$=a-p+m+d;return e.set(0,0,y),e.set(0,1,S),e.set(1,0,N),e.set(1,1,$),e}strassen3x3(t){t=b.checkMatrix(t);let e=new b(3,3);const n=this.get(0,0),i=this.get(0,1),r=this.get(0,2),o=this.get(1,0),h=this.get(1,1),u=this.get(1,2),l=this.get(2,0),c=this.get(2,1),a=this.get(2,2),p=t.get(0,0),m=t.get(0,1),g=t.get(0,2),f=t.get(1,0),d=t.get(1,1),w=t.get(1,2),y=t.get(2,0),S=t.get(2,1),N=t.get(2,2),$=(n+i+r-o-h-c-a)*d,j=(n-o)*(-m+d),C=h*(-p+m+f-d-w-y+N),x=(-n+o+h)*(p-m+d),z=(o+h)*(-p+m),B=n*p,rt=(-n+l+c)*(p-g+w),ft=(-n+l)*(g-w),ht=(l+c)*(-p+g),Tt=(n+i+r-h-u-l-c)*w,ne=c*(-p+g+f-d-w-y+S),A=(-r+c+a)*(d+y-S),se=(r-a)*(d-S),ut=r*y,Mt=(c+a)*(-y+S),J=(-r+h+u)*(w+y-N),dn=(r-u)*(w-N),mn=(h+u)*(-y+N),xs=i*f,Ss=u*S,Es=o*g,js=l*m,ks=a*N,Ts=B+ut+xs,Ms=$+x+z+B+A+ut+Mt,Is=B+rt+ht+Tt+ut+J+mn,Ns=j+C+x+B+ut+J+dn,Rs=j+x+z+B+Ss,Os=ut+J+dn+mn+Es,Cs=B+rt+ft+ne+A+se+ut,zs=A+se+ut+Mt+js,Ds=B+rt+ft+ht+ks;return e.set(0,0,Ts),e.set(0,1,Ms),e.set(0,2,Is),e.set(1,0,Ns),e.set(1,1,Rs),e.set(1,2,Os),e.set(2,0,Cs),e.set(2,1,zs),e.set(2,2,Ds),e}mmulStrassen(t){t=b.checkMatrix(t);let e=this.clone(),n=e.rows,i=e.columns,r=t.rows,o=t.columns;i!==r&&console.warn(`Multiplying ${n} x ${i} and ${r} x ${o} matrix: dimensions do not match.`);function h(a,p,m){let g=a.rows,f=a.columns;if(g===p&&f===m)return a;{let d=k.zeros(p,m);return d=d.setSubMatrix(a,0,0),d}}let u=Math.max(n,r),l=Math.max(i,o);e=h(e,u,l),t=h(t,u,l);function c(a,p,m,g){if(m<=512||g<=512)return a.mmul(p);m%2===1&&g%2===1?(a=h(a,m+1,g+1),p=h(p,m+1,g+1)):m%2===1?(a=h(a,m+1,g),p=h(p,m+1,g)):g%2===1&&(a=h(a,m,g+1),p=h(p,m,g+1));let f=parseInt(a.rows/2,10),d=parseInt(a.columns/2,10),w=a.subMatrix(0,f-1,0,d-1),y=p.subMatrix(0,f-1,0,d-1),S=a.subMatrix(0,f-1,d,a.columns-1),N=p.subMatrix(0,f-1,d,p.columns-1),$=a.subMatrix(f,a.rows-1,0,d-1),j=p.subMatrix(f,p.rows-1,0,d-1),C=a.subMatrix(f,a.rows-1,d,a.columns-1),x=p.subMatrix(f,p.rows-1,d,p.columns-1),z=c(k.add(w,C),k.add(y,x),f,d),B=c(k.add($,C),y,f,d),rt=c(w,k.sub(N,x),f,d),ft=c(C,k.sub(j,y),f,d),ht=c(k.add(w,S),x,f,d),Tt=c(k.sub($,w),k.add(y,N),f,d),ne=c(k.sub(S,C),k.add(j,x),f,d),A=k.add(z,ft);A.sub(ht),A.add(ne);let se=k.add(rt,ht),ut=k.add(B,ft),Mt=k.sub(z,B);Mt.add(rt),Mt.add(Tt);let J=k.zeros(2*A.rows,2*A.columns);return J=J.setSubMatrix(A,0,0),J=J.setSubMatrix(se,A.rows,0),J=J.setSubMatrix(ut,0,A.columns),J=J.setSubMatrix(Mt,A.rows,A.columns),J.subMatrix(0,m-1,0,g-1)}return c(e,t,u,l)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new b(this.rows,this.columns);for(let r=0;r<this.rows;r++){const o=this.getRow(r);o.length>0&&Sn(o,{min:e,max:n,output:o}),i.setRow(r,o)}return i}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new b(this.rows,this.columns);for(let r=0;r<this.columns;r++){const o=this.getColumn(r);o.length&&Sn(o,{min:e,max:n,output:o}),i.setColumn(r,o)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let i=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,i)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let i=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,i)}return this}kroneckerProduct(t){t=b.checkMatrix(t);let e=this.rows,n=this.columns,i=t.rows,r=t.columns,o=new b(e*i,n*r);for(let h=0;h<e;h++)for(let u=0;u<n;u++)for(let l=0;l<i;l++)for(let c=0;c<r;c++)o.set(i*h+l,r*u+c,this.get(h,u)*t.get(l,c));return o}kroneckerSum(t){if(t=b.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,i=this.kroneckerProduct(b.eye(n,n)),r=b.eye(e,e).kroneckerProduct(t);return i.add(r)}transpose(){let t=new b(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=kn){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=kn){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,i){jn(this,t,e,n,i);let r=new b(e-t+1,i-n+1);for(let o=t;o<=e;o++)for(let h=n;h<=i;h++)r.set(o-t,h-n,this.get(o,h));return r}subMatrixRow(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new b(t.length,n-e+1);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.rows)throw new RangeError(`Row index out of range: ${t[r]}`);i.set(r,o-e,this.get(t[r],o))}return i}subMatrixColumn(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new b(n-e+1,t.length);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.columns)throw new RangeError(`Column index out of range: ${t[r]}`);i.set(o-e,r,this.get(o,t[r]))}return i}setSubMatrix(t,e,n){if(t=b.checkMatrix(t),t.isEmpty())return this;let i=e+t.rows-1,r=n+t.columns-1;jn(this,e,i,n,r);for(let o=0;o<t.rows;o++)for(let h=0;h<t.columns;h++)this.set(e+o,n+h,t.get(o,h));return this}selection(t,e){ri(this,t),oi(this,e);let n=new b(t.length,e.length);for(let i=0;i<t.length;i++){let r=t[i];for(let o=0;o<e.length;o++){let h=e[o];n.set(i,o,this.get(r,h))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new b(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return hi(this);case"column":return ui(this);case void 0:return li(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return ci(this);case"column":return ai(this);case void 0:return fi(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":{for(let n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(let n=0;n<this.columns;n++)e[n]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Z(i))throw new TypeError("mean must be an array");return pi(this,n,i)}case"column":{if(!Z(i))throw new TypeError("mean must be an array");return di(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return mi(this,n,i)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);const n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":{if(!Z(n))throw new TypeError("center must be an array");return gi(this,n),this}case"column":{if(!Z(n))throw new TypeError("center must be an array");return wi(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return yi(this,n),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":{if(n===void 0)n=_i(this);else if(!Z(n))throw new TypeError("scale must be an array");return bi(this,n),this}case"column":{if(n===void 0)n=vi(this);else if(!Z(n))throw new TypeError("scale must be an array");return xi(this,n),this}case void 0:{if(n===void 0)n=Si(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return Ei(this,n),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return Yn(this,t)}}k.prototype.klass="Matrix";typeof Symbol<"u"&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=ei);function kn(s,t){return s-t}function ji(s){return s.every(t=>typeof t=="number")}k.random=k.rand;k.randomInt=k.randInt;k.diagonal=k.diag;k.prototype.diagonal=k.prototype.diag;k.identity=k.eye;k.prototype.negate=k.prototype.neg;k.prototype.tensorProduct=k.prototype.kroneckerProduct;class b extends k{constructor(t,e){if(super(),b.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0)if(this.data=[],Number.isInteger(e)&&e>=0)for(let n=0;n<t;n++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(Z(t)){const n=t;if(t=n.length,e=t?n[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(n[i].length!==e)throw new RangeError("Inconsistent array dimensions");if(!ji(n[i]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return nt(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),nt(this,t,!0),e=Float64Array.from(Ct(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){st(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let i=0;i<t;i++)n[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){typeof e>"u"&&(e=t,t=this.columns),st(this,t,!0),e=zt(this,e);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let r=0;for(;r<t;r++)i[r]=this.data[n][r];for(i[r++]=e[n];r<this.columns+1;r++)i[r]=this.data[n][r-1];this.data[n]=i}return this.columns+=1,this}}ii(k,b);function Tn(s,t,e){let n=Math.acos(s.dot(t));return s.clone().mul(Math.sin((1-e)*n)/Math.sin(n)).add(t.clone().mul(Math.sin(e*n)/Math.sin(n)))}function he(s,t){t.sub(s.clone().mul(2*s.dot(t)))}function Mn(s,t,e){let n=b.zeros(e,1);return n.set(s,0,Math.cos(-Math.PI/4)),n.set(t,0,Math.sin(-Math.PI/4)),n}function ki(s){let t=[],e=s.length;console.log(s);let n=[...s];for(let i=0;i<e;i++){if(n[i]==i)continue;let r=n.indexOf(i);if(r===-1||r<i)throw new Error("indexOf banana");t.push([i,r]),n[r]=n[i],n[i]=i}return t}function In(s,t){if(t.length%2!==0)throw new Error("will only morb even permutations");return(e,n)=>{let i=e.clone();for(let r=0;r<t.length;r+=2){let o=Mn(...t[r],s),h=Mn(...t[r+1],s);he(o,i),he(Tn(o,h,n/2),i),he(Tn(h,o,n/2),i),he(h,i)}return i}}function Ti(s){return s.map(t=>t-1)}function Mi(s){return s.map(t=>[t[0]-1,t[1]-1])}function Ii(){return{nv:3,edges:[[0,1],[1,2],[2,0]],positions:new b([[.1,0,1],[0,.1,1],[-.1,0,1]])}}function Nn(s){if(s.spec==="slerp-naive")return In(s.permutation.length,ki(s.permutation));if(s.spec==="slerp-transposition-seq")return In(s.n,s.transposition);if(s.spec==="linear")return(t,e)=>{let n=s.permutation.length,i=b.zeros(n,1);for(let r=0;r<n;r++)i.set(r,0,(1-e)*t.get(r,0)+e*t.get(s.permutation[r],0));return i};if(s.spec==="noop")return(t,e)=>t;throw new Error(`Got invalid interpolation spec: ${s.spec}`)}function Ni(s){let t,e,n,i,r,o,h,u,l,c,a,p,m,g,f,d,w,y,S,N,$,j,C;return{c(){t=F("div"),e=bt(`Interpolation method:
    `),n=F("select"),i=F("option"),i.textContent="Linear ",r=F("option"),r.textContent="Orthogonal (naive)",o=lt(),h=F("p"),u=bt(`Provide a graph by giving a list or set of its edges:
    `),l=F("textarea"),c=lt(),a=F("p"),p=bt(`Give a 3D embedding for the vertices of the graph as a matrix with n rows and 3 columns:
        `),m=F("textarea"),g=bt(`

    Give an automorphism of the graph as a list
    `),f=F("textarea"),d=lt(),w=F("div"),y=lt(),S=F("button"),S.textContent="Load example graph",N=lt(),$=F("div"),$.innerHTML=`<h2>Usage</h2> 

    <p>The labelling of graph vertices is assumed to be one-indexed, so that the vertex set must consist of integers  {1  2, ..., n}.</p>

    
    Accepted formats for the embedding matrix are:
    <ul><li>An array of arrays (JSON)</li> 
        <li>A line/space delimited file (as produced by <code>writedlm</code>),
            where each line contains a row of the matrix, within which the columns/entries are
            separated by spaces.</li></ul>
    The canvas is then determined by a perspective projection through a pinhole camera located at (0, 0, -0.2) pointing towards the origin so that [-1, 1] x [-1, 1] x {0} spans the viewport. 
    
    <p>An automorphism should be specified as a list &#39;L&#39; of n distinct vertex numbers (agreeing with the given edge
    set and row numbers of the embedding matrix) that defines a permutation sending vertex i to vertex L[i]. The list can be formatted as either a space-separated sequence of integers or as a JSON array.</p> 

    <strong>Notes:</strong>  
    <em><ul><li>The orthogonal interpolation modes probably only work for even permutations.</li></ul></em>`,i.__value="linear",i.value=i.__value,r.__value="slerp-naive",r.value=r.__value,s[1].S===void 0&&fe(()=>s[8].call(n)),G(l,"placeholder"," Example format: {{1, 2}, {2, 3}, {3, 1}}"),G(l,"class",wn("ok")+" svelte-19kcozw"),_n(l,"min-height","6em"),G(m,"placeholder"," Example format: [[0.5, 0.5, 1], [-0.5, 0.5, 1], [0, -0.5, 1]]"),G(m,"class",wn("ok")+" svelte-19kcozw"),_n(m,"min-height","6em"),G(f,"placeholder","Example format: [2, 3, 1]"),G(f,"class","svelte-19kcozw"),G(w,"class","stderr svelte-19kcozw")},m(x,z){Q(x,t,z),D(t,e),D(t,n),D(n,i),D(n,r),bn(n,s[1].S),D(t,o),D(t,h),D(h,u),D(h,l),D(t,c),D(t,a),D(a,p),D(a,m),D(t,g),D(t,f),Q(x,d,z),Q(x,w,z),s[9](w),Q(x,y,z),Q(x,S,z),Q(x,N,z),Q(x,$,z),j||(C=[pt(n,"change",s[8]),pt(n,"change",s[2]),pt(l,"input",s[3]),pt(m,"input",s[4]),pt(f,"input",s[5])],j=!0)},p(x,[z]){z&2&&bn(n,x[1].S)},i:Y,o:Y,d(x){x&&X(t),x&&X(d),x&&X(w),s[9](null),x&&X(y),x&&X(S),x&&X(N),x&&X($),j=!1,kt(C)}}}const Rn=/\s+/;function Ri(s,t,e){let{InGraph:n=null}=t,{InTerpolate:i=null}=t,r,o={G:null,M:null,P:null,S:"linear"};function h(){if(console.log("VVV"),o.G===null||o.M===null)return"Both graph and embedding must be specified";let f=o.M.rows,d=o.G.flatMap(y=>y),w=new Set(d).size;return f!==w?`Input disagrees in number of vertices: ${f} \\neq ${w}`:(e(6,n={nv:f,edges:Mi(o.G),positions:o.M}),o.P===null||o.P.length!==f?(e(7,i={spec:"noop"}),"Ok. Animation disabled because no valid permutation was provided"):(e(7,i={spec:o.S,permutation:Ti(o.P),n:f}),"Ok!"))}function u(f){return d=>{let w=d.target.value.trim(),y=f(w);typeof y=="string"?e(0,r.innerText=y,r):e(0,r.innerText=h(),r)}}let l=()=>{e(0,r.innerText=h(),r)},c=u(f=>{let d=f.replaceAll("{","[").replaceAll("}","]"),w;try{w=JSON.parse(d)}catch{return"Syntax error in specification of graph edges"}e(1,o.G=w,o)}),a=u(f=>{let d;if(f.startsWith("["))try{d=JSON.parse(f)}catch{return"Tried to parse matrix as JSON but encountered a syntax error"}else d=f.split(`
`).map(y=>y.split(Rn).map(S=>parseFloat(S)));let w;try{if(w=new b(d),!isFinite(w.sum()))throw new Error}catch{return"Could not recognise matrix format"}if(w.columns!==3)return`The embedding matrix must have 3 columns: Got ${w.columns}`;e(1,o.M=w,o)}),p=u(f=>{if(f.length===0)return;let d;if(f.startsWith("["))try{d=JSON.parse(f)}catch{return"Syntax error in specification of automorphism"}else d=f.split(Rn).map(w=>parseInt(w));if(d.length===0||d.includes(NaN))return"Syntax error in specification of automorphism";console.log(d),e(1,o.P=d,o)});function m(){o.S=Vs(this),e(1,o)}function g(f){Pt[f?"unshift":"push"](()=>{r=f,e(0,r)})}return s.$$set=f=>{"InGraph"in f&&e(6,n=f.InGraph),"InTerpolate"in f&&e(7,i=f.InTerpolate)},[r,o,l,c,a,p,n,i,m,g]}class Oi extends Ae{constructor(t){super(),We(this,t,Ri,Ni,we,{InGraph:6,InTerpolate:7})}}const ze={},Hn=[];function E(s,t){if(Array.isArray(s)){for(const e of s)E(e,t);return}if(typeof s=="object"){for(const e in s)E(e,s[e]);return}Xn(Object.getOwnPropertyNames(t)),ze[s]=Object.assign(ze[s]||{},t)}function U(s){return ze[s]||{}}function Ci(){return[...new Set(Hn)]}function Xn(s){Hn.push(...s)}function Je(s,t){let e;const n=s.length,i=[];for(e=0;e<n;e++)i.push(t(s[e]));return i}function zi(s,t){let e;const n=s.length,i=[];for(e=0;e<n;e++)t(s[e])&&i.push(s[e]);return i}function ke(s){return s%360*Math.PI/180}function ue(s){return s.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function Di(s){return s.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function Un(s){return s.charAt(0).toUpperCase()+s.slice(1)}function $t(s,t,e,n){return(t==null||e==null)&&(n=n||s.bbox(),t==null?t=n.width/n.height*e:e==null&&(e=n.height/n.width*t)),{width:t,height:e}}function De(s,t){const e=s.origin;let n=s.ox!=null?s.ox:s.originX!=null?s.originX:"center",i=s.oy!=null?s.oy:s.originY!=null?s.originY:"center";e!=null&&([n,i]=Array.isArray(e)?e:typeof e=="object"?[e.x,e.y]:[e,e]);const r=typeof n=="string",o=typeof i=="string";if(r||o){const{height:h,width:u,x:l,y:c}=t.bbox();r&&(n=n.includes("left")?l:n.includes("right")?l+u:l+u/2),o&&(i=i.includes("top")?c:i.includes("bottom")?c+h:c+h/2)}return[n,i]}const Qe="http://www.w3.org/2000/svg",qi="http://www.w3.org/1999/xhtml",le="http://www.w3.org/2000/xmlns/",Jt="http://www.w3.org/1999/xlink",Pi="http://svgjs.dev/svgjs",I={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};class Ze{}const xt={},Ke="___SYMBOL___ROOT___";function Xt(s,t=Qe){return I.document.createElementNS(t,s)}function H(s,t=!1){if(s instanceof Ze)return s;if(typeof s=="object")return Te(s);if(s==null)return new xt[Ke];if(typeof s=="string"&&s.charAt(0)!=="<")return Te(I.document.querySelector(s));const e=t?I.document.createElement("div"):Xt("svg");return e.innerHTML=s,s=Te(e.firstChild),e.removeChild(e.firstChild),s}function P(s,t){return t&&t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node?t:Xt(s)}function et(s){if(!s)return null;if(s.instance instanceof Ze)return s.instance;if(s.nodeName==="#document-fragment")return new xt.Fragment(s);let t=Un(s.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":xt[t]||(t="Dom"),new xt[t](s)}let Te=et;function M(s,t=s.name,e=!1){return xt[t]=s,e&&(xt[Ke]=s),Xn(Object.getOwnPropertyNames(s.prototype)),s}function Fi(s){return xt[s]}let $i=1e3;function Wn(s){return"Svgjs"+Un(s)+$i++}function An(s){for(let t=s.children.length-1;t>=0;t--)An(s.children[t]);return s.id&&(s.id=Wn(s.nodeName)),s}function T(s,t){let e,n;for(s=Array.isArray(s)?s:[s],n=s.length-1;n>=0;n--)for(e in t)s[n].prototype[e]=t[e]}function q(s){return function(...t){const e=t[t.length-1];return e&&e.constructor===Object&&!(e instanceof Array)?s.apply(this,t.slice(0,-1)).attr(e):s.apply(this,t)}}function Li(){return this.parent().children()}function Gi(){return this.parent().index(this)}function Bi(){return this.siblings()[this.position()+1]}function Vi(){return this.siblings()[this.position()-1]}function Yi(){const s=this.position();return this.parent().add(this.remove(),s+1),this}function Hi(){const s=this.position();return this.parent().add(this.remove(),s?s-1:0),this}function Xi(){return this.parent().add(this.remove()),this}function Ui(){return this.parent().add(this.remove(),0),this}function Wi(s){s=H(s),s.remove();const t=this.position();return this.parent().add(s,t),this}function Ai(s){s=H(s),s.remove();const t=this.position();return this.parent().add(s,t+1),this}function Ji(s){return s=H(s),s.before(this),this}function Qi(s){return s=H(s),s.after(this),this}E("Dom",{siblings:Li,position:Gi,next:Bi,prev:Vi,forward:Yi,backward:Hi,front:Xi,back:Ui,before:Wi,after:Ai,insertBefore:Ji,insertAfter:Qi});const Jn=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Zi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ki=/rgb\((\d+),(\d+),(\d+)\)/,tr=/(#[a-z_][a-z0-9\-_]*)/i,er=/\)\s*,?\s*/,nr=/\s/g,On=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Cn=/^rgb\(/,zn=/^(\s+)?$/,Dn=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sr=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,at=/[\s,]+/,tn=/[MLHVCSQTAZ]/i;function ir(){const s=this.attr("class");return s==null?[]:s.trim().split(at)}function rr(s){return this.classes().indexOf(s)!==-1}function or(s){if(!this.hasClass(s)){const t=this.classes();t.push(s),this.attr("class",t.join(" "))}return this}function hr(s){return this.hasClass(s)&&this.attr("class",this.classes().filter(function(t){return t!==s}).join(" ")),this}function ur(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)}E("Dom",{classes:ir,hasClass:rr,addClass:or,removeClass:hr,toggleClass:ur});function lr(s,t){const e={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(n){return!!n.length}).forEach(function(n){const i=n.split(/\s*:\s*/);e[i[0]]=i[1]}),e;if(arguments.length<2){if(Array.isArray(s)){for(const n of s){const i=ue(n);e[n]=this.node.style[i]}return e}if(typeof s=="string")return this.node.style[ue(s)];if(typeof s=="object")for(const n in s)this.node.style[ue(n)]=s[n]==null||zn.test(s[n])?"":s[n]}return arguments.length===2&&(this.node.style[ue(s)]=t==null||zn.test(t)?"":t),this}function cr(){return this.css("display","")}function ar(){return this.css("display","none")}function fr(){return this.css("display")!=="none"}E("Dom",{css:lr,show:cr,hide:ar,visible:fr});function pr(s,t,e){if(s==null)return this.data(Je(zi(this.node.attributes,n=>n.nodeName.indexOf("data-")===0),n=>n.nodeName.slice(5)));if(s instanceof Array){const n={};for(const i of s)n[i]=this.data(i);return n}else if(typeof s=="object")for(t in s)this.data(t,s[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,t===null?null:e===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}E("Dom",{data:pr});function dr(s,t){if(typeof arguments[0]=="object")for(const e in s)this.remember(e,s[e]);else{if(arguments.length===1)return this.memory()[s];this.memory()[s]=t}return this}function mr(){if(arguments.length===0)this._memory={};else for(let s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this}function gr(){return this._memory=this._memory||{}}E("Dom",{remember:dr,forget:mr,memory:gr});function wr(s){return s.length===4?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s}function yr(s){const t=Math.round(s),n=Math.max(0,Math.min(255,t)).toString(16);return n.length===1?"0"+n:n}function Rt(s,t){for(let e=t.length;e--;)if(s[t[e]]==null)return!1;return!0}function _r(s,t){const e=Rt(s,"rgb")?{_a:s.r,_b:s.g,_c:s.b,_d:0,space:"rgb"}:Rt(s,"xyz")?{_a:s.x,_b:s.y,_c:s.z,_d:0,space:"xyz"}:Rt(s,"hsl")?{_a:s.h,_b:s.s,_c:s.l,_d:0,space:"hsl"}:Rt(s,"lab")?{_a:s.l,_b:s.a,_c:s.b,_d:0,space:"lab"}:Rt(s,"lch")?{_a:s.l,_b:s.c,_c:s.h,_d:0,space:"lch"}:Rt(s,"cmyk")?{_a:s.c,_b:s.m,_c:s.y,_d:s.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return e.space=t||e.space,e}function br(s){return s==="lab"||s==="xyz"||s==="lch"}function Me(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}class O{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof O||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",e,n){const{random:i,round:r,sin:o,PI:h}=Math;if(t==="vibrant"){const u=24*i()+57,l=(83-45)*i()+45,c=360*i();return new O(u,l,c,"lch")}else if(t==="sine"){e=e==null?i():e;const u=r(80*o(2*h*e/.5+.01)+150),l=r(50*o(2*h*e/.5+4.6)+200),c=r(100*o(2*h*e/.5+2.3)+150);return new O(u,l,c)}else if(t==="pastel"){const u=8*i()+86,l=(26-9)*i()+9,c=360*i();return new O(u,l,c,"lch")}else if(t==="dark"){const u=10+10*i(),l=(125-75)*i()+86,c=360*i();return new O(u,l,c,"lch")}else if(t==="rgb"){const u=255*i(),l=255*i(),c=255*i();return new O(u,l,c)}else if(t==="lab"){const u=100*i(),l=256*i()-128,c=256*i()-128;return new O(u,l,c,"lab")}else if(t==="grey"){const u=255*i();return new O(u,u,u)}else throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(On.test(t)||Cn.test(t))}cmyk(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(p=>p/255),h=Math.min(1-i,1-r,1-o);if(h===1)return new O(0,0,0,1,"cmyk");const u=(1-i-h)/(1-h),l=(1-r-h)/(1-h),c=(1-o-h)/(1-h);return new O(u,l,c,h,"cmyk")}hsl(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(f=>f/255),h=Math.max(i,r,o),u=Math.min(i,r,o),l=(h+u)/2,c=h===u,a=h-u,p=c?0:l>.5?a/(2-h-u):a/(h+u),m=c?0:h===i?((r-o)/a+(r<o?6:0))/6:h===r?((o-i)/a+2)/6:h===o?((i-r)/a+4)/6:0;return new O(360*m,100*p,100*l,"hsl")}init(t=0,e=0,n=0,i=0,r="rgb"){if(t=t||0,this.space)for(const a in this.space)delete this[this.space[a]];if(typeof t=="number")r=typeof i=="string"?i:r,i=typeof i=="string"?0:i,Object.assign(this,{_a:t,_b:e,_c:n,_d:i,space:r});else if(t instanceof Array)this.space=e||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const a=_r(t,e);Object.assign(this,a)}else if(typeof t=="string")if(Cn.test(t)){const a=t.replace(nr,""),[p,m,g]=Ki.exec(a).slice(1,4).map(f=>parseInt(f));Object.assign(this,{_a:p,_b:m,_c:g,_d:0,space:"rgb"})}else if(On.test(t)){const a=f=>parseInt(f,16),[,p,m,g]=Zi.exec(wr(t)).map(a);Object.assign(this,{_a:p,_b:m,_c:g,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:h,_c:u,_d:l}=this,c=this.space==="rgb"?{r:o,g:h,b:u}:this.space==="xyz"?{x:o,y:h,z:u}:this.space==="hsl"?{h:o,s:h,l:u}:this.space==="lab"?{l:o,a:h,b:u}:this.space==="lch"?{l:o,c:h,h:u}:this.space==="cmyk"?{c:o,m:h,y:u,k:l}:{};Object.assign(this,c)}lab(){const{x:t,y:e,z:n}=this.xyz(),i=116*e-16,r=500*(t-e),o=200*(e-n);return new O(i,r,o,"lab")}lch(){const{l:t,a:e,b:n}=this.lab(),i=Math.sqrt(e**2+n**2);let r=180*Math.atan2(n,e)/Math.PI;return r<0&&(r*=-1,r=360-r),new O(t,i,r,"lch")}rgb(){if(this.space==="rgb")return this;if(br(this.space)){let{x:t,y:e,z:n}=this;if(this.space==="lab"||this.space==="lch"){let{l:m,a:g,b:f}=this;if(this.space==="lch"){const{c:j,h:C}=this,x=Math.PI/180;g=j*Math.cos(x*C),f=j*Math.sin(x*C)}const d=(m+16)/116,w=g/500+d,y=d-f/200,S=16/116,N=.008856,$=7.787;t=.95047*(w**3>N?w**3:(w-S)/$),e=1*(d**3>N?d**3:(d-S)/$),n=1.08883*(y**3>N?y**3:(y-S)/$)}const i=t*3.2406+e*-1.5372+n*-.4986,r=t*-.9689+e*1.8758+n*.0415,o=t*.0557+e*-.204+n*1.057,h=Math.pow,u=.0031308,l=i>u?1.055*h(i,1/2.4)-.055:12.92*i,c=r>u?1.055*h(r,1/2.4)-.055:12.92*r,a=o>u?1.055*h(o,1/2.4)-.055:12.92*o;return new O(255*l,255*c,255*a)}else if(this.space==="hsl"){let{h:t,s:e,l:n}=this;if(t/=360,e/=100,n/=100,e===0)return n*=255,new O(n,n,n);const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=255*Me(r,i,t+1/3),h=255*Me(r,i,t),u=255*Me(r,i,t-1/3);return new O(o,h,u)}else if(this.space==="cmyk"){const{c:t,m:e,y:n,k:i}=this,r=255*(1-Math.min(1,t*(1-i)+i)),o=255*(1-Math.min(1,e*(1-i)+i)),h=255*(1-Math.min(1,n*(1-i)+i));return new O(r,o,h)}else return this}toArray(){const{_a:t,_b:e,_c:n,_d:i,space:r}=this;return[t,e,n,i,r]}toHex(){const[t,e,n]=this._clamped().map(yr);return`#${t}${e}${n}`}toRgb(){const[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(w=>w/255),h=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,u=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,c=(h*.4124+u*.3576+l*.1805)/.95047,a=(h*.2126+u*.7152+l*.0722)/1,p=(h*.0193+u*.1192+l*.9505)/1.08883,m=c>.008856?Math.pow(c,1/3):7.787*c+16/116,g=a>.008856?Math.pow(a,1/3):7.787*a+16/116,f=p>.008856?Math.pow(p,1/3):7.787*p+16/116;return new O(m,g,f,"xyz")}_clamped(){const{_a:t,_b:e,_c:n}=this.rgb(),{max:i,min:r,round:o}=Math,h=u=>i(0,r(o(u),255));return[t,e,n].map(h)}}class L{constructor(...t){this.init(...t)}clone(){return new L(this)}init(t,e){const n={x:0,y:0},i=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:e};return this.x=i.x==null?n.x:i.x,this.y=i.y==null?n.y:i.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));const{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}}function vr(s,t){return new L(s,t).transform(this.screenCTM().inverse())}function Ot(s,t,e){return Math.abs(t-s)<(e||1e-6)}class _{constructor(...t){this.init(...t)}static formatTransforms(t){const e=t.flip==="both"||t.flip===!0,n=t.flip&&(e||t.flip==="x")?-1:1,i=t.flip&&(e||t.flip==="y")?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,h=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,u=t.scale&&t.scale.length?t.scale[1]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleY)?t.scaleY*i:i,l=t.shear||0,c=t.rotate||t.theta||0,a=new L(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),p=a.x,m=a.y,g=new L(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),f=g.x,d=g.y,w=new L(t.translate||t.tx||t.translateX,t.ty||t.translateY),y=w.x,S=w.y,N=new L(t.relative||t.rx||t.relativeX,t.ry||t.relativeY),$=N.x,j=N.y;return{scaleX:h,scaleY:u,skewX:r,skewY:o,shear:l,theta:c,rx:$,ry:j,tx:y,ty:S,ox:p,oy:m,px:f,py:d}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,e,n){const i=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,h=t.b*e.c+t.d*e.d,u=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return n.a=i,n.b=r,n.c=o,n.d=h,n.e=u,n.f=l,n}around(t,e,n){return this.clone().aroundO(t,e,n)}aroundO(t,e,n){const i=t||0,r=e||0;return this.translateO(-i,-r).lmultiplyO(n).translateO(i,r)}clone(){return new _(this)}decompose(t=0,e=0){const n=this.a,i=this.b,r=this.c,o=this.d,h=this.e,u=this.f,l=n*o-i*r,c=l>0?1:-1,a=c*Math.sqrt(n*n+i*i),p=Math.atan2(c*i,c*n),m=180/Math.PI*p,g=Math.cos(p),f=Math.sin(p),d=(n*r+i*o)/l,w=r*a/(d*n-i)||o*a/(d*i+n),y=h-t+t*g*a+e*(d*g*a-f*w),S=u-e+t*f*a+e*(d*f*a+g*w);return{scaleX:a,scaleY:w,shear:d,rotate:m,translateX:y,translateY:S,originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new _(t);return Ot(this.a,e.a)&&Ot(this.b,e.b)&&Ot(this.c,e.c)&&Ot(this.d,e.d)&&Ot(this.e,e.e)&&Ot(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return t==="x"?this.scaleO(-1,1,e,0):t==="y"?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=_.fromArray([1,0,0,1,0,0]);return t=t instanceof ot?t.matrixify():typeof t=="string"?_.fromArray(t.split(at).map(parseFloat)):Array.isArray(t)?_.fromArray(t):typeof t=="object"&&_.isMatrixLike(t)?t:typeof t=="object"?new _().transform(t):arguments.length===6?_.fromArray([].slice.call(arguments)):e,this.a=t.a!=null?t.a:e.a,this.b=t.b!=null?t.b:e.b,this.c=t.c!=null?t.c:e.c,this.d=t.d!=null?t.d:e.d,this.e=t.e!=null?t.e:e.e,this.f=t.f!=null?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,n=this.c,i=this.d,r=this.e,o=this.f,h=t*i-e*n;if(!h)throw new Error("Cannot invert "+this);const u=i/h,l=-e/h,c=-n/h,a=t/h,p=-(u*r+c*o),m=-(l*r+a*o);return this.a=u,this.b=l,this.c=c,this.d=a,this.e=p,this.f=m,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=this,n=t instanceof _?t:new _(t);return _.matrixMultiply(n,e,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=this,n=t instanceof _?t:new _(t);return _.matrixMultiply(e,n,this)}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=ke(t);const i=Math.cos(t),r=Math.sin(t),{a:o,b:h,c:u,d:l,e:c,f:a}=this;return this.a=o*i-h*r,this.b=h*i+o*r,this.c=u*i-l*r,this.d=l*i+u*r,this.e=c*i-a*r+n*r-e*i+e,this.f=a*i+c*r-e*r-n*i+n,this}scale(t,e,n,i){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,i=0){arguments.length===3&&(i=n,n=e,e=t);const{a:r,b:o,c:h,d:u,e:l,f:c}=this;return this.a=r*t,this.b=o*e,this.c=h*t,this.d=u*e,this.e=l*t-n*t+n,this.f=c*e-i*e+i,this}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){const{a:i,b:r,c:o,d:h,e:u,f:l}=this;return this.a=i+r*t,this.c=o+h*t,this.e=u+l*t-n*t,this}skew(t,e,n,i){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,i=0){arguments.length===3&&(i=n,n=e,e=t),t=ke(t),e=ke(e);const r=Math.tan(t),o=Math.tan(e),{a:h,b:u,c:l,d:c,e:a,f:p}=this;return this.a=h+u*r,this.b=u+h*o,this.c=l+c*r,this.d=c+l*o,this.e=a+p*r-i*r,this.f=p+a*o-n*o,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(_.isMatrixLike(t))return new _(t).multiplyO(this);const e=_.formatTransforms(t),n=this,{x:i,y:r}=new L(e.ox,e.oy).transform(n),o=new _().translateO(e.rx,e.ry).lmultiplyO(n).translateO(-i,-r).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,r);if(isFinite(e.px)||isFinite(e.py)){const h=new L(i,r).transform(o),u=isFinite(e.px)?e.px-h.x:0,l=isFinite(e.py)?e.py-h.y:0;o.translateO(u,l)}return o.translateO(e.tx,e.ty),o}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function xr(){return new _(this.node.getCTM())}function Sr(){if(typeof this.isRoot=="function"&&!this.isRoot()){const s=this.rect(1,1),t=s.node.getScreenCTM();return s.remove(),new _(t)}return new _(this.node.getScreenCTM())}M(_,"Matrix");function dt(){if(!dt.nodes){const s=H().size(2,0);s.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),s.attr("focusable","false"),s.attr("aria-hidden","true");const t=s.path().node;dt.nodes={svg:s,path:t}}if(!dt.nodes.svg.node.parentNode){const s=I.document.body||I.document.documentElement;dt.nodes.svg.addTo(s)}return dt.nodes}function Qn(s){return!s.width&&!s.height&&!s.x&&!s.y}function Er(s){return s===I.document||(I.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===I.document}).call(I.document.documentElement,s)}class V{constructor(...t){this.init(...t)}addOffset(){return this.x+=I.window.pageXOffset,this.y+=I.window.pageYOffset,new V(this)}init(t){const e=[0,0,0,0];return t=typeof t=="string"?t.split(at).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):e,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Qn(this)}merge(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width)-e,r=Math.max(this.y+this.height,t.y+t.height)-n;return new V(e,n,i,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof _||(t=new _(t));let e=1/0,n=-1/0,i=1/0,r=-1/0;return[new L(this.x,this.y),new L(this.x2,this.y),new L(this.x,this.y2),new L(this.x2,this.y2)].forEach(function(h){h=h.transform(t),e=Math.min(e,h.x),n=Math.max(n,h.x),i=Math.min(i,h.y),r=Math.max(r,h.y)}),new V(e,i,n-e,r-i)}}function Zn(s,t,e){let n;try{if(n=t(s.node),Qn(n)&&!Er(s.node))throw new Error("Element not in the dom")}catch{n=e(s)}return n}function jr(){const e=Zn(this,i=>i.getBBox(),i=>{try{const r=i.clone().addTo(dt().svg).show(),o=r.node.getBBox();return r.remove(),o}catch(r){throw new Error(`Getting bbox of element "${i.node.nodeName}" is not possible: ${r.toString()}`)}});return new V(e)}function kr(s){const n=Zn(this,r=>r.getBoundingClientRect(),r=>{throw new Error(`Getting rbox of element "${r.node.nodeName}" is not possible`)}),i=new V(n);return s?i.transform(s.screenCTM().inverseO()):i.addOffset()}function Tr(s,t){const e=this.bbox();return s>e.x&&t>e.y&&s<e.x+e.width&&t<e.y+e.height}E({viewbox:{viewbox(s,t,e,n){return s==null?new V(this.attr("viewBox")):this.attr("viewBox",new V(s,t,e,n))},zoom(s,t){let{width:e,height:n}=this.attr(["width","height"]);if((!e&&!n||typeof e=="string"||typeof n=="string")&&(e=this.node.clientWidth,n=this.node.clientHeight),!e||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const i=this.viewbox(),r=e/i.width,o=n/i.height,h=Math.min(r,o);if(s==null)return h;let u=h/s;u===1/0&&(u=Number.MAX_SAFE_INTEGER/100),t=t||new L(e/2/r+i.x,n/2/o+i.y);const l=new V(i).transform(new _({scale:u,origin:t}));return this.viewbox(l)}}});M(V,"Box");class Et extends Array{constructor(t=[],...e){if(super(t,...e),typeof t=="number")return this;this.length=0,this.push(...t)}}T([Et],{each(s,...t){return typeof s=="function"?this.map((e,n,i)=>s.call(e,e,n,i)):this.map(e=>e[s](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const Mr=["toArray","constructor","each"];Et.extend=function(s){s=s.reduce((t,e)=>(Mr.includes(e)||e[0]==="_"||(t[e]=function(...n){return this.each(e,...n)}),t),{}),T([Et],s)};function Lt(s,t){return new Et(Je((t||I.document).querySelectorAll(s),function(e){return et(e)}))}function Ir(s){return Lt(s,this.node)}function Nr(s){return et(this.node.querySelector(s))}let Rr=0;const Kn={};function ts(s){let t=s.getEventHolder();return t===I.window&&(t=Kn),t.events||(t.events={}),t.events}function en(s){return s.getEventTarget()}function Or(s){let t=s.getEventHolder();t===I.window&&(t=Kn),t.events&&(t.events={})}function qe(s,t,e,n,i){const r=e.bind(n||s),o=H(s),h=ts(o),u=en(o);t=Array.isArray(t)?t:t.split(at),e._svgjsListenerId||(e._svgjsListenerId=++Rr),t.forEach(function(l){const c=l.split(".")[0],a=l.split(".")[1]||"*";h[c]=h[c]||{},h[c][a]=h[c][a]||{},h[c][a][e._svgjsListenerId]=r,u.addEventListener(c,r,i||!1)})}function Dt(s,t,e,n){const i=H(s),r=ts(i),o=en(i);typeof e=="function"&&(e=e._svgjsListenerId,!e)||(t=Array.isArray(t)?t:(t||"").split(at),t.forEach(function(h){const u=h&&h.split(".")[0],l=h&&h.split(".")[1];let c,a;if(e)r[u]&&r[u][l||"*"]&&(o.removeEventListener(u,r[u][l||"*"][e],n||!1),delete r[u][l||"*"][e]);else if(u&&l){if(r[u]&&r[u][l]){for(a in r[u][l])Dt(o,[u,l].join("."),a);delete r[u][l]}}else if(l)for(h in r)for(c in r[h])l===c&&Dt(o,[h,l].join("."));else if(u){if(r[u]){for(c in r[u])Dt(o,[u,c].join("."));delete r[u]}}else{for(h in r)Dt(o,h);Or(i)}}))}function Cr(s,t,e,n){const i=en(s);return t instanceof I.window.Event||(t=new I.window.CustomEvent(t,{detail:e,cancelable:!0,...n})),i.dispatchEvent(t),t}class Qt extends Ze{addEventListener(){}dispatch(t,e,n){return Cr(this,t,e,n)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const n=e[t.type];for(const i in n)for(const r in n[i])n[i][r](t);return!t.defaultPrevented}fire(t,e,n){return this.dispatch(t,e,n),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,n){return Dt(this,t,e,n),this}on(t,e,n,i){return qe(this,t,e,n,i),this}removeEventListener(){}}M(Qt,"EventTarget");function qn(){}const Yt={duration:400,ease:">",delay:0},zr={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Ft extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"?this:(this.length=0,this.push(...this.parse(t)),this)}parse(t=[]){return t instanceof Array?t:t.trim().split(at).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class v{constructor(...t){this.init(...t)}convert(t){return new v(this.value,t)}divide(t){return t=new v(t),new v(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(e=t.match(Jn),e&&(this.value=parseFloat(e[1]),e[5]==="%"?this.value/=100:e[5]==="s"&&(this.value*=1e3),this.unit=e[5])):t instanceof v&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new v(t),new v(this-t,this.unit||t.unit)}plus(t){return t=new v(t),new v(this+t,this.unit||t.unit)}times(t){return t=new v(t),new v(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const es=[];function Dr(s){es.push(s)}function qr(s,t,e){if(s==null){s={},t=this.node.attributes;for(const n of t)s[n.nodeName]=Dn.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return s}else{if(s instanceof Array)return s.reduce((n,i)=>(n[i]=this.attr(i),n),{});if(typeof s=="object"&&s.constructor===Object)for(t in s)this.attr(t,s[t]);else if(t===null)this.node.removeAttribute(s);else{if(t==null)return t=this.node.getAttribute(s),t==null?zr[s]:Dn.test(t)?parseFloat(t):t;t=es.reduce((n,i)=>i(s,n,this),t),typeof t=="number"?t=new v(t):O.isColor(t)?t=new O(t):t.constructor===Array&&(t=new Ft(t)),s==="leading"?this.leading&&this.leading(t):typeof e=="string"?this.node.setAttributeNS(e,s,t.toString()):this.node.setAttribute(s,t.toString()),this.rebuild&&(s==="font-size"||s==="x")&&this.rebuild()}}return this}class gt extends Qt{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return t=H(t),t.removeNamespace&&this.node instanceof I.window.SVGElement&&t.removeNamespace(),e==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return H(t).put(this,e)}children(){return new Et(Je(this.node.children,function(t){return et(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(An(this.node.cloneNode(t)))}each(t,e){const n=this.children();let i,r;for(i=0,r=n.length;i<r;i++)t.apply(n[i],[i,n]),e&&n[i].each(t,e);return this}element(t,e){return this.put(new gt(Xt(t),e))}first(){return et(this.node.firstChild)}get(t){return et(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,qi)}id(t){return typeof t>"u"&&!this.node.id&&(this.node.id=Wn(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return et(this.node.lastChild)}matches(t){const e=this.node,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=et(e.node.parentNode),!t)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=et(e.node.parentNode));return e}put(t,e){return t=H(t),this.add(t,e),t}putIn(t,e){return H(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=H(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const n=10**t,i=this.attr(e);for(const r in i)typeof i[r]=="number"&&(i[r]=Math.round(i[r]*n)/n);return this.attr(i),this}svg(t,e){return this.xml(t,e,Qe)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const n=e.index(this);return e.put(t,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,e,n){if(typeof t=="boolean"&&(n=e,e=t,t=null),t==null||typeof t=="function"){e=e==null?!0:e,this.writeDataToDom();let h=this;if(t!=null){if(h=et(h.node.cloneNode(!0)),e){const u=t(h);if(h=u||h,u===!1)return""}h.each(function(){const u=t(this),l=u||this;u===!1?this.remove():u&&this!==l&&this.replace(l)},!0)}return e?h.node.outerHTML:h.node.innerHTML}e=e==null?!1:e;const i=Xt("wrapper",n),r=I.document.createDocumentFragment();i.innerHTML=t;for(let h=i.children.length;h--;)r.appendChild(i.firstElementChild);const o=this.parent();return e?this.replace(r)&&o:this.add(r)}}T(gt,{attr:qr,find:Ir,findOne:Nr});M(gt,"Dom");class ot extends gt{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new v(t).plus(this.x()))}dy(t=0){return this.y(new v(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e=typeof t=="string";e||(t=H(t));const n=new Et;let i=this;for(;(i=i.parent())&&i.node!==I.document&&i.nodeName!=="#document-fragment"&&(n.push(i),!(!e&&i.node===t.node||e&&i.matches(t)));)if(i.node===this.root().node)return null;return n}reference(t){if(t=this.attr(t),!t)return null;const e=(t+"").match(tr);return e?H(e[1]):null}root(){const t=this.parent(Fi(Ke));return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const n=$t(this,t,e);return this.width(new v(n.width)).height(new v(n.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}T(ot,{bbox:jr,rbox:kr,inside:Tr,point:vr,ctm:xr,screenCTM:Sr});M(ot,"Element");const Bt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,t){return t==="color"?s:s+"-"+t}};["fill","stroke"].forEach(function(s){const t={};let e;t[s]=function(n){if(typeof n>"u")return this.attr(s);if(typeof n=="string"||n instanceof O||O.isRgb(n)||n instanceof ot)this.attr(s,n);else for(e=Bt[s].length-1;e>=0;e--)n[Bt[s][e]]!=null&&this.attr(Bt.prefix(s,Bt[s][e]),n[Bt[s][e]]);return this},E(["Element","Runner"],t)});E(["Element","Runner"],{matrix:function(s,t,e,n,i,r){return s==null?new _(this):this.attr("transform",new _(s,t,e,n,i,r))},rotate:function(s,t,e){return this.transform({rotate:s,ox:t,oy:e},!0)},skew:function(s,t,e,n){return arguments.length===1||arguments.length===3?this.transform({skew:s,ox:t,oy:e},!0):this.transform({skew:[s,t],ox:e,oy:n},!0)},shear:function(s,t,e){return this.transform({shear:s,ox:t,oy:e},!0)},scale:function(s,t,e,n){return arguments.length===1||arguments.length===3?this.transform({scale:s,ox:t,oy:e},!0):this.transform({scale:[s,t],ox:e,oy:n},!0)},translate:function(s,t){return this.transform({translate:[s,t]},!0)},relative:function(s,t){return this.transform({relative:[s,t]},!0)},flip:function(s="both",t="center"){return"xybothtrue".indexOf(s)===-1&&(t=s,s="both"),this.transform({flip:s,origin:t},!0)},opacity:function(s){return this.attr("opacity",s)}});E("radius",{radius:function(s,t=s){return(this._element||this).type==="radialGradient"?this.attr("r",new v(s)):this.rx(s).ry(t)}});E("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(s){return new L(this.node.getPointAtLength(s))}});E(["Element","Runner"],{font:function(s,t){if(typeof s=="object"){for(t in s)this.font(t,s[t]);return this}return s==="leading"?this.leading(t):s==="anchor"?this.attr("text-anchor",t):s==="size"||s==="family"||s==="weight"||s==="stretch"||s==="variant"||s==="style"?this.attr("font-"+s,t):this.attr(s,t)}});const Pr=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(s,t){const e=function(n){return n===null?this.off(t):this.on(t,n),this};return s[t]=e,s},{});E("Element",Pr);function Fr(){return this.attr("transform",null)}function $r(){return(this.attr("transform")||"").split(er).slice(0,-1).map(function(t){const e=t.trim().split("(");return[e[0],e[1].split(at).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(t,e){return e[0]==="matrix"?t.lmultiply(_.fromArray(e[1])):t[e[0]].apply(t,e[1])},new _)}function Lr(s,t){if(this===s)return this;const e=this.screenCTM(),n=s.screenCTM().inverse();return this.addTo(s,t).untransform().transform(n.multiply(e)),this}function Gr(s){return this.toParent(this.root(),s)}function Br(s,t){if(s==null||typeof s=="string"){const i=new _(this).decompose();return s==null?i:i[s]}_.isMatrixLike(s)||(s={...s,origin:De(s,this)});const e=t===!0?this:t||!1,n=new _(e).transform(s);return this.attr("transform",n)}E("Element",{untransform:Fr,matrixify:$r,toParent:Lr,toRoot:Gr,transform:Br});class W extends ot{flatten(t=this,e){return this.each(function(){if(this instanceof W)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),e=t.index(this)){return e=e===-1?t.children().length:e,this.each(function(n,i){return i[i.length-n-1].toParent(t,e)}),this.remove()}}M(W,"Container");class nn extends W{constructor(t,e=t){super(P("defs",t),e)}flatten(){return this}ungroup(){return this}}M(nn,"Defs");class tt extends ot{}M(tt,"Shape");function sn(s){return this.attr("rx",s)}function rn(s){return this.attr("ry",s)}function ns(s){return s==null?this.cx()-this.rx():this.cx(s+this.rx())}function ss(s){return s==null?this.cy()-this.ry():this.cy(s+this.ry())}function is(s){return this.attr("cx",s)}function rs(s){return this.attr("cy",s)}function os(s){return s==null?this.rx()*2:this.rx(new v(s).divide(2))}function hs(s){return s==null?this.ry()*2:this.ry(new v(s).divide(2))}var Vr={__proto__:null,rx:sn,ry:rn,x:ns,y:ss,cx:is,cy:rs,width:os,height:hs};class ve extends tt{constructor(t,e=t){super(P("ellipse",t),e)}size(t,e){const n=$t(this,t,e);return this.rx(new v(n.width).divide(2)).ry(new v(n.height).divide(2))}}T(ve,Vr);E("Container",{ellipse:q(function(s=0,t=s){return this.put(new ve).size(s,t).move(0,0)})});M(ve,"Ellipse");class us extends gt{constructor(t=I.document.createDocumentFragment()){super(t)}xml(t,e,n){if(typeof t=="boolean"&&(n=e,e=t,t=null),t==null||typeof t=="function"){const i=new gt(Xt("wrapper",n));return i.add(this.node.cloneNode(!0)),i.xml(!1,n)}return super.xml(t,!1,n)}}M(us,"Fragment");function ls(s,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new v(s),fy:new v(t)}):this.attr({x1:new v(s),y1:new v(t)})}function cs(s,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new v(s),cy:new v(t)}):this.attr({x2:new v(s),y2:new v(t)})}var Yr={__proto__:null,from:ls,to:cs};class Zt extends W{constructor(t,e){super(P(t+"Gradient",typeof t=="string"?null:t),e)}attr(t,e,n){return t==="transform"&&(t="gradientTransform"),super.attr(t,e,n)}bbox(){return new V}targets(){return Lt('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}T(Zt,Yr);E({Container:{gradient(...s){return this.defs().gradient(...s)}},Defs:{gradient:q(function(s,t){return this.put(new Zt(s)).update(t)})}});M(Zt,"Gradient");class Ut extends W{constructor(t,e=t){super(P("pattern",t),e)}attr(t,e,n){return t==="transform"&&(t="patternTransform"),super.attr(t,e,n)}bbox(){return new V}targets(){return Lt('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}E({Container:{pattern(...s){return this.defs().pattern(...s)}},Defs:{pattern:q(function(s,t,e){return this.put(new Ut).update(e).attr({x:0,y:0,width:s,height:t,patternUnits:"userSpaceOnUse"})})}});M(Ut,"Pattern");class xe extends tt{constructor(t,e=t){super(P("image",t),e)}load(t,e){if(!t)return this;const n=new I.window.Image;return qe(n,"load",function(i){const r=this.parent(Ut);this.width()===0&&this.height()===0&&this.size(n.width,n.height),r instanceof Ut&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof e=="function"&&e.call(this,i)},this),qe(n,"load error",function(){Dt(n)}),this.attr("href",n.src=t,Jt)}}Dr(function(s,t,e){return(s==="fill"||s==="stroke")&&sr.test(t)&&(t=e.root().defs().image(t)),t instanceof xe&&(t=e.root().defs().pattern(0,0,n=>{n.add(t)})),t});E({Container:{image:q(function(s,t){return this.put(new xe).size(0,0).load(s,t)})}});M(xe,"Image");class wt extends Ft{bbox(){let t=-1/0,e=-1/0,n=1/0,i=1/0;return this.forEach(function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),n=Math.min(r[0],n),i=Math.min(r[1],i)}),new V(n,i,t-n,e-i)}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];t instanceof Array?t=Array.prototype.concat.apply([],t):t=t.trim().split(at).map(parseFloat),t.length%2!==0&&t.pop();for(let n=0,i=t.length;n<i;n=n+2)e.push([t[n],t[n+1]]);return e}size(t,e){let n;const i=this.bbox();for(n=this.length-1;n>=0;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*t/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*e/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,n=this.length;e<n;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));for(let e=this.length;e--;){const[n,i]=this[e];this[e][0]=t.a*n+t.c*i+t.e,this[e][1]=t.b*n+t.d*i+t.f}return this}}const Hr=wt;function Xr(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)}function Ur(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)}function Wr(s){const t=this.bbox();return s==null?t.width:this.size(s,t.height)}function Ar(s){const t=this.bbox();return s==null?t.height:this.size(t.width,s)}var on={__proto__:null,MorphArray:Hr,x:Xr,y:Ur,width:Wr,height:Ar};class Wt extends tt{constructor(t,e=t){super(P("line",t),e)}array(){return new wt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,n,i){return t==null?this.array():(typeof e<"u"?t={x1:t,y1:e,x2:n,y2:i}:t=new wt(t).toLine(),this.attr(t))}size(t,e){const n=$t(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}T(Wt,on);E({Container:{line:q(function(...s){return Wt.prototype.plot.apply(this.put(new Wt),s[0]!=null?s:[0,0,0,0])})}});M(Wt,"Line");class pe extends W{constructor(t,e=t){super(P("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}E({Container:{marker(...s){return this.defs().marker(...s)}},Defs:{marker:q(function(s,t,e){return this.put(new pe).size(s,t).ref(s/2,t/2).viewbox(0,0,s,t).attr("orient","auto").update(e)})},marker:{marker(s,t,e,n){let i=["marker"];return s!=="all"&&i.push(s),i=i.join("-"),s=arguments[1]instanceof pe?arguments[1]:this.defs().marker(t,e,n),this.attr(i,s)}}});M(pe,"Marker");function qt(s,t){return function(e){return e==null?this[s]:(this[s]=e,t&&t.call(this),this)}}const Jr={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return-Math.cos(s*Math.PI/2)+1},bezier:function(s,t,e,n){return function(i){return i<0?s>0?t/s*i:e>0?n/e*i:0:i>1?e<1?(1-n)/(1-e)*i+(n-e)/(1-e):s<1?(1-t)/(1-s)*i+(t-s)/(1-s):1:3*i*(1-i)**2*t+3*i**2*(1-i)*n+i**3}},steps:function(s,t="end"){t=t.split("-").reverse()[0];let e=s;return t==="none"?--e:t==="both"&&++e,(n,i=!1)=>{let r=Math.floor(n*s);const o=n*r%1===0;return(t==="start"||t==="both")&&++r,i&&o&&--r,n>=0&&r<0&&(r=0),n<=1&&r>e&&(r=e),r/e}}};class hn{done(){return!1}}class Pe extends hn{constructor(t=Yt.ease){super(),this.ease=Jr[t]||t}step(t,e,n){return typeof t!="number"?n<1?t:e:t+(e-t)*this.ease(n)}}class de extends hn{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,n,i){return this.stepper(t,e,n,i)}}function Pn(){const s=(this._duration||500)/1e3,t=this._overshoot||0,e=1e-10,n=Math.PI,i=Math.log(t/100+e),r=-i/Math.sqrt(n*n+i*i),o=3.9/(r*s);this.d=2*r*o,this.k=o*o}class Qr extends de{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,n,i){if(typeof t=="string")return t;if(i.done=n===1/0,n===1/0)return e;if(n===0)return t;n>100&&(n=16),n/=1e3;const r=i.velocity||0,o=-this.d*r-this.k*(t-e),h=t+r*n+o*n*n/2;return i.velocity=r+o*n,i.done=Math.abs(e-h)+Math.abs(r)<.002,i.done?e:h}}T(Qr,{duration:qt("_duration",Pn),overshoot:qt("_overshoot",Pn)});class Zr extends de{constructor(t=.1,e=.01,n=0,i=1e3){super(),this.p(t).i(e).d(n).windup(i)}step(t,e,n,i){if(typeof t=="string")return t;if(i.done=n===1/0,n===1/0)return e;if(n===0)return t;const r=e-t;let o=(i.integral||0)+r*n;const h=(r-(i.error||0))/n,u=this._windup;return u!==!1&&(o=Math.max(-u,Math.min(o,u))),i.error=r,i.integral=o,i.done=Math.abs(r)<.001,i.done?e:t+(this.P*r+this.I*o+this.D*h)}}T(Zr,{windup:qt("_windup"),p:qt("P"),i:qt("I"),d:qt("D")});const Kr={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Fe={M:function(s,t,e){return t.x=e.x=s[0],t.y=e.y=s[1],["M",t.x,t.y]},L:function(s,t){return t.x=s[0],t.y=s[1],["L",s[0],s[1]]},H:function(s,t){return t.x=s[0],["H",s[0]]},V:function(s,t){return t.y=s[0],["V",s[0]]},C:function(s,t){return t.x=s[4],t.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,t){return t.x=s[2],t.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,t){return t.x=s[2],t.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,t){return t.x=s[0],t.y=s[1],["T",s[0],s[1]]},Z:function(s,t,e){return t.x=e.x,t.y=e.y,["Z"]},A:function(s,t){return t.x=s[5],t.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},Ie="mlhvqtcsaz".split("");for(let s=0,t=Ie.length;s<t;++s)Fe[Ie[s]]=function(e){return function(n,i,r){if(e==="H")n[0]=n[0]+i.x;else if(e==="V")n[0]=n[0]+i.y;else if(e==="A")n[5]=n[5]+i.x,n[6]=n[6]+i.y;else for(let o=0,h=n.length;o<h;++o)n[o]=n[o]+(o%2?i.y:i.x);return Fe[e](n,i,r)}}(Ie[s].toUpperCase());function to(s){const t=s.segment[0];return Fe[t](s.segment.slice(1),s.p,s.p0)}function $e(s){return s.segment.length&&s.segment.length-1===Kr[s.segment[0].toUpperCase()]}function eo(s,t){s.inNumber&&yt(s,!1);const e=tn.test(t);if(e)s.segment=[t];else{const n=s.lastCommand,i=n.toLowerCase(),r=n===i;s.segment=[i==="m"?r?"l":"L":n]}return s.inSegment=!0,s.lastCommand=s.segment[0],e}function yt(s,t){if(!s.inNumber)throw new Error("Parser Error");s.number&&s.segment.push(parseFloat(s.number)),s.inNumber=t,s.number="",s.pointSeen=!1,s.hasExponent=!1,$e(s)&&Le(s)}function Le(s){s.inSegment=!1,s.absolute&&(s.segment=to(s)),s.segments.push(s.segment)}function no(s){if(!s.segment.length)return!1;const t=s.segment[0].toUpperCase()==="A",e=s.segment.length;return t&&(e===4||e===5)}function so(s){return s.lastToken.toUpperCase()==="E"}function io(s,t=!0){let e=0,n="";const i={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new L,p:new L};for(;i.lastToken=n,n=s.charAt(e++);)if(!(!i.inSegment&&eo(i,n))){if(n==="."){if(i.pointSeen||i.hasExponent){yt(i,!1),--e;continue}i.inNumber=!0,i.pointSeen=!0,i.number+=n;continue}if(!isNaN(parseInt(n))){if(i.number==="0"||no(i)){i.inNumber=!0,i.number=n,yt(i,!0);continue}i.inNumber=!0,i.number+=n;continue}if(n===" "||n===","){i.inNumber&&yt(i,!1);continue}if(n==="-"){if(i.inNumber&&!so(i)){yt(i,!1),--e;continue}i.number+=n,i.inNumber=!0;continue}if(n.toUpperCase()==="E"){i.number+=n,i.hasExponent=!0;continue}if(tn.test(n)){if(i.inNumber)yt(i,!1);else if($e(i))Le(i);else throw new Error("parser Error");--e}}return i.inNumber&&yt(i,!1),i.inSegment&&$e(i)&&Le(i),i.segments}function ro(s){let t="";for(let e=0,n=s.length;e<n;e++)t+=s[e][0],s[e][1]!=null&&(t+=s[e][1],s[e][2]!=null&&(t+=" ",t+=s[e][2],s[e][3]!=null&&(t+=" ",t+=s[e][3],t+=" ",t+=s[e][4],s[e][5]!=null&&(t+=" ",t+=s[e][5],t+=" ",t+=s[e][6],s[e][7]!=null&&(t+=" ",t+=s[e][7])))));return t+" "}class jt extends Ft{bbox(){return dt().path.setAttribute("d",this.toString()),new V(dt.nodes.path.getBBox())}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i,r=this.length-1;r>=0;r--)i=this[r][0],i==="M"||i==="L"||i==="T"?(this[r][1]+=t,this[r][2]+=e):i==="H"?this[r][1]+=t:i==="V"?this[r][1]+=e:i==="C"||i==="S"||i==="Q"?(this[r][1]+=t,this[r][2]+=e,this[r][3]+=t,this[r][4]+=e,i==="C"&&(this[r][5]+=t,this[r][6]+=e)):i==="A"&&(this[r][6]+=t,this[r][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),io(t)}size(t,e){const n=this.bbox();let i,r;for(n.width=n.width===0?1:n.width,n.height=n.height===0?1:n.height,i=this.length-1;i>=0;i--)r=this[i][0],r==="M"||r==="L"||r==="T"?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y):r==="H"?this[i][1]=(this[i][1]-n.x)*t/n.width+n.x:r==="V"?this[i][1]=(this[i][1]-n.y)*e/n.height+n.y:r==="C"||r==="S"||r==="Q"?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y,this[i][3]=(this[i][3]-n.x)*t/n.width+n.x,this[i][4]=(this[i][4]-n.y)*e/n.height+n.y,r==="C"&&(this[i][5]=(this[i][5]-n.x)*t/n.width+n.x,this[i][6]=(this[i][6]-n.y)*e/n.height+n.y)):r==="A"&&(this[i][1]=this[i][1]*t/n.width,this[i][2]=this[i][2]*e/n.height,this[i][6]=(this[i][6]-n.x)*t/n.width+n.x,this[i][7]=(this[i][7]-n.y)*e/n.height+n.y);return this}toString(){return ro(this)}}const as=s=>{const t=typeof s;return t==="number"?v:t==="string"?O.isColor(s)?O:at.test(s)?tn.test(s)?jt:Ft:Jn.test(s)?v:Ge:un.indexOf(s.constructor)>-1?s.constructor:Array.isArray(s)?Ft:t==="object"?At:Ge};class _t{constructor(t){this._stepper=t||new Pe("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,n){return e&&n},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(as(t));let e=new this._type(t);return this._type===O&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===At&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map(function(n){return n.done=!0,n}),e}}class Ge{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Kt{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Kt.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Kt.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const oo=(s,t)=>s[0]<t[0]?-1:s[0]>t[0]?1:0;class At{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let n=0,i=e.length;n<i;++n){if(e[n+1]===t[n+1]){if(e[n+1]===O&&t[n+7]!==e[n+7]){const h=t[n+7],u=new O(this.values.splice(n+3,5))[h]().toArray();this.values.splice(n+3,0,...u)}n+=e[n+2]+2;continue}if(!t[n+1])return this;const r=new t[n+1]().toArray(),o=e[n+2]+3;e.splice(n,o,t[n],t[n+1],t[n+2],...r),n+=e[n+2]+2}return this}init(t){if(this.values=[],Array.isArray(t)){this.values=t.slice();return}t=t||{};const e=[];for(const n in t){const i=as(t[n]),r=new i(t[n]).toArray();e.push([n,i,r.length,...r])}return e.sort(oo),this.values=e.reduce((n,i)=>n.concat(i),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const n=e.shift(),i=e.shift(),r=e.shift(),o=e.splice(0,r);t[n]=new i(o)}return t}}const un=[Ge,Kt,At];function ho(s=[]){un.push(...[].concat(s))}function uo(){T(un,{to(s){return new _t().type(this.constructor).from(this.toArray()).to(s)},fromArray(s){return this.init(s),this},toConsumable(){return this.toArray()},morph(s,t,e,n,i){const r=function(o,h){return n.step(o,t[h],e,i[h],i)};return this.fromArray(s.map(r))}})}class Gt extends tt{constructor(t,e=t){super(P("path",t),e)}array(){return this._array||(this._array=new jt(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new jt(t))}size(t,e){const n=$t(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}Gt.prototype.MorphArray=jt;E({Container:{path:q(function(s){return this.put(new Gt).plot(s||new jt)})}});M(Gt,"Path");function lo(){return this._array||(this._array=new wt(this.attr("points")))}function co(){return delete this._array,this}function ao(s,t){return this.attr("points",this.array().move(s,t))}function fo(s){return s==null?this.array():this.clear().attr("points",typeof s=="string"?s:this._array=new wt(s))}function po(s,t){const e=$t(this,s,t);return this.attr("points",this.array().size(e.width,e.height))}var fs={__proto__:null,array:lo,clear:co,move:ao,plot:fo,size:po};class te extends tt{constructor(t,e=t){super(P("polygon",t),e)}}E({Container:{polygon:q(function(s){return this.put(new te).plot(s||new wt)})}});T(te,on);T(te,fs);M(te,"Polygon");class ee extends tt{constructor(t,e=t){super(P("polyline",t),e)}}E({Container:{polyline:q(function(s){return this.put(new ee).plot(s||new wt)})}});T(ee,on);T(ee,fs);M(ee,"Polyline");class Se extends tt{constructor(t,e=t){super(P("rect",t),e)}}T(Se,{rx:sn,ry:rn});E({Container:{rect:q(function(s,t){return this.put(new Se).size(s,t)})}});M(Se,"Rect");class Ne{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=typeof t.next<"u"?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const R={nextDraw:null,frames:new Ne,timeouts:new Ne,immediates:new Ne,timer:()=>I.window.performance||I.window.Date,transforms:[],frame(s){const t=R.frames.push({run:s});return R.nextDraw===null&&(R.nextDraw=I.window.requestAnimationFrame(R._draw)),t},timeout(s,t){t=t||0;const e=R.timer().now()+t,n=R.timeouts.push({run:s,time:e});return R.nextDraw===null&&(R.nextDraw=I.window.requestAnimationFrame(R._draw)),n},immediate(s){const t=R.immediates.push(s);return R.nextDraw===null&&(R.nextDraw=I.window.requestAnimationFrame(R._draw)),t},cancelFrame(s){s!=null&&R.frames.remove(s)},clearTimeout(s){s!=null&&R.timeouts.remove(s)},cancelImmediate(s){s!=null&&R.immediates.remove(s)},_draw(s){let t=null;const e=R.timeouts.last();for(;(t=R.timeouts.shift())&&(s>=t.time?t.run():R.timeouts.push(t),t!==e););let n=null;const i=R.frames.last();for(;n!==i&&(n=R.frames.shift());)n.run(s);let r=null;for(;r=R.immediates.shift();)r();R.nextDraw=R.timeouts.first()||R.frames.first()?I.window.requestAnimationFrame(R._draw):null}},mo=function(s){const t=s.start,e=s.runner.duration(),n=t+e;return{start:t,duration:e,end:n,runner:s.runner}},go=function(){const s=I.window;return(s.performance||s.Date).now()};class ps extends Qt{constructor(t=go){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map(e=>e.start+e.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(t==null)return this.speed(-e);const n=Math.abs(e);return this.speed(t?-n:n)}schedule(t,e,n){if(t==null)return this._runners.map(mo);let i=0;const r=this.getEndTime();if(e=e||0,n==null||n==="last"||n==="after")i=r;else if(n==="absolute"||n==="start")i=e,e=0;else if(n==="now")i=this._time;else if(n==="relative"){const u=this.getRunnerInfoById(t.id);u&&(i=u.start+e,e=0)}else if(n==="with-last"){const u=this.getLastRunnerInfo();i=u?u.start:this._time}else throw new Error('Invalid value for the "when" parameter');t.unschedule(),t.timeline(this);const o=t.persist(),h={persist:o===null?this._persist:o,start:i+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(h),this._runners.sort((u,l)=>u.start-l.start),this._runnerIds=this._runners.map(u=>u.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0?this:(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return R.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():this._paused?this:(this._nextFrame=R.frame(this._step),this)}_stepFn(t=!1){const e=this._timeSource();let n=e-this._lastSourceTime;t&&(n=0);const i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const h=this._runners[o],u=h.runner;this._time-h.start<=0&&u.reset()}let r=!1;for(let o=0,h=this._runners.length;o<h;o++){const u=this._runners[o],l=u.runner;let c=i;const a=this._time-u.start;if(a<=0){r=!0;continue}else a<c&&(c=a);if(!l.active())continue;l.step(c).done?u.persist!==!0&&l.duration()-l.time()+this._time+u.persist<this._time&&(l.unschedule(),--o,--h):r=!0}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}E({Element:{timeline:function(s){return s==null?(this._timeline=this._timeline||new ps,this._timeline):(this._timeline=s,this)}}});class K extends Qt{constructor(t){super(),this.id=K.id++,t=t==null?Yt.duration:t,t=typeof t=="function"?new de(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof de,this._stepper=this._isDeclarative?t:new Pe,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new _,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(t,e,n){let i=1,r=!1,o=0;return t=t||Yt.duration,e=e||Yt.delay,n=n||"last",typeof t=="object"&&!(t instanceof hn)&&(e=t.delay||e,n=t.when||n,r=t.swing||r,i=t.times||i,o=t.wait||o,t=t.duration||Yt.duration),{duration:t,delay:e,swing:r,times:i,wait:o,when:n}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,n){const i=K.sanitise(t,e,n),r=new K(i.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(i).schedule(i.delay,i.when)}clearTransform(){return this.transforms=new _,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Pe(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,n){return typeof t=="object"&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,this._times===!0&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(t==null){const o=Math.floor(this._time/e),u=(this._time-o*e)/this._duration;return Math.min(o+u,this._times)}const n=Math.floor(t),i=t%1,r=e*n+this._duration*i;return this.time(r)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const e=this._time,n=this._duration,i=this._wait,r=this._times,o=this._swing,h=this._reverse;let u;if(t==null){const p=function(g){const f=o*Math.floor(g%(2*(i+n))/(i+n)),d=f&&!h||!f&&h,w=Math.pow(-1,d)*(g%(i+n))/n+d;return Math.max(Math.min(w,1),0)},m=r*(i+n)-i;return u=e<=0?Math.round(p(1e-5)):e<m?p(e):Math.round(p(m-1e-5)),u}const l=Math.floor(this.loops()),c=o&&l%2===0;return u=l+(c&&!h||h&&c?t:1-t),this.loops(u)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,n,i){return this._queue.push({initialiser:t||qn,runner:e||qn,retarget:n,isTransform:i,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(t){return this._reverse=t==null?!this._reverse:t,this}schedule(t,e,n){if(t instanceof ps||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}step(t){if(!this.enabled)return this;t=t==null?16:t,this._time+=t;const e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const i=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<i&&this._time>=i;this._lastTime=this._time,r&&this.fire("start",this);const h=this._isDeclarative;this.done=!h&&!o&&this._time>=i,this._reseted=!1;let u=!1;return(n||h)&&(this._initialise(n),this.transforms=new _,u=this._run(h?t:e),this.fire("step",this)),this.done=this.done||u&&h,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return typeof t>"u"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(!(!t&&!this._isDeclarative))for(let e=0,n=this._queue.length;e<n;++e){const i=this._queue[e],r=this._isDeclarative||!i.initialised&&t;t=!i.finished,r&&t&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(t){let e=!0;for(let n=0,i=this._queue.length;n<i;++n){const r=this._queue[n],o=r.runner.call(this,t);r.finished=r.finished||o===!0,e=e&&r.finished}return e}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){const r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const i=this.timeline();return i&&i.play(),!0}return!1}}K.id=0;class me{constructor(t=new _,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}T([K,me],{mergeWith(s){return new me(s.transforms.lmultiply(this.transforms),s.id)}});const ds=(s,t)=>s.lmultiplyO(t),ms=s=>s.transforms;function wo(){const t=this._transformationRunners.runners.map(ms).reduce(ds,new _);this.transform(t),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class yo{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new me).forEach(n=>n.clearTransformsFromQueue()),this}edit(t,e){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const n=this.runners[e];if(t&&n.done&&t.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(n.id);const r=n.mergeWith(t);this.edit(t.id,r),t=r,--e}else t=n}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}E({Element:{animate(s,t,e){const n=K.sanitise(s,t,e),i=this.timeline();return new K(n.duration).loop(n).element(this).timeline(i.play()).schedule(n.delay,n.when)},delay(s,t){return this.animate(0,s,t)},_clearTransformRunnersBefore(s){this._transformationRunners.clearBefore(s.id)},_currentTransform(s){return this._transformationRunners.runners.filter(t=>t.id<=s.id).map(ms).reduce(ds,new _)},_addRunner(s){this._transformationRunners.add(s),R.cancelImmediate(this._frameId),this._frameId=R.immediate(wo.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new yo().add(new me(new _(this))))}}});const _o=(s,t)=>s.filter(e=>!t.includes(e));T(K,{attr(s,t){return this.styleAttr("attr",s,t)},css(s,t){return this.styleAttr("css",s,t)},styleAttr(s,t,e){if(typeof t=="string")return this.styleAttr(s,{[t]:e});let n=t;if(this._tryRetarget(s,n))return this;let i=new _t(this._stepper).to(n),r=Object.keys(n);return this.queue(function(){i=i.from(this.element()[s](r))},function(o){return this.element()[s](i.at(o).valueOf()),i.done()},function(o){const h=Object.keys(o),u=_o(h,r);if(u.length){const c=this.element()[s](u),a=new At(i.from()).valueOf();Object.assign(a,c),i.from(a)}const l=new At(i.to()).valueOf();Object.assign(l,o),i.to(l),r=h,n=o}),this._rememberMorpher(s,i),this},zoom(s,t){if(this._tryRetarget("zoom",s,t))return this;let e=new _t(this._stepper).to(new v(s));return this.queue(function(){e=e.from(this.element().zoom())},function(n){return this.element().zoom(e.at(n),t),e.done()},function(n,i){t=i,e.to(n)}),this._rememberMorpher("zoom",e),this},transform(s,t,e){if(t=s.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",s))return this;const n=_.isMatrixLike(s);e=s.affine!=null?s.affine:e!=null?e:!n;const i=new _t(this._stepper).type(e?Kt:_);let r,o,h,u,l;function c(){o=o||this.element(),r=r||De(s,o),l=new _(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)}function a(m){t||this.clearTransform();const{x:g,y:f}=new L(r).transform(o._currentTransform(this));let d=new _({...s,origin:[g,f]}),w=this._isDeclarative&&h?h:l;if(e){d=d.decompose(g,f),w=w.decompose(g,f);const S=d.rotate,N=w.rotate,$=[S-360,S,S+360],j=$.map(z=>Math.abs(z-N)),C=Math.min(...j),x=j.indexOf(C);d.rotate=$[x]}t&&(n||(d.rotate=s.rotate||0),this._isDeclarative&&u&&(w.rotate=u)),i.from(w),i.to(d);const y=i.at(m);return u=y.rotate,h=new _(y),this.addTransform(h),o._addRunner(this),i.done()}function p(m){(m.origin||"center").toString()!==(s.origin||"center").toString()&&(r=De(m,o)),s={...m,origin:r}}return this.queue(c,a,p,!0),this._isDeclarative&&this._rememberMorpher("transform",i),this},x(s,t){return this._queueNumber("x",s)},y(s){return this._queueNumber("y",s)},dx(s=0){return this._queueNumberDelta("x",s)},dy(s=0){return this._queueNumberDelta("y",s)},dmove(s,t){return this.dx(s).dy(t)},_queueNumberDelta(s,t){if(t=new v(t),this._tryRetarget(s,t))return this;const e=new _t(this._stepper).to(t);let n=null;return this.queue(function(){n=this.element()[s](),e.from(n),e.to(n+t)},function(i){return this.element()[s](e.at(i)),e.done()},function(i){e.to(n+new v(i))}),this._rememberMorpher(s,e),this},_queueObject(s,t){if(this._tryRetarget(s,t))return this;const e=new _t(this._stepper).to(t);return this.queue(function(){e.from(this.element()[s]())},function(n){return this.element()[s](e.at(n)),e.done()}),this._rememberMorpher(s,e),this},_queueNumber(s,t){return this._queueObject(s,new v(t))},cx(s){return this._queueNumber("cx",s)},cy(s){return this._queueNumber("cy",s)},move(s,t){return this.x(s).y(t)},center(s,t){return this.cx(s).cy(t)},size(s,t){let e;return(!s||!t)&&(e=this._element.bbox()),s||(s=e.width/e.height*t),t||(t=e.height/e.width*s),this.width(s).height(t)},width(s){return this._queueNumber("width",s)},height(s){return this._queueNumber("height",s)},plot(s,t,e,n){if(arguments.length===4)return this.plot([s,t,e,n]);if(this._tryRetarget("plot",s))return this;const i=new _t(this._stepper).type(this._element.MorphArray).to(s);return this.queue(function(){i.from(this._element.array())},function(r){return this._element.plot(i.at(r)),i.done()}),this._rememberMorpher("plot",i),this},leading(s){return this._queueNumber("leading",s)},viewbox(s,t,e,n){return this._queueObject("viewbox",new V(s,t,e,n))},update(s){return typeof s!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",s.offset),this)}});T(K,{rx:sn,ry:rn,from:ls,to:cs});M(K,"Runner");class ln extends W{constructor(t,e=t){super(P("svg",t),e),this.namespace()}defs(){return this.isRoot()?et(this.node.querySelector("defs"))||this.put(new nn):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof I.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Qe,version:"1.1"}).attr("xmlns:xlink",Jt,le).attr("xmlns:svgjs",Pi,le):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,le).attr("xmlns:svgjs",null,le)}root(){return this.isRoot()?this:super.root()}}E({Container:{nested:q(function(){return this.put(new ln)})}});M(ln,"Svg",!0);class cn extends W{constructor(t,e=t){super(P("symbol",t),e)}}E({Container:{symbol:q(function(){return this.put(new cn)})}});M(cn,"Symbol");function bo(s){return this._build===!1&&this.clear(),this.node.appendChild(I.document.createTextNode(s)),this}function vo(){return this.node.getComputedTextLength()}function xo(s,t=this.bbox()){return s==null?t.x:this.attr("x",this.attr("x")+s-t.x)}function So(s,t=this.bbox()){return s==null?t.y:this.attr("y",this.attr("y")+s-t.y)}function Eo(s,t,e=this.bbox()){return this.x(s,e).y(t,e)}function jo(s,t=this.bbox()){return s==null?t.cx:this.attr("x",this.attr("x")+s-t.cx)}function ko(s,t=this.bbox()){return s==null?t.cy:this.attr("y",this.attr("y")+s-t.cy)}function To(s,t,e=this.bbox()){return this.cx(s,e).cy(t,e)}function Mo(s){return this.attr("x",s)}function Io(s){return this.attr("y",s)}function No(s,t){return this.ax(s).ay(t)}function Ro(s){return this._build=!!s,this}var gs={__proto__:null,plain:bo,length:vo,x:xo,y:So,move:Eo,cx:jo,cy:ko,center:To,ax:Mo,ay:Io,amove:No,build:Ro};class it extends tt{constructor(t,e=t){super(P("text",t),e),this.dom.leading=new v(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new v(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const e=this;let n=0;const i=this.dom.leading;this.each(function(r){const o=I.window.getComputedStyle(this.node).getPropertyValue("font-size"),h=i*new v(o);this.dom.newLined&&(this.attr("x",e.attr("x")),this.text()===`
`?n+=h:(this.attr("dy",r?h+n:0),n=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new v(t.leading||1.3),this}text(t){if(t===void 0){const e=this.node.childNodes;let n=0;t="";for(let i=0,r=e.length;i<r;++i){if(e[i].nodeName==="textPath"){i===0&&(n=1);continue}i!==n&&e[i].nodeType!==3&&et(e[i]).dom.newLined===!0&&(t+=`
`),t+=e[i].textContent}return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else{t=(t+"").split(`
`);for(let e=0,n=t.length;e<n;e++)this.newLine(t[e])}return this.build(!1).rebuild()}}T(it,gs);E({Container:{text:q(function(s=""){return this.put(new it).text(s)}),plain:q(function(s=""){return this.put(new it).plain(s)})}});M(it,"Text");class Ee extends tt{constructor(t,e=t){super(P("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof it))return this;const e=t.index(this),n=I.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=t.dom.leading*new v(n);return this.dy(e?i:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}T(Ee,gs);E({Tspan:{tspan:q(function(s=""){const t=new Ee;return this._build||this.clear(),this.put(t).text(s)})},Text:{newLine:function(s=""){return this.tspan(s).newLine()}}});M(Ee,"Tspan");class an extends tt{constructor(t,e=t){super(P("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new v(t).divide(2))}}T(an,{x:ns,y:ss,cx:is,cy:rs,width:os,height:hs});E({Container:{circle:q(function(s=0){return this.put(new an).size(s).move(0,0)})}});M(an,"Circle");class Be extends W{constructor(t,e=t){super(P("clipPath",t),e)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return Lt('svg [clip-path*="'+this.id()+'"]')}}E({Container:{clip:q(function(){return this.defs().put(new Be)})},Element:{clipper(){return this.reference("clip-path")},clipWith(s){const t=s instanceof Be?s:this.parent().clip().add(s);return this.attr("clip-path",'url("#'+t.id()+'")')},unclip(){return this.attr("clip-path",null)}}});M(Be,"ClipPath");class ws extends ot{constructor(t,e=t){super(P("foreignObject",t),e)}}E({Container:{foreignObject:q(function(s,t){return this.put(new ws).size(s,t)})}});M(ws,"ForeignObject");function Oo(s,t){return this.children().forEach((e,n)=>{let i;try{i=e.bbox()}catch{return}const r=new _(e),o=r.translate(s,t).transform(r.inverse()),h=new L(i.x,i.y).transform(o);e.move(h.x,h.y)}),this}function Co(s){return this.dmove(s,0)}function zo(s){return this.dmove(0,s)}function Do(s,t=this.bbox()){return s==null?t.height:this.size(t.width,s,t)}function qo(s=0,t=0,e=this.bbox()){const n=s-e.x,i=t-e.y;return this.dmove(n,i)}function Po(s,t,e=this.bbox()){const n=$t(this,s,t,e),i=n.width/e.width,r=n.height/e.height;return this.children().forEach((o,h)=>{const u=new L(e).transform(new _(o).inverse());o.scale(i,r,u.x,u.y)}),this}function Fo(s,t=this.bbox()){return s==null?t.width:this.size(s,t.height,t)}function $o(s,t=this.bbox()){return s==null?t.x:this.move(s,t.y,t)}function Lo(s,t=this.bbox()){return s==null?t.y:this.move(t.x,s,t)}var ys={__proto__:null,dmove:Oo,dx:Co,dy:zo,height:Do,move:qo,size:Po,width:Fo,x:$o,y:Lo};class fn extends W{constructor(t,e=t){super(P("g",t),e)}}T(fn,ys);E({Container:{group:q(function(){return this.put(new fn)})}});M(fn,"G");class ge extends W{constructor(t,e=t){super(P("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Jt)}}T(ge,ys);E({Container:{link:q(function(s){return this.put(new ge).to(s)})},Element:{unlink(){const s=this.linker();if(!s)return this;const t=s.parent();if(!t)return this.remove();const e=t.index(s);return t.add(this,e),s.remove(),this},linkTo(s){let t=this.linker();return t||(t=new ge,this.wrap(t)),typeof s=="function"?s.call(t,t):t.to(s),this},linker(){const s=this.parent();return s&&s.node.nodeName.toLowerCase()==="a"?s:null}}});M(ge,"A");class Ve extends W{constructor(t,e=t){super(P("mask",t),e)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return Lt('svg [mask*="'+this.id()+'"]')}}E({Container:{mask:q(function(){return this.defs().put(new Ve)})},Element:{masker(){return this.reference("mask")},maskWith(s){const t=s instanceof Ve?s:this.parent().mask().add(s);return this.attr("mask",'url("#'+t.id()+'")')},unmask(){return this.attr("mask",null)}}});M(Ve,"Mask");class _s extends ot{constructor(t,e=t){super(P("stop",t),e)}update(t){return(typeof t=="number"||t instanceof v)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new v(t.offset)),this}}E({Gradient:{stop:function(s,t,e){return this.put(new _s).update(s,t,e)}}});M(_s,"Stop");function Go(s,t){if(!s)return"";if(!t)return s;let e=s+"{";for(const n in t)e+=Di(n)+":"+t[n]+";";return e+="}",e}class Ye extends ot{constructor(t,e=t){super(P("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(Go(t,e))}}E("Dom",{style(s,t){return this.put(new Ye).rule(s,t)},fontface(s,t,e){return this.put(new Ye).font(s,t,e)}});M(Ye,"Style");class pn extends it{constructor(t,e=t){super(P("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let n=null;return e&&(n=e.plot(t)),t==null?n:this}track(){return this.reference("href")}}E({Container:{textPath:q(function(s,t){return s instanceof it||(s=this.text(s)),s.path(t)})},Text:{path:q(function(s,t=!0){const e=new pn;s instanceof Gt||(s=this.defs().path(s)),e.attr("href","#"+s,Jt);let n;if(t)for(;n=this.node.firstChild;)e.node.appendChild(n);return this.put(e)}),textPath(){return this.findOne("textPath")}},Path:{text:q(function(s){return s instanceof it||(s=new it().addTo(this.parent()).text(s)),s.path(this)}),targets(){return Lt("svg textPath").filter(s=>(s.attr("href")||"").includes(this.id()))}}});pn.prototype.MorphArray=jt;M(pn,"TextPath");class bs extends tt{constructor(t,e=t){super(P("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,Jt)}}E({Container:{use:q(function(s,t){return this.put(new bs).use(s,t)})}});M(bs,"Use");const Bo=H;T([ln,cn,xe,Ut,pe],U("viewbox"));T([Wt,ee,te,Gt],U("marker"));T(it,U("Text"));T(Gt,U("Path"));T(nn,U("Defs"));T([it,Ee],U("Tspan"));T([Se,ve,Zt,K],U("radius"));T(Qt,U("EventTarget"));T(gt,U("Dom"));T(ot,U("Element"));T(tt,U("Shape"));T([W,us],U("Container"));T(Zt,U("Gradient"));T(K,U("Runner"));Et.extend(Ci());ho([v,O,V,_,Ft,wt,jt,L]);uo();class Vo{constructor(t){It(this,"n");It(this,"real_locations");It(this,"proj_locations");It(this,"transform");It(this,"up_to_date");this.n=t,this.real_locations=b.zeros(t,3),this.proj_locations=b.zeros(t,3),this.transform=b.identity(4,4);let e=.2;this.fov=2*Math.atan(.5/e),this.transform.set(2,3,e)}real_matrix(){return this.real_locations.clone()}reset_real_cols(t,e,n){this.real_locations.setColumn(0,t),this.real_locations.setColumn(1,e),this.real_locations.setColumn(2,n),this.up_to_date=!1}set_positions(t){if(t.rows!==this.n)throw new Error("Wrong number of vertices to construct projective view");this.real_locations=t,this.up_to_date=!1}set_real(t){if(t.length!==this.n)throw new Error("Wrong number of vertices to construct projective view");for(let e=0;e<this.n;e++)this.real_locations.setRow(e,t[e]);this.up_to_date=!1}recompute_proj(){for(let t=0;t<this.n;t++){let e=this.transform.mmul(b.from1DArray(4,1,[...this.real_locations.getRow(t),1])),n=e.norm(),[i,r,o,h]=e.getColumn(0),[u,l,c]=[i/h,r/h,o/h],a=[u/c,l/c,n];this.proj_locations.setRow(t,a)}this.up_to_date=!0}at(t){return this.up_to_date||this.recompute_proj(),this.proj_locations.getRow(t)}}function Yo(s){let t,e,n,i,r,o,h,u;return{c(){t=F("div"),e=lt(),n=F("div"),i=F("input"),r=bt(`
    (Play)

    `),o=F("input"),G(t,"class","graph-display-container svelte-16unbvd"),G(i,"type","range"),G(i,"min","0"),G(i,"max","100"),G(i,"class","slider svelte-16unbvd"),G(o,"type","checkbox"),G(n,"class","controls svelte-16unbvd")},m(l,c){Q(l,t,c),s[6](t),Q(l,e,c),Q(l,n,c),D(n,i),yn(i,s[1]),D(n,r),D(n,o),o.checked=s[0],h||(u=[pt(i,"change",s[7]),pt(i,"input",s[7]),pt(o,"change",s[8])],h=!0)},p(l,[c]){c&2&&yn(i,l[1]),c&1&&(o.checked=l[0])},i:Y,o:Y,d(l){l&&X(t),s[6](null),l&&X(e),l&&X(n),h=!1,kt(u)}}}function Ho(s,t,e){let{DisplayGraph:n}=t,{Interpolate:i=null}=t,{playing:r=!0}=t,o=0,h,u,l=new Vo(n.nv);l.set_positions(n.positions);let c=l.real_matrix(),a=[],p=[],m=!1,g=setInterval(()=>{r&&e(1,o=(o+.5)%100)},32);Ys(()=>{u=Bo().addTo(h).size("100%","100%"),u.viewbox("-1 -1 2 2"),f()}),Hs(()=>{clearInterval(g)});function f(){let j=n;for(let C=0;C<j.nv;C++){let[x,z,B]=l.at(C);a.push(u.circle().attr({cx:x,cy:z,fill:"#000",r:.02}))}for(let[C,x]of j.edges){let[z,B,rt]=l.at(C),[ft,ht,Tt]=l.at(x);p.push(u.line().plot(z,B,ft,ht).stroke({width:.01,color:"#000000"}))}e(5,m=!0)}function d(){let j=n;for(let x=0;x<j.nv;x++){let[z,B,rt]=l.at(x);a[x].attr({cx:z,cy:B})}let C=0;for(let[x,z]of j.edges){let[B,rt,ft]=l.at(x),[ht,Tt,ne]=l.at(z);p[C].plot(B,rt,ht,Tt),C++}}let w;try{w=Nn(i===null?{spec:"noop"}:i)}catch(j){console.error(j),w=Nn({spec:"noop"})}function y(j){let C=w(c.getColumnVector(0),j);l.reset_real_cols(C,w(c.getColumnVector(1),j),w(c.getColumnVector(2),j)),d()}function S(j){Pt[j?"unshift":"push"](()=>{h=j,e(2,h)})}function N(){o=Gs(this.value),e(1,o)}function $(){r=this.checked,e(0,r)}return s.$$set=j=>{"DisplayGraph"in j&&e(3,n=j.DisplayGraph),"Interpolate"in j&&e(4,i=j.Interpolate),"playing"in j&&e(0,r=j.playing)},s.$$.update=()=>{s.$$.dirty&34&&m&&y(o/100)},[r,o,h,n,i,m,S,N,$]}class vs extends Ae{constructor(t){super(),We(this,t,Ho,Yo,we,{DisplayGraph:3,Interpolate:4,playing:0})}}function Xo(s){return{c:Y,m:Y,p:Y,i:Y,o:Y,d:Y}}function Uo(s){let t=[s[1],s[0]],e,n,i=Fn(s);return{c(){i.c(),e=Ls()},m(r,o){i.m(r,o),Q(r,e,o),n=!0},p(r,o){o&3&&we(t,t=[r[1],r[0]])?(Gn(),St(i,1,1,Y),Bn(),i=Fn(r),i.c(),mt(i,1),i.m(e.parentNode,e)):i.p(r,o)},i(r){n||(mt(i),n=!0)},o(r){St(i),n=!1},d(r){r&&X(e),i.d(r)}}}function Fn(s){let t,e;return t=new vs({props:{DisplayGraph:s[1],Interpolate:s[0]}}),{c(){Ue(t.$$.fragment)},m(n,i){ye(t,n,i),e=!0},p(n,i){const r={};i&2&&(r.DisplayGraph=n[1]),i&1&&(r.Interpolate=n[0]),t.$set(r)},i(n){e||(mt(t.$$.fragment,n),e=!0)},o(n){St(t.$$.fragment,n),e=!1},d(n){_e(t,n)}}}function Wo(s){let t,e,n;return e=new vs({props:{DisplayGraph:Ii()}}),{c(){t=F("div"),Ue(e.$$.fragment),G(t,"class","graph-display")},m(i,r){Q(i,t,r),ye(e,t,null),n=!0},p:Y,i(i){n||(mt(e.$$.fragment,i),n=!0)},o(i){St(e.$$.fragment,i),n=!1},d(i){i&&X(t),_e(e)}}}function Ao(s){let t,e,n,i,r,o,h,u,l,c,a,p,m,g={ctx:s,current:null,token:null,hasCatch:!1,pending:Wo,then:Uo,catch:Xo,blocks:[,,,]};As(s[2],g);function f(y){s[3](y)}function d(y){s[4](y)}let w={};return s[1]!==void 0&&(w.InGraph=s[1]),s[0]!==void 0&&(w.InTerpolate=s[0]),u=new Oi({props:w}),Pt.push(()=>xn(u,"InGraph",f)),Pt.push(()=>xn(u,"InTerpolate",d)),{c(){t=F("main"),e=F("div"),g.block.c(),n=lt(),i=F("div"),r=F("h2"),r.textContent="Graph automorphism animator",o=lt(),h=F("div"),Ue(u.$$.fragment),a=lt(),p=F("p"),p.textContent="~2022",G(e,"class","left svelte-3td635"),G(h,"class","graph-input"),G(p,"class","read-the-docs svelte-3td635"),G(i,"class","right svelte-3td635"),G(t,"class","svelte-3td635")},m(y,S){Q(y,t,S),D(t,e),g.block.m(e,g.anchor=null),g.mount=()=>e,g.anchor=null,D(t,n),D(t,i),D(i,r),D(i,o),D(i,h),ye(u,h,null),D(i,a),D(i,p),m=!0},p(y,[S]){s=y,Js(g,s,S);const N={};!l&&S&2&&(l=!0,N.InGraph=s[1],vn(()=>l=!1)),!c&&S&1&&(c=!0,N.InTerpolate=s[0],vn(()=>c=!1)),u.$set(N)},i(y){m||(mt(g.block),mt(u.$$.fragment,y),m=!0)},o(y){for(let S=0;S<3;S+=1){const N=g.blocks[S];St(N)}St(u.$$.fragment,y),m=!1},d(y){y&&X(t),g.block.d(),g.token=null,g=null,_e(u)}}}async function Re(s){return await(await fetch(s)).json()}function Jo(s,t,e){let n,i,r=(async()=>{let u=await Re("data/embed-6.json");e(1,i={nv:u.positions[0].length,positions:new b(u.positions).transpose(),edges:u.edges.map(c=>[c[0]-1,c[1]-1])});let l={spec:"linear",permutation:await Re("data/perm-seq-xi.json")};await Re("data/atr-seq-gamma.json"),i.nv,e(0,n=l),console.log("Graph promise loaded")})();function o(u){i=u,e(1,i)}function h(u){n=u,e(0,n)}return[n,i,r,o,h]}class Qo extends Ae{constructor(t){super(),We(this,t,Jo,Ao,we,{})}}new Qo({target:document.getElementById("app")});

var qs=Object.defineProperty;var Ds=(s,t,e)=>t in s?qs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var A=(s,t,e)=>(Ds(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function J(){}function Fs(s){return s&&typeof s=="object"&&typeof s.then=="function"}function Ln(s){return s()}function yn(){return Object.create(null)}function Rt(s){s.forEach(Ln)}function Gn(s){return typeof s=="function"}function ye(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function Ls(s){return Object.keys(s).length===0}function _n(s){return s==null?"":s}function q(s,t){s.appendChild(t)}function et(s,t,e){s.insertBefore(t,e||null)}function Q(s){s.parentNode&&s.parentNode.removeChild(s)}function $(s){return document.createElement(s)}function Et(s){return document.createTextNode(s)}function pt(){return Et(" ")}function Gs(){return Et("")}function rt(s,t,e,n){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e,n)}function Y(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}function $s(s){return s===""?null:+s}function Bs(s){return Array.from(s.childNodes)}function gt(s,t){s.value=t==null?"":t}function bn(s,t,e,n){e===null?s.style.removeProperty(t):s.style.setProperty(t,e,n?"important":"")}function xn(s,t){for(let e=0;e<s.options.length;e+=1){const n=s.options[e];if(n.__value===t){n.selected=!0;return}}s.selectedIndex=-1}function Ys(s){const t=s.querySelector(":checked")||s.options[0];return t&&t.__value}let At;function mt(s){At=s}function Ue(){if(!At)throw new Error("Function called outside component initialization");return At}function Vs(s){Ue().$$.on_mount.push(s)}function Xs(s){Ue().$$.on_destroy.push(s)}const Ht=[],Tt=[],ae=[],ze=[],Hs=Promise.resolve();let Pe=!1;function Us(){Pe||(Pe=!0,Hs.then(Ae))}function pe(s){ae.push(s)}function vn(s){ze.push(s)}const je=new Set;let re=0;function Ae(){const s=At;do{for(;re<Ht.length;){const t=Ht[re];re++,mt(t),As(t.$$)}for(mt(null),Ht.length=0,re=0;Tt.length;)Tt.pop()();for(let t=0;t<ae.length;t+=1){const e=ae[t];je.has(e)||(je.add(e),e())}ae.length=0}while(Ht.length);for(;ze.length;)ze.pop()();Pe=!1,je.clear(),mt(s)}function As(s){if(s.fragment!==null){s.update(),Rt(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(pe)}}const fe=new Set;let kt;function $n(){kt={r:0,c:[],p:kt}}function Bn(){kt.r||Rt(kt.c),kt=kt.p}function yt(s,t){s&&s.i&&(fe.delete(s),s.i(t))}function Mt(s,t,e,n){if(s&&s.o){if(fe.has(s))return;fe.add(s),kt.c.push(()=>{fe.delete(s),n&&(e&&s.d(1),n())}),s.o(t)}else n&&n()}function Js(s,t){const e=t.token={};function n(i,r,o,h){if(t.token!==e)return;t.resolved=h;let u=t.ctx;o!==void 0&&(u=u.slice(),u[o]=h);const l=i&&(t.current=i)(u);let c=!1;t.block&&(t.blocks?t.blocks.forEach((a,f)=>{f!==r&&a&&($n(),Mt(a,1,1,()=>{t.blocks[f]===a&&(t.blocks[f]=null)}),Bn())}):t.block.d(1),l.c(),yt(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[r]=l),c&&Ae()}if(Fs(s)){const i=Ue();if(s.then(r=>{mt(i),n(t.then,1,t.value,r),mt(null)},r=>{if(mt(i),n(t.catch,2,t.error,r),mt(null),!t.hasCatch)throw r}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,s),!0;t.resolved=s}}function Ws(s,t,e){const n=t.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,e)}function Sn(s,t,e){const n=s.$$.props[t];n!==void 0&&(s.$$.bound[n]=e,e(s.$$.ctx[n]))}function Je(s){s&&s.c()}function _e(s,t,e,n){const{fragment:i,after_update:r}=s.$$;i&&i.m(t,e),n||pe(()=>{const o=s.$$.on_mount.map(Ln).filter(Gn);s.$$.on_destroy?s.$$.on_destroy.push(...o):Rt(o),s.$$.on_mount=[]}),r.forEach(pe)}function be(s,t){const e=s.$$;e.fragment!==null&&(Rt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Qs(s,t){s.$$.dirty[0]===-1&&(Ht.push(s),Us(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function We(s,t,e,n,i,r,o,h=[-1]){const u=At;mt(s);const l=s.$$={fragment:null,ctx:[],props:r,update:J,not_equal:i,bound:yn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:yn(),dirty:h,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=e?e(s,t.props||{},(a,f,...p)=>{const m=p.length?p[0]:f;return l.ctx&&i(l.ctx[a],l.ctx[a]=m)&&(!l.skip_bound&&l.bound[a]&&l.bound[a](m),c&&Qs(s,a)),f}):[],l.update(),c=!0,Rt(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const a=Bs(t.target);l.fragment&&l.fragment.l(a),a.forEach(Q)}else l.fragment&&l.fragment.c();t.intro&&yt(s.$$.fragment),_e(s,t.target,t.anchor,t.customElement),Ae()}mt(u)}class Qe{$destroy(){be(this,1),this.$destroy=J}$on(t,e){if(!Gn(e))return J;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ls(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zs=Object.prototype.toString;function nt(s){return Zs.call(s).endsWith("Array]")}function Ks(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!nt(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,r=i===void 0?s.length:i;if(n<0||n>=s.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>s.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=s[n],h=n+1;h<r;h++)s[h]>o&&(o=s[h]);return o}function ti(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!nt(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,r=i===void 0?s.length:i;if(n<0||n>=s.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>s.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=s[n],h=n+1;h<r;h++)s[h]<o&&(o=s[h]);return o}function En(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nt(s)){if(s.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!nt(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(s.length);var n=ti(s),i=Ks(s);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var r=t.min,o=r===void 0?t.autoMinMax?n:0:r,h=t.max,u=h===void 0?t.autoMinMax?i:1:h;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-o)/(i-n),c=0;c<s.length;c++)e[c]=(s[c]-n)*l+o;return e}const oe=" ".repeat(2),Yn=" ".repeat(4);function ei(){return Vn(this)}function Vn(s,t={}){const{maxRows:e=15,maxColumns:n=10,maxNumSize:i=8,padMinus:r="auto"}=t;return`${s.constructor.name} {
${oe}[
${Yn}${ni(s,e,n,i,r)}
${oe}]
${oe}rows: ${s.rows}
${oe}columns: ${s.columns}
}`}function ni(s,t,e,n,i){const{rows:r,columns:o}=s,h=Math.min(r,t),u=Math.min(o,e),l=[];if(i==="auto"){i=!1;t:for(let c=0;c<h;c++)for(let a=0;a<u;a++)if(s.get(c,a)<0){i=!0;break t}}for(let c=0;c<h;c++){let a=[];for(let f=0;f<u;f++)a.push(si(s.get(c,f),n,i));l.push(`${a.join(" ")}`)}return u!==o&&(l[l.length-1]+=` ... ${o-e} more columns`),h!==r&&l.push(`... ${r-t} more rows`),l.join(`
${Yn}`)}function si(s,t,e){return(s>=0&&e?` ${kn(s,t-1)}`:kn(s,t)).padEnd(t)}function kn(s,t){let e=s.toString();if(e.length<=t)return e;let n=s.toFixed(t);if(n.length>t&&(n=s.toFixed(Math.max(0,t-(n.length-t)))),n.length<=t&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let i=s.toExponential(t);return i.length>t&&(i=s.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function ii(s,t){s.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},s.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n);return this},s.prototype.addM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n.get(i,r));return this},s.add=function(n,i){return new t(n).add(i)},s.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},s.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n);return this},s.prototype.subM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n.get(i,r));return this},s.sub=function(n,i){return new t(n).sub(i)},s.prototype.subtract=s.prototype.sub,s.prototype.subtractS=s.prototype.subS,s.prototype.subtractM=s.prototype.subM,s.subtract=s.sub,s.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},s.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n);return this},s.prototype.mulM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n.get(i,r));return this},s.mul=function(n,i){return new t(n).mul(i)},s.prototype.multiply=s.prototype.mul,s.prototype.multiplyS=s.prototype.mulS,s.prototype.multiplyM=s.prototype.mulM,s.multiply=s.mul,s.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},s.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n);return this},s.prototype.divM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n.get(i,r));return this},s.div=function(n,i){return new t(n).div(i)},s.prototype.divide=s.prototype.div,s.prototype.divideS=s.prototype.divS,s.prototype.divideM=s.prototype.divM,s.divide=s.div,s.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},s.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)%n);return this},s.prototype.modM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)%n.get(i,r));return this},s.mod=function(n,i){return new t(n).mod(i)},s.prototype.modulus=s.prototype.mod,s.prototype.modulusS=s.prototype.modS,s.prototype.modulusM=s.prototype.modM,s.modulus=s.mod,s.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},s.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)&n);return this},s.prototype.andM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)&n.get(i,r));return this},s.and=function(n,i){return new t(n).and(i)},s.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},s.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)|n);return this},s.prototype.orM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)|n.get(i,r));return this},s.or=function(n,i){return new t(n).or(i)},s.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},s.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)^n);return this},s.prototype.xorM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)^n.get(i,r));return this},s.xor=function(n,i){return new t(n).xor(i)},s.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},s.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)<<n);return this},s.prototype.leftShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)<<n.get(i,r));return this},s.leftShift=function(n,i){return new t(n).leftShift(i)},s.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},s.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>n);return this},s.prototype.signPropagatingRightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>n.get(i,r));return this},s.signPropagatingRightShift=function(n,i){return new t(n).signPropagatingRightShift(i)},s.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},s.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>>n);return this},s.prototype.rightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)>>>n.get(i,r));return this},s.rightShift=function(n,i){return new t(n).rightShift(i)},s.prototype.zeroFillRightShift=s.prototype.rightShift,s.prototype.zeroFillRightShiftS=s.prototype.rightShiftS,s.prototype.zeroFillRightShiftM=s.prototype.rightShiftM,s.zeroFillRightShift=s.rightShift,s.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},s.not=function(n){return new t(n).not()},s.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},s.abs=function(n){return new t(n).abs()},s.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},s.acos=function(n){return new t(n).acos()},s.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},s.acosh=function(n){return new t(n).acosh()},s.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},s.asin=function(n){return new t(n).asin()},s.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},s.asinh=function(n){return new t(n).asinh()},s.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},s.atan=function(n){return new t(n).atan()},s.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},s.atanh=function(n){return new t(n).atanh()},s.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},s.cbrt=function(n){return new t(n).cbrt()},s.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},s.ceil=function(n){return new t(n).ceil()},s.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},s.clz32=function(n){return new t(n).clz32()},s.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},s.cos=function(n){return new t(n).cos()},s.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},s.cosh=function(n){return new t(n).cosh()},s.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},s.exp=function(n){return new t(n).exp()},s.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},s.expm1=function(n){return new t(n).expm1()},s.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},s.floor=function(n){return new t(n).floor()},s.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},s.fround=function(n){return new t(n).fround()},s.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},s.log=function(n){return new t(n).log()},s.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},s.log1p=function(n){return new t(n).log1p()},s.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},s.log10=function(n){return new t(n).log10()},s.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},s.log2=function(n){return new t(n).log2()},s.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},s.round=function(n){return new t(n).round()},s.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},s.sign=function(n){return new t(n).sign()},s.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},s.sin=function(n){return new t(n).sin()},s.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},s.sinh=function(n){return new t(n).sinh()},s.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},s.sqrt=function(n){return new t(n).sqrt()},s.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},s.tan=function(n){return new t(n).tan()},s.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},s.tanh=function(n){return new t(n).tanh()},s.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},s.trunc=function(n){return new t(n).trunc()},s.pow=function(n,i){return new t(n).pow(i)},s.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},s.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.pow(this.get(i,r),n));return this},s.prototype.powM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.pow(this.get(i,r),n.get(i,r)));return this}}function ht(s,t,e){let n=e?s.rows:s.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function ut(s,t,e){let n=e?s.columns:s.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function Dt(s,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==s.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Ft(s,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==s.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function ri(s,t){if(!nt(t))throw new TypeError("row indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=s.rows)throw new RangeError("row indices are out of range")}function oi(s,t){if(!nt(t))throw new TypeError("column indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=s.columns)throw new RangeError("column indices are out of range")}function jn(s,t,e,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(he("startRow",t),he("endRow",e),he("startColumn",n),he("endColumn",i),t>e||n>i||t<0||t>=s.rows||e<0||e>=s.rows||n<0||n>=s.columns||i<0||i>=s.columns)throw new RangeError("Submatrix indices are out of range")}function xe(s,t=0){let e=[];for(let n=0;n<s;n++)e.push(t);return e}function he(s,t){if(typeof t!="number")throw new TypeError(`${s} must be a number`)}function zt(s){if(s.isEmpty())throw new Error("Empty matrix has no elements to index")}function hi(s){let t=xe(s.rows);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[e]+=s.get(e,n);return t}function ui(s){let t=xe(s.columns);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[n]+=s.get(e,n);return t}function li(s){let t=0;for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)t+=s.get(e,n);return t}function ci(s){let t=xe(s.rows,1);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[e]*=s.get(e,n);return t}function ai(s){let t=xe(s.columns,1);for(let e=0;e<s.rows;++e)for(let n=0;n<s.columns;++n)t[n]*=s.get(e,n);return t}function fi(s){let t=1;for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)t*=s.get(e,n);return t}function pi(s,t,e){const n=s.rows,i=s.columns,r=[];for(let o=0;o<n;o++){let h=0,u=0,l=0;for(let c=0;c<i;c++)l=s.get(o,c)-e[o],h+=l,u+=l*l;t?r.push((u-h*h/i)/(i-1)):r.push((u-h*h/i)/i)}return r}function mi(s,t,e){const n=s.rows,i=s.columns,r=[];for(let o=0;o<i;o++){let h=0,u=0,l=0;for(let c=0;c<n;c++)l=s.get(c,o)-e[o],h+=l,u+=l*l;t?r.push((u-h*h/n)/(n-1)):r.push((u-h*h/n)/n)}return r}function di(s,t,e){const n=s.rows,i=s.columns,r=n*i;let o=0,h=0,u=0;for(let l=0;l<n;l++)for(let c=0;c<i;c++)u=s.get(l,c)-e,o+=u,h+=u*u;return t?(h-o*o/r)/(r-1):(h-o*o/r)/r}function gi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t[e])}function wi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t[n])}function yi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)-t)}function _i(s){const t=[];for(let e=0;e<s.rows;e++){let n=0;for(let i=0;i<s.columns;i++)n+=Math.pow(s.get(e,i),2)/(s.columns-1);t.push(Math.sqrt(n))}return t}function bi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t[e])}function xi(s){const t=[];for(let e=0;e<s.columns;e++){let n=0;for(let i=0;i<s.rows;i++)n+=Math.pow(s.get(i,e),2)/(s.rows-1);t.push(Math.sqrt(n))}return t}function vi(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t[n])}function Si(s){const t=s.size-1;let e=0;for(let n=0;n<s.columns;n++)for(let i=0;i<s.rows;i++)e+=Math.pow(s.get(i,n),2)/t;return Math.sqrt(e)}function Ei(s,t){for(let e=0;e<s.rows;e++)for(let n=0;n<s.columns;n++)s.set(e,n,s.get(e,n)/t)}class M{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new x(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)r.set(o,h,n[o*e+h]);return r}static rowVector(t){let e=new x(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new x(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new x(t,e)}static ones(t,e){return new x(t,e).fill(1)}static rand(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let r=new x(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)r.set(o,h,i());return r}static randInt(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:r=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(r))throw new TypeError("max must be an integer");if(i>=r)throw new RangeError("min must be smaller than max");let h=r-i,u=new x(t,e);for(let l=0;l<t;l++)for(let c=0;c<e;c++){let a=i+Math.round(o()*h);u.set(l,c,a)}return u}static eye(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);let i=Math.min(t,e),r=this.zeros(t,e);for(let o=0;o<i;o++)r.set(o,o,n);return r}static diag(t,e,n){let i=t.length;e===void 0&&(e=i),n===void 0&&(n=e);let r=Math.min(i,e,n),o=this.zeros(e,n);for(let h=0;h<r;h++)o.set(h,h,t[h]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new x(n,i);for(let o=0;o<n;o++)for(let h=0;h<i;h++)r.set(o,h,Math.min(t.get(o,h),e.get(o,h)));return r}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new this(n,i);for(let o=0;o<n;o++)for(let h=0;h<i;h++)r.set(o,h,Math.max(t.get(o,h),e.get(o,h)));return r}static checkMatrix(t){return M.isMatrix(t)?t:new x(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&r===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(r=!0,n=e):(i=!1,r=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&r===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(r=!0,n=e):(i=!1,r=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let i=e;for(let r=e;r<t.rows;r++)t.get(r,n)>t.get(i,n)&&(i=r);if(t.get(i,n)===0)n++;else{t.swapRows(e,i);let r=t.get(e,n);for(let o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/r);for(let o=e+1;o<t.rows;o++){let h=t.get(o,n)/t.get(e,n);t.set(o,n,0);for(let u=n+1;u<t.columns;u++)t.set(o,u,t.get(o,u)-t.get(e,u)*h)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,i=n-1;for(;i>=0;)if(t.maxRow(i)===0)i--;else{let r=0,o=!1;for(;r<n&&o===!1;)t.get(i,r)===1?o=!0:r++;for(let h=0;h<i;h++){let u=t.get(h,r);for(let l=r;l<e;l++){let c=t.get(h,l)-u*t.get(i,l);t.set(h,l,c)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new x(this.rows*e,this.columns*n);for(let r=0;r<e;r++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*r,this.columns*o);return i}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){ht(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return x.rowVector(this.getRow(t))}setRow(t,e){ht(this,t),e=Dt(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){ht(this,t),ht(this,e);for(let n=0;n<this.columns;n++){let i=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,i)}return this}getColumn(t){ut(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return x.columnVector(this.getColumn(t))}setColumn(t,e){ut(this,t),e=Ft(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){ut(this,t),ut(this,e);for(let n=0;n<this.rows;n++){let i=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,i)}return this}addRowVector(t){t=Dt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=Dt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=Dt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=Dt(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=Ft(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=Ft(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=Ft(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=Ft(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){ht(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){ut(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e[n]&&(e[n]=this.get(n,i));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e[i]&&(e[i]=this.get(n,i));return e}case void 0:{let e=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i));return e}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){zt(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e[n]&&(e[n]=this.get(n,i));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e[i]&&(e[i]=this.get(n,i));return e}case void 0:{let e=this.get(0,0);for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i));return e}default:throw new Error(`invalid option: ${t}`)}}minIndex(){zt(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}maxRow(t){if(ht(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){ht(this,t),zt(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),n[1]=i);return n}minRow(t){if(ht(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){ht(this,t),zt(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),n[1]=i);return n}maxColumn(t){if(ut(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){ut(this,t),zt(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),n[0]=i);return n}minColumn(t){if(ut(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){ut(this,t),zt(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),n[0]=i);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if(t==="max")return this.max();if(t==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)e=e+this.get(n,i)*this.get(n,i);return Math.sqrt(e)}else throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){M.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=x.checkMatrix(t);let e=this.rows,n=this.columns,i=t.columns,r=new x(e,i),o=new Float64Array(n);for(let h=0;h<i;h++){for(let u=0;u<n;u++)o[u]=t.get(u,h);for(let u=0;u<e;u++){let l=0;for(let c=0;c<n;c++)l+=this.get(u,c)*o[c];r.set(u,h,l)}}return r}strassen2x2(t){t=x.checkMatrix(t);let e=new x(2,2);const n=this.get(0,0),i=t.get(0,0),r=this.get(0,1),o=t.get(0,1),h=this.get(1,0),u=t.get(1,0),l=this.get(1,1),c=t.get(1,1),a=(n+l)*(i+c),f=(h+l)*i,p=n*(o-c),m=l*(u-i),d=(n+r)*c,g=(h-n)*(i+o),v=(r-l)*(u+c),S=a+m-d+v,k=p+d,T=f+m,L=a-f+p+g;return e.set(0,0,S),e.set(0,1,k),e.set(1,0,T),e.set(1,1,L),e}strassen3x3(t){t=x.checkMatrix(t);let e=new x(3,3);const n=this.get(0,0),i=this.get(0,1),r=this.get(0,2),o=this.get(1,0),h=this.get(1,1),u=this.get(1,2),l=this.get(2,0),c=this.get(2,1),a=this.get(2,2),f=t.get(0,0),p=t.get(0,1),m=t.get(0,2),d=t.get(1,0),g=t.get(1,1),v=t.get(1,2),S=t.get(2,0),k=t.get(2,1),T=t.get(2,2),L=(n+i+r-o-h-c-a)*g,b=(n-o)*(-p+g),N=h*(-f+p+d-g-v-S+T),y=(-n+o+h)*(f-p+g),w=(o+h)*(-f+p),P=n*f,G=(-n+l+c)*(f-m+v),V=(-n+l)*(m-v),U=(l+c)*(-f+m),ft=(n+i+r-h-u-l-c)*v,Ct=c*(-f+m+d-g-v-S+k),X=(-r+c+a)*(g+S-k),xt=(r-a)*(g-k),ct=r*S,Ot=(c+a)*(-S+k),tt=(-r+h+u)*(v+S-T),gn=(r-u)*(v-T),wn=(h+u)*(-S+T),vs=i*d,Ss=u*k,Es=o*m,ks=l*p,js=a*T,Ts=P+ct+vs,Ms=L+y+w+P+X+ct+Ot,Is=P+G+U+ft+ct+tt+wn,Ns=b+N+y+P+ct+tt+gn,Rs=b+y+w+P+Ss,Cs=ct+tt+gn+wn+Es,Os=P+G+V+Ct+X+xt+ct,zs=X+xt+ct+Ot+ks,Ps=P+G+V+U+js;return e.set(0,0,Ts),e.set(0,1,Ms),e.set(0,2,Is),e.set(1,0,Ns),e.set(1,1,Rs),e.set(1,2,Cs),e.set(2,0,Os),e.set(2,1,zs),e.set(2,2,Ps),e}mmulStrassen(t){t=x.checkMatrix(t);let e=this.clone(),n=e.rows,i=e.columns,r=t.rows,o=t.columns;i!==r&&console.warn(`Multiplying ${n} x ${i} and ${r} x ${o} matrix: dimensions do not match.`);function h(a,f,p){let m=a.rows,d=a.columns;if(m===f&&d===p)return a;{let g=M.zeros(f,p);return g=g.setSubMatrix(a,0,0),g}}let u=Math.max(n,r),l=Math.max(i,o);e=h(e,u,l),t=h(t,u,l);function c(a,f,p,m){if(p<=512||m<=512)return a.mmul(f);p%2===1&&m%2===1?(a=h(a,p+1,m+1),f=h(f,p+1,m+1)):p%2===1?(a=h(a,p+1,m),f=h(f,p+1,m)):m%2===1&&(a=h(a,p,m+1),f=h(f,p,m+1));let d=parseInt(a.rows/2,10),g=parseInt(a.columns/2,10),v=a.subMatrix(0,d-1,0,g-1),S=f.subMatrix(0,d-1,0,g-1),k=a.subMatrix(0,d-1,g,a.columns-1),T=f.subMatrix(0,d-1,g,f.columns-1),L=a.subMatrix(d,a.rows-1,0,g-1),b=f.subMatrix(d,f.rows-1,0,g-1),N=a.subMatrix(d,a.rows-1,g,a.columns-1),y=f.subMatrix(d,f.rows-1,g,f.columns-1),w=c(M.add(v,N),M.add(S,y),d,g),P=c(M.add(L,N),S,d,g),G=c(v,M.sub(T,y),d,g),V=c(N,M.sub(b,S),d,g),U=c(M.add(v,k),y,d,g),ft=c(M.sub(L,v),M.add(S,T),d,g),Ct=c(M.sub(k,N),M.add(b,y),d,g),X=M.add(w,V);X.sub(U),X.add(Ct);let xt=M.add(G,U),ct=M.add(P,V),Ot=M.sub(w,P);Ot.add(G),Ot.add(ft);let tt=M.zeros(2*X.rows,2*X.columns);return tt=tt.setSubMatrix(X,0,0),tt=tt.setSubMatrix(xt,X.rows,0),tt=tt.setSubMatrix(ct,0,X.columns),tt=tt.setSubMatrix(Ot,X.rows,X.columns),tt.subMatrix(0,p-1,0,m-1)}return c(e,t,u,l)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new x(this.rows,this.columns);for(let r=0;r<this.rows;r++){const o=this.getRow(r);o.length>0&&En(o,{min:e,max:n,output:o}),i.setRow(r,o)}return i}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new x(this.rows,this.columns);for(let r=0;r<this.columns;r++){const o=this.getColumn(r);o.length&&En(o,{min:e,max:n,output:o}),i.setColumn(r,o)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let i=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,i)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let i=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,i)}return this}kroneckerProduct(t){t=x.checkMatrix(t);let e=this.rows,n=this.columns,i=t.rows,r=t.columns,o=new x(e*i,n*r);for(let h=0;h<e;h++)for(let u=0;u<n;u++)for(let l=0;l<i;l++)for(let c=0;c<r;c++)o.set(i*h+l,r*u+c,this.get(h,u)*t.get(l,c));return o}kroneckerSum(t){if(t=x.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,i=this.kroneckerProduct(x.eye(n,n)),r=x.eye(e,e).kroneckerProduct(t);return i.add(r)}transpose(){let t=new x(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=Tn){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=Tn){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,i){jn(this,t,e,n,i);let r=new x(e-t+1,i-n+1);for(let o=t;o<=e;o++)for(let h=n;h<=i;h++)r.set(o-t,h-n,this.get(o,h));return r}subMatrixRow(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new x(t.length,n-e+1);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.rows)throw new RangeError(`Row index out of range: ${t[r]}`);i.set(r,o-e,this.get(t[r],o))}return i}subMatrixColumn(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new x(n-e+1,t.length);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.columns)throw new RangeError(`Column index out of range: ${t[r]}`);i.set(o-e,r,this.get(o,t[r]))}return i}setSubMatrix(t,e,n){if(t=x.checkMatrix(t),t.isEmpty())return this;let i=e+t.rows-1,r=n+t.columns-1;jn(this,e,i,n,r);for(let o=0;o<t.rows;o++)for(let h=0;h<t.columns;h++)this.set(e+o,n+h,t.get(o,h));return this}selection(t,e){ri(this,t),oi(this,e);let n=new x(t.length,e.length);for(let i=0;i<t.length;i++){let r=t[i];for(let o=0;o<e.length;o++){let h=e[o];n.set(i,o,this.get(r,h))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new x(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return hi(this);case"column":return ui(this);case void 0:return li(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return ci(this);case"column":return ai(this);case void 0:return fi(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":{for(let n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(let n=0;n<this.columns;n++)e[n]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!nt(i))throw new TypeError("mean must be an array");return pi(this,n,i)}case"column":{if(!nt(i))throw new TypeError("mean must be an array");return mi(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return di(this,n,i)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);const n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":{if(!nt(n))throw new TypeError("center must be an array");return gi(this,n),this}case"column":{if(!nt(n))throw new TypeError("center must be an array");return wi(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return yi(this,n),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":{if(n===void 0)n=_i(this);else if(!nt(n))throw new TypeError("scale must be an array");return bi(this,n),this}case"column":{if(n===void 0)n=xi(this);else if(!nt(n))throw new TypeError("scale must be an array");return vi(this,n),this}case void 0:{if(n===void 0)n=Si(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return Ei(this,n),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return Vn(this,t)}}M.prototype.klass="Matrix";typeof Symbol<"u"&&(M.prototype[Symbol.for("nodejs.util.inspect.custom")]=ei);function Tn(s,t){return s-t}function ki(s){return s.every(t=>typeof t=="number")}M.random=M.rand;M.randomInt=M.randInt;M.diagonal=M.diag;M.prototype.diagonal=M.prototype.diag;M.identity=M.eye;M.prototype.negate=M.prototype.neg;M.prototype.tensorProduct=M.prototype.kroneckerProduct;class x extends M{constructor(t,e){if(super(),x.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0)if(this.data=[],Number.isInteger(e)&&e>=0)for(let n=0;n<t;n++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(nt(t)){const n=t;if(t=n.length,e=t?n[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(n[i].length!==e)throw new RangeError("Inconsistent array dimensions");if(!ki(n[i]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return ht(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),ht(this,t,!0),e=Float64Array.from(Dt(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){ut(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let i=0;i<t;i++)n[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){typeof e>"u"&&(e=t,t=this.columns),ut(this,t,!0),e=Ft(this,e);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let r=0;for(;r<t;r++)i[r]=this.data[n][r];for(i[r++]=e[n];r<this.columns+1;r++)i[r]=this.data[n][r-1];this.data[n]=i}return this.columns+=1,this}}ii(M,x);function Mn(s,t,e){let n=Math.acos(s.dot(t));return s.clone().mul(Math.sin((1-e)*n)/Math.sin(n)).add(t.clone().mul(Math.sin(e*n)/Math.sin(n)))}function ue(s,t){t.sub(s.clone().mul(2*s.dot(t)))}function In(s,t,e){let n=x.zeros(e,1);return n.set(s,0,Math.cos(-Math.PI/4)),n.set(t,0,Math.sin(-Math.PI/4)),n}function ji(s){let t=[],e=s.length;console.log(s);let n=[...s];for(let i=0;i<e;i++){if(n[i]==i)continue;let r=n.indexOf(i);if(r===-1||r<i)throw new Error("indexOf banana");t.push([i,r]),n[r]=n[i],n[i]=i}return t}function Ti(s){let t=[];for(let e=0;e<s.length-1;e++)t.push([s[e],s[e+1]]);return t.reverse()}function Mi(s){let t=[],e=new Set(s);for(;e.size>0;){let n=e.values().next().value;e.delete(n);let i=s[n],r=[n];if(i!==n){for(;i!==n&&e.size>0;){if(r.push(i),!e.delete(i))throw"Not permutation";i=s[i]}t.push(r)}}return t.flatMap(Ti)}function Te(s,t){if(t.length%2!==0)throw new Error("will only morb even permutations");return(e,n)=>{let i=e.clone();for(let r=0;r<t.length;r+=2){let o=In(...t[r],s),h=In(...t[r+1],s);ue(o,i),ue(Mn(o,h,n/2),i),ue(Mn(h,o,n/2),i),ue(h,i)}return i}}function Ii(s){return s.map(t=>t-1)}function Ni(s){return s.map(t=>[t[0]-1,t[1]-1])}function Ri(){return{nv:3,edges:[[0,1],[1,2],[2,0]],positions:new x([[.1,0,1],[0,.1,1],[-.1,0,1]])}}function Nn(s){if(s.spec==="slerp")return Te(s.permutation.length,Mi(s.permutation));if(s.spec==="slerp-naive")return Te(s.permutation.length,ji(s.permutation));if(s.spec==="slerp-transposition-seq")return Te(s.n,s.transposition);if(s.spec==="linear")return(t,e)=>{let n=s.permutation.length,i=x.zeros(n,1);for(let r=0;r<n;r++)i.set(r,0,(1-e)*t.get(r,0)+e*t.get(s.permutation[r],0));return i};if(s.spec==="noop")return(t,e)=>t;throw new Error(`Got invalid interpolation spec: ${s.spec}`)}function Ci(s){let t,e,n,i,r,o,h,u,l,c,a,f,p,m,d,g,v,S,k,T,L,b,N;return{c(){t=$("div"),e=Et(`Interpolation method:
    `),n=$("select"),i=$("option"),i.textContent="Linear ",r=$("option"),r.textContent="Orthogonal",o=pt(),h=$("p"),u=Et(`Provide a graph by giving a list or set of its edges:
    `),l=$("textarea"),c=pt(),a=$("p"),f=Et(`Give a 3D embedding for the vertices of the graph as a matrix with n rows and 3 columns:
        `),p=$("textarea"),m=Et(`

    Give an automorphism of the graph as an ordered list (permutation) of vertices:
    `),d=$("textarea"),g=pt(),v=$("div"),S=pt(),k=$("button"),k.textContent="Load random* graph",T=pt(),L=$("div"),L.innerHTML=`<h2>Usage</h2> 

    <p>The labelling of graph vertices is assumed to be one-indexed, so that the vertex set must consist of integers  {1  2, ..., n}.</p>

    
    Accepted formats for the embedding matrix are:
    <ul><li>An array of arrays (JSON)</li> 
        <li>Line/space delimited (as produced by <code>writedlm</code>),
            where each line contains a row of the matrix, within which the columns/entries are
            separated by spaces.</li></ul>
    The canvas is then determined by a perspective projection through a pinhole camera located at (0, 0, -0.2) pointing towards the origin so that [-0.2, 0.2] x [-0.2, 0.2] x {0} spans the viewport. 
    
    <p>An automorphism should be specified as a list &#39;L&#39; of n distinct vertex numbers (agreeing with the given edge
    set and row numbers of the embedding matrix) that defines a permutation sending vertex i to vertex L[i]. The list can be formatted as either a space-separated sequence of integers or as a JSON array.</p> 

    <em>Notes:</em>  
    <em><ul><li>The orthogonal interpolation modes only work for even permutations.</li> 
        <li>*A random 4-valent arc-transitive graph on \u2264108 vertices is chosen from [REF], along with a random (even) element of its automorphism group.</li></ul></em>`,i.__value="linear",i.value=i.__value,r.__value="slerp",r.value=r.__value,s[2].S===void 0&&pe(()=>s[12].call(n)),Y(l,"placeholder","Example format: {{1, 2}, {2, 3}, {3, 1}}"),Y(l,"class",_n("ok")+" svelte-19kcozw"),bn(l,"min-height","6em"),Y(p,"placeholder","Example format: [[0.5, 0.5, 1], [-0.5, 0.5, 1], [0, -0.5, 1]]"),Y(p,"class",_n("ok")+" svelte-19kcozw"),bn(p,"min-height","6em"),Y(d,"placeholder","Example format: [2, 3, 1]"),Y(d,"class","svelte-19kcozw"),Y(v,"class","stderr svelte-19kcozw")},m(y,w){et(y,t,w),q(t,e),q(t,n),q(n,i),q(n,r),xn(n,s[2].S),q(t,o),q(t,h),q(h,u),q(h,l),gt(l,s[1].graph),q(t,c),q(t,a),q(a,f),q(a,p),gt(p,s[1].matrix),q(t,m),q(t,d),gt(d,s[1].permutation),et(y,g,w),et(y,v,w),s[16](v),et(y,S,w),et(y,k,w),et(y,T,w),et(y,L,w),b||(N=[rt(n,"change",s[12]),rt(n,"change",s[4]),rt(l,"input",s[3](s[5])),rt(l,"input",s[13]),rt(p,"input",s[3](s[6])),rt(p,"input",s[14]),rt(d,"input",s[3](s[7])),rt(d,"input",s[15]),rt(k,"click",s[17])],b=!0)},p(y,[w]){w&4&&xn(n,y[2].S),w&2&&gt(l,y[1].graph),w&2&&gt(p,y[1].matrix),w&2&&gt(d,y[1].permutation)},i:J,o:J,d(y){y&&Q(t),y&&Q(g),y&&Q(v),s[16](null),y&&Q(S),y&&Q(k),y&&Q(T),y&&Q(L),b=!1,Rt(N)}}}const Rn=/\s+/;function Oi(s,t,e){let{InGraph:n=null}=t,{InTerpolate:i=null}=t,r,o={graph:"",matrix:"",permutation:""};function h(b){e(0,r.innerHTML=b,r)}let u={G:null,M:null,P:null,S:"slerp"};function l(){if(console.info("Trying to validate given graph inputs..."),u.G===null||u.M===null)return"Both graph and embedding must be specified";let b=u.M.rows,N=u.G.flatMap(w=>w),y=new Set(N).size;return b!==y?`Input disagrees in number of vertices: ${b} \\neq ${y}`:(e(9,n={nv:b,edges:Ni(u.G),positions:u.M}),u.P===null||u.P.length!==b||new Set(u.P).size!==b?(e(10,i={spec:"noop"}),"Ok. Animation disabled because no valid permutation was provided"):(e(10,i={spec:u.S,permutation:Ii(u.P),n:b}),"Ok!"))}function c(b){return N=>{let y=N.target.value.trim(),w=b(y);typeof w=="string"?e(0,r.innerText=w,r):e(0,r.innerText=l(),r)}}let a=()=>{e(0,r.innerText=l(),r)},f=b=>{let N=b.replaceAll("{","[").replaceAll("}","]"),y;try{y=JSON.parse(N)}catch{return"Syntax error in specification of graph edges"}e(2,u.G=y,u)},p=b=>{let N;if(b.startsWith("["))try{N=JSON.parse(b)}catch{return"Tried to parse matrix as JSON but encountered a syntax error"}else N=b.split(`
`).map(w=>w.split(Rn).map(P=>parseFloat(P)));let y;try{if(y=new x(N),!isFinite(y.sum()))throw new Error}catch{return"Could not recognise matrix format"}if(y.columns!==3)return`The embedding matrix must have 3 columns: Got ${y.columns}`;e(2,u.M=y,u)},m=b=>{if(b.length===0)return;let N;if(b.startsWith("["))try{N=JSON.parse(b)}catch{return"Syntax error in specification of automorphism"}else N=b.split(Rn).map(y=>parseInt(y));if(N.length===0||N.includes(NaN))return"Syntax error in specification of automorphism";e(2,u.P=N,u)};async function d(b){let N;try{N=await(await fetch(b)).json()}catch(ft){console.error(ft),h("The server is down! Check back later or contact the maintainer.");return}let{graph:y,matrix:w,permutation:P}=N,G=JSON.stringify(y),V=JSON.stringify(w),U=JSON.stringify(P);e(1,o.graph=G,o),e(1,o.matrix=V,o),e(1,o.permutation=U,o),f(G),p(V),m(U),h(l())}window.load_from_url=d;function g(){u.S=Ys(this),e(2,u)}function v(){o.graph=this.value,e(1,o)}function S(){o.matrix=this.value,e(1,o)}function k(){o.permutation=this.value,e(1,o)}function T(b){Tt[b?"unshift":"push"](()=>{r=b,e(0,r)})}const L=()=>d("https://graph.blepabyte.me");return s.$$set=b=>{"InGraph"in b&&e(9,n=b.InGraph),"InTerpolate"in b&&e(10,i=b.InTerpolate)},[r,o,u,c,a,f,p,m,d,n,i,h,g,v,S,k,T,L]}class zi extends Qe{constructor(t){super(),We(this,t,Oi,Ci,ye,{InGraph:9,InTerpolate:10,write_stderr:11})}get write_stderr(){return this.$$.ctx[11]}}const qe={},Xn=[];function j(s,t){if(Array.isArray(s)){for(const e of s)j(e,t);return}if(typeof s=="object"){for(const e in s)j(e,s[e]);return}Hn(Object.getOwnPropertyNames(t)),qe[s]=Object.assign(qe[s]||{},t)}function Z(s){return qe[s]||{}}function Pi(){return[...new Set(Xn)]}function Hn(s){Xn.push(...s)}function Ze(s,t){let e;const n=s.length,i=[];for(e=0;e<n;e++)i.push(t(s[e]));return i}function qi(s,t){let e;const n=s.length,i=[];for(e=0;e<n;e++)t(s[e])&&i.push(s[e]);return i}function Me(s){return s%360*Math.PI/180}function le(s){return s.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function Di(s){return s.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function Un(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Bt(s,t,e,n){return(t==null||e==null)&&(n=n||s.bbox(),t==null?t=n.width/n.height*e:e==null&&(e=n.height/n.width*t)),{width:t,height:e}}function De(s,t){const e=s.origin;let n=s.ox!=null?s.ox:s.originX!=null?s.originX:"center",i=s.oy!=null?s.oy:s.originY!=null?s.originY:"center";e!=null&&([n,i]=Array.isArray(e)?e:typeof e=="object"?[e.x,e.y]:[e,e]);const r=typeof n=="string",o=typeof i=="string";if(r||o){const{height:h,width:u,x:l,y:c}=t.bbox();r&&(n=n.includes("left")?l:n.includes("right")?l+u:l+u/2),o&&(i=i.includes("top")?c:i.includes("bottom")?c+h:c+h/2)}return[n,i]}const Ke="http://www.w3.org/2000/svg",Fi="http://www.w3.org/1999/xhtml",ce="http://www.w3.org/2000/xmlns/",Kt="http://www.w3.org/1999/xlink",Li="http://svgjs.dev/svgjs",C={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};class tn{}const jt={},en="___SYMBOL___ROOT___";function Jt(s,t=Ke){return C.document.createElementNS(t,s)}function W(s,t=!1){if(s instanceof tn)return s;if(typeof s=="object")return Ie(s);if(s==null)return new jt[en];if(typeof s=="string"&&s.charAt(0)!=="<")return Ie(C.document.querySelector(s));const e=t?C.document.createElement("div"):Jt("svg");return e.innerHTML=s,s=Ie(e.firstChild),e.removeChild(e.firstChild),s}function F(s,t){return t&&t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node?t:Jt(s)}function ot(s){if(!s)return null;if(s.instance instanceof tn)return s.instance;if(s.nodeName==="#document-fragment")return new jt.Fragment(s);let t=Un(s.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":jt[t]||(t="Dom"),new jt[t](s)}let Ie=ot;function R(s,t=s.name,e=!1){return jt[t]=s,e&&(jt[en]=s),Hn(Object.getOwnPropertyNames(s.prototype)),s}function Gi(s){return jt[s]}let $i=1e3;function An(s){return"Svgjs"+Un(s)+$i++}function Jn(s){for(let t=s.children.length-1;t>=0;t--)Jn(s.children[t]);return s.id&&(s.id=An(s.nodeName)),s}function I(s,t){let e,n;for(s=Array.isArray(s)?s:[s],n=s.length-1;n>=0;n--)for(e in t)s[n].prototype[e]=t[e]}function D(s){return function(...t){const e=t[t.length-1];return e&&e.constructor===Object&&!(e instanceof Array)?s.apply(this,t.slice(0,-1)).attr(e):s.apply(this,t)}}function Bi(){return this.parent().children()}function Yi(){return this.parent().index(this)}function Vi(){return this.siblings()[this.position()+1]}function Xi(){return this.siblings()[this.position()-1]}function Hi(){const s=this.position();return this.parent().add(this.remove(),s+1),this}function Ui(){const s=this.position();return this.parent().add(this.remove(),s?s-1:0),this}function Ai(){return this.parent().add(this.remove()),this}function Ji(){return this.parent().add(this.remove(),0),this}function Wi(s){s=W(s),s.remove();const t=this.position();return this.parent().add(s,t),this}function Qi(s){s=W(s),s.remove();const t=this.position();return this.parent().add(s,t+1),this}function Zi(s){return s=W(s),s.before(this),this}function Ki(s){return s=W(s),s.after(this),this}j("Dom",{siblings:Bi,position:Yi,next:Vi,prev:Xi,forward:Hi,backward:Ui,front:Ai,back:Ji,before:Wi,after:Qi,insertBefore:Zi,insertAfter:Ki});const Wn=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,tr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,er=/rgb\((\d+),(\d+),(\d+)\)/,nr=/(#[a-z_][a-z0-9\-_]*)/i,sr=/\)\s*,?\s*/,ir=/\s/g,Cn=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,On=/^rgb\(/,zn=/^(\s+)?$/,Pn=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rr=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,dt=/[\s,]+/,nn=/[MLHVCSQTAZ]/i;function or(){const s=this.attr("class");return s==null?[]:s.trim().split(dt)}function hr(s){return this.classes().indexOf(s)!==-1}function ur(s){if(!this.hasClass(s)){const t=this.classes();t.push(s),this.attr("class",t.join(" "))}return this}function lr(s){return this.hasClass(s)&&this.attr("class",this.classes().filter(function(t){return t!==s}).join(" ")),this}function cr(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)}j("Dom",{classes:or,hasClass:hr,addClass:ur,removeClass:lr,toggleClass:cr});function ar(s,t){const e={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(n){return!!n.length}).forEach(function(n){const i=n.split(/\s*:\s*/);e[i[0]]=i[1]}),e;if(arguments.length<2){if(Array.isArray(s)){for(const n of s){const i=le(n);e[n]=this.node.style[i]}return e}if(typeof s=="string")return this.node.style[le(s)];if(typeof s=="object")for(const n in s)this.node.style[le(n)]=s[n]==null||zn.test(s[n])?"":s[n]}return arguments.length===2&&(this.node.style[le(s)]=t==null||zn.test(t)?"":t),this}function fr(){return this.css("display","")}function pr(){return this.css("display","none")}function mr(){return this.css("display")!=="none"}j("Dom",{css:ar,show:fr,hide:pr,visible:mr});function dr(s,t,e){if(s==null)return this.data(Ze(qi(this.node.attributes,n=>n.nodeName.indexOf("data-")===0),n=>n.nodeName.slice(5)));if(s instanceof Array){const n={};for(const i of s)n[i]=this.data(i);return n}else if(typeof s=="object")for(t in s)this.data(t,s[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,t===null?null:e===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}j("Dom",{data:dr});function gr(s,t){if(typeof arguments[0]=="object")for(const e in s)this.remember(e,s[e]);else{if(arguments.length===1)return this.memory()[s];this.memory()[s]=t}return this}function wr(){if(arguments.length===0)this._memory={};else for(let s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this}function yr(){return this._memory=this._memory||{}}j("Dom",{remember:gr,forget:wr,memory:yr});function _r(s){return s.length===4?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s}function br(s){const t=Math.round(s),n=Math.max(0,Math.min(255,t)).toString(16);return n.length===1?"0"+n:n}function Pt(s,t){for(let e=t.length;e--;)if(s[t[e]]==null)return!1;return!0}function xr(s,t){const e=Pt(s,"rgb")?{_a:s.r,_b:s.g,_c:s.b,_d:0,space:"rgb"}:Pt(s,"xyz")?{_a:s.x,_b:s.y,_c:s.z,_d:0,space:"xyz"}:Pt(s,"hsl")?{_a:s.h,_b:s.s,_c:s.l,_d:0,space:"hsl"}:Pt(s,"lab")?{_a:s.l,_b:s.a,_c:s.b,_d:0,space:"lab"}:Pt(s,"lch")?{_a:s.l,_b:s.c,_c:s.h,_d:0,space:"lch"}:Pt(s,"cmyk")?{_a:s.c,_b:s.m,_c:s.y,_d:s.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return e.space=t||e.space,e}function vr(s){return s==="lab"||s==="xyz"||s==="lch"}function Ne(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}class z{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof z||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",e,n){const{random:i,round:r,sin:o,PI:h}=Math;if(t==="vibrant"){const u=24*i()+57,l=(83-45)*i()+45,c=360*i();return new z(u,l,c,"lch")}else if(t==="sine"){e=e==null?i():e;const u=r(80*o(2*h*e/.5+.01)+150),l=r(50*o(2*h*e/.5+4.6)+200),c=r(100*o(2*h*e/.5+2.3)+150);return new z(u,l,c)}else if(t==="pastel"){const u=8*i()+86,l=(26-9)*i()+9,c=360*i();return new z(u,l,c,"lch")}else if(t==="dark"){const u=10+10*i(),l=(125-75)*i()+86,c=360*i();return new z(u,l,c,"lch")}else if(t==="rgb"){const u=255*i(),l=255*i(),c=255*i();return new z(u,l,c)}else if(t==="lab"){const u=100*i(),l=256*i()-128,c=256*i()-128;return new z(u,l,c,"lab")}else if(t==="grey"){const u=255*i();return new z(u,u,u)}else throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(Cn.test(t)||On.test(t))}cmyk(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(f=>f/255),h=Math.min(1-i,1-r,1-o);if(h===1)return new z(0,0,0,1,"cmyk");const u=(1-i-h)/(1-h),l=(1-r-h)/(1-h),c=(1-o-h)/(1-h);return new z(u,l,c,h,"cmyk")}hsl(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(d=>d/255),h=Math.max(i,r,o),u=Math.min(i,r,o),l=(h+u)/2,c=h===u,a=h-u,f=c?0:l>.5?a/(2-h-u):a/(h+u),p=c?0:h===i?((r-o)/a+(r<o?6:0))/6:h===r?((o-i)/a+2)/6:h===o?((i-r)/a+4)/6:0;return new z(360*p,100*f,100*l,"hsl")}init(t=0,e=0,n=0,i=0,r="rgb"){if(t=t||0,this.space)for(const a in this.space)delete this[this.space[a]];if(typeof t=="number")r=typeof i=="string"?i:r,i=typeof i=="string"?0:i,Object.assign(this,{_a:t,_b:e,_c:n,_d:i,space:r});else if(t instanceof Array)this.space=e||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const a=xr(t,e);Object.assign(this,a)}else if(typeof t=="string")if(On.test(t)){const a=t.replace(ir,""),[f,p,m]=er.exec(a).slice(1,4).map(d=>parseInt(d));Object.assign(this,{_a:f,_b:p,_c:m,_d:0,space:"rgb"})}else if(Cn.test(t)){const a=d=>parseInt(d,16),[,f,p,m]=tr.exec(_r(t)).map(a);Object.assign(this,{_a:f,_b:p,_c:m,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:h,_c:u,_d:l}=this,c=this.space==="rgb"?{r:o,g:h,b:u}:this.space==="xyz"?{x:o,y:h,z:u}:this.space==="hsl"?{h:o,s:h,l:u}:this.space==="lab"?{l:o,a:h,b:u}:this.space==="lch"?{l:o,c:h,h:u}:this.space==="cmyk"?{c:o,m:h,y:u,k:l}:{};Object.assign(this,c)}lab(){const{x:t,y:e,z:n}=this.xyz(),i=116*e-16,r=500*(t-e),o=200*(e-n);return new z(i,r,o,"lab")}lch(){const{l:t,a:e,b:n}=this.lab(),i=Math.sqrt(e**2+n**2);let r=180*Math.atan2(n,e)/Math.PI;return r<0&&(r*=-1,r=360-r),new z(t,i,r,"lch")}rgb(){if(this.space==="rgb")return this;if(vr(this.space)){let{x:t,y:e,z:n}=this;if(this.space==="lab"||this.space==="lch"){let{l:p,a:m,b:d}=this;if(this.space==="lch"){const{c:b,h:N}=this,y=Math.PI/180;m=b*Math.cos(y*N),d=b*Math.sin(y*N)}const g=(p+16)/116,v=m/500+g,S=g-d/200,k=16/116,T=.008856,L=7.787;t=.95047*(v**3>T?v**3:(v-k)/L),e=1*(g**3>T?g**3:(g-k)/L),n=1.08883*(S**3>T?S**3:(S-k)/L)}const i=t*3.2406+e*-1.5372+n*-.4986,r=t*-.9689+e*1.8758+n*.0415,o=t*.0557+e*-.204+n*1.057,h=Math.pow,u=.0031308,l=i>u?1.055*h(i,1/2.4)-.055:12.92*i,c=r>u?1.055*h(r,1/2.4)-.055:12.92*r,a=o>u?1.055*h(o,1/2.4)-.055:12.92*o;return new z(255*l,255*c,255*a)}else if(this.space==="hsl"){let{h:t,s:e,l:n}=this;if(t/=360,e/=100,n/=100,e===0)return n*=255,new z(n,n,n);const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=255*Ne(r,i,t+1/3),h=255*Ne(r,i,t),u=255*Ne(r,i,t-1/3);return new z(o,h,u)}else if(this.space==="cmyk"){const{c:t,m:e,y:n,k:i}=this,r=255*(1-Math.min(1,t*(1-i)+i)),o=255*(1-Math.min(1,e*(1-i)+i)),h=255*(1-Math.min(1,n*(1-i)+i));return new z(r,o,h)}else return this}toArray(){const{_a:t,_b:e,_c:n,_d:i,space:r}=this;return[t,e,n,i,r]}toHex(){const[t,e,n]=this._clamped().map(br);return`#${t}${e}${n}`}toRgb(){const[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,o]=[t,e,n].map(v=>v/255),h=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,u=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,c=(h*.4124+u*.3576+l*.1805)/.95047,a=(h*.2126+u*.7152+l*.0722)/1,f=(h*.0193+u*.1192+l*.9505)/1.08883,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116,m=a>.008856?Math.pow(a,1/3):7.787*a+16/116,d=f>.008856?Math.pow(f,1/3):7.787*f+16/116;return new z(p,m,d,"xyz")}_clamped(){const{_a:t,_b:e,_c:n}=this.rgb(),{max:i,min:r,round:o}=Math,h=u=>i(0,r(o(u),255));return[t,e,n].map(h)}}class B{constructor(...t){this.init(...t)}clone(){return new B(this)}init(t,e){const n={x:0,y:0},i=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:e};return this.x=i.x==null?n.x:i.x,this.y=i.y==null?n.y:i.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));const{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}}function Sr(s,t){return new B(s,t).transform(this.screenCTM().inverse())}function qt(s,t,e){return Math.abs(t-s)<(e||1e-6)}class _{constructor(...t){this.init(...t)}static formatTransforms(t){const e=t.flip==="both"||t.flip===!0,n=t.flip&&(e||t.flip==="x")?-1:1,i=t.flip&&(e||t.flip==="y")?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,h=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,u=t.scale&&t.scale.length?t.scale[1]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleY)?t.scaleY*i:i,l=t.shear||0,c=t.rotate||t.theta||0,a=new B(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),f=a.x,p=a.y,m=new B(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),d=m.x,g=m.y,v=new B(t.translate||t.tx||t.translateX,t.ty||t.translateY),S=v.x,k=v.y,T=new B(t.relative||t.rx||t.relativeX,t.ry||t.relativeY),L=T.x,b=T.y;return{scaleX:h,scaleY:u,skewX:r,skewY:o,shear:l,theta:c,rx:L,ry:b,tx:S,ty:k,ox:f,oy:p,px:d,py:g}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,e,n){const i=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,h=t.b*e.c+t.d*e.d,u=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return n.a=i,n.b=r,n.c=o,n.d=h,n.e=u,n.f=l,n}around(t,e,n){return this.clone().aroundO(t,e,n)}aroundO(t,e,n){const i=t||0,r=e||0;return this.translateO(-i,-r).lmultiplyO(n).translateO(i,r)}clone(){return new _(this)}decompose(t=0,e=0){const n=this.a,i=this.b,r=this.c,o=this.d,h=this.e,u=this.f,l=n*o-i*r,c=l>0?1:-1,a=c*Math.sqrt(n*n+i*i),f=Math.atan2(c*i,c*n),p=180/Math.PI*f,m=Math.cos(f),d=Math.sin(f),g=(n*r+i*o)/l,v=r*a/(g*n-i)||o*a/(g*i+n),S=h-t+t*m*a+e*(g*m*a-d*v),k=u-e+t*d*a+e*(g*d*a+m*v);return{scaleX:a,scaleY:v,shear:g,rotate:p,translateX:S,translateY:k,originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new _(t);return qt(this.a,e.a)&&qt(this.b,e.b)&&qt(this.c,e.c)&&qt(this.d,e.d)&&qt(this.e,e.e)&&qt(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return t==="x"?this.scaleO(-1,1,e,0):t==="y"?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=_.fromArray([1,0,0,1,0,0]);return t=t instanceof at?t.matrixify():typeof t=="string"?_.fromArray(t.split(dt).map(parseFloat)):Array.isArray(t)?_.fromArray(t):typeof t=="object"&&_.isMatrixLike(t)?t:typeof t=="object"?new _().transform(t):arguments.length===6?_.fromArray([].slice.call(arguments)):e,this.a=t.a!=null?t.a:e.a,this.b=t.b!=null?t.b:e.b,this.c=t.c!=null?t.c:e.c,this.d=t.d!=null?t.d:e.d,this.e=t.e!=null?t.e:e.e,this.f=t.f!=null?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,n=this.c,i=this.d,r=this.e,o=this.f,h=t*i-e*n;if(!h)throw new Error("Cannot invert "+this);const u=i/h,l=-e/h,c=-n/h,a=t/h,f=-(u*r+c*o),p=-(l*r+a*o);return this.a=u,this.b=l,this.c=c,this.d=a,this.e=f,this.f=p,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=this,n=t instanceof _?t:new _(t);return _.matrixMultiply(n,e,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=this,n=t instanceof _?t:new _(t);return _.matrixMultiply(e,n,this)}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=Me(t);const i=Math.cos(t),r=Math.sin(t),{a:o,b:h,c:u,d:l,e:c,f:a}=this;return this.a=o*i-h*r,this.b=h*i+o*r,this.c=u*i-l*r,this.d=l*i+u*r,this.e=c*i-a*r+n*r-e*i+e,this.f=a*i+c*r-e*r-n*i+n,this}scale(t,e,n,i){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,i=0){arguments.length===3&&(i=n,n=e,e=t);const{a:r,b:o,c:h,d:u,e:l,f:c}=this;return this.a=r*t,this.b=o*e,this.c=h*t,this.d=u*e,this.e=l*t-n*t+n,this.f=c*e-i*e+i,this}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){const{a:i,b:r,c:o,d:h,e:u,f:l}=this;return this.a=i+r*t,this.c=o+h*t,this.e=u+l*t-n*t,this}skew(t,e,n,i){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,i=0){arguments.length===3&&(i=n,n=e,e=t),t=Me(t),e=Me(e);const r=Math.tan(t),o=Math.tan(e),{a:h,b:u,c:l,d:c,e:a,f}=this;return this.a=h+u*r,this.b=u+h*o,this.c=l+c*r,this.d=c+l*o,this.e=a+f*r-i*r,this.f=f+a*o-n*o,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(_.isMatrixLike(t))return new _(t).multiplyO(this);const e=_.formatTransforms(t),n=this,{x:i,y:r}=new B(e.ox,e.oy).transform(n),o=new _().translateO(e.rx,e.ry).lmultiplyO(n).translateO(-i,-r).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,r);if(isFinite(e.px)||isFinite(e.py)){const h=new B(i,r).transform(o),u=isFinite(e.px)?e.px-h.x:0,l=isFinite(e.py)?e.py-h.y:0;o.translateO(u,l)}return o.translateO(e.tx,e.ty),o}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Er(){return new _(this.node.getCTM())}function kr(){if(typeof this.isRoot=="function"&&!this.isRoot()){const s=this.rect(1,1),t=s.node.getScreenCTM();return s.remove(),new _(t)}return new _(this.node.getScreenCTM())}R(_,"Matrix");function wt(){if(!wt.nodes){const s=W().size(2,0);s.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),s.attr("focusable","false"),s.attr("aria-hidden","true");const t=s.path().node;wt.nodes={svg:s,path:t}}if(!wt.nodes.svg.node.parentNode){const s=C.document.body||C.document.documentElement;wt.nodes.svg.addTo(s)}return wt.nodes}function Qn(s){return!s.width&&!s.height&&!s.x&&!s.y}function jr(s){return s===C.document||(C.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===C.document}).call(C.document.documentElement,s)}class H{constructor(...t){this.init(...t)}addOffset(){return this.x+=C.window.pageXOffset,this.y+=C.window.pageYOffset,new H(this)}init(t){const e=[0,0,0,0];return t=typeof t=="string"?t.split(dt).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):e,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Qn(this)}merge(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width)-e,r=Math.max(this.y+this.height,t.y+t.height)-n;return new H(e,n,i,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof _||(t=new _(t));let e=1/0,n=-1/0,i=1/0,r=-1/0;return[new B(this.x,this.y),new B(this.x2,this.y),new B(this.x,this.y2),new B(this.x2,this.y2)].forEach(function(h){h=h.transform(t),e=Math.min(e,h.x),n=Math.max(n,h.x),i=Math.min(i,h.y),r=Math.max(r,h.y)}),new H(e,i,n-e,r-i)}}function Zn(s,t,e){let n;try{if(n=t(s.node),Qn(n)&&!jr(s.node))throw new Error("Element not in the dom")}catch{n=e(s)}return n}function Tr(){const e=Zn(this,i=>i.getBBox(),i=>{try{const r=i.clone().addTo(wt().svg).show(),o=r.node.getBBox();return r.remove(),o}catch(r){throw new Error(`Getting bbox of element "${i.node.nodeName}" is not possible: ${r.toString()}`)}});return new H(e)}function Mr(s){const n=Zn(this,r=>r.getBoundingClientRect(),r=>{throw new Error(`Getting rbox of element "${r.node.nodeName}" is not possible`)}),i=new H(n);return s?i.transform(s.screenCTM().inverseO()):i.addOffset()}function Ir(s,t){const e=this.bbox();return s>e.x&&t>e.y&&s<e.x+e.width&&t<e.y+e.height}j({viewbox:{viewbox(s,t,e,n){return s==null?new H(this.attr("viewBox")):this.attr("viewBox",new H(s,t,e,n))},zoom(s,t){let{width:e,height:n}=this.attr(["width","height"]);if((!e&&!n||typeof e=="string"||typeof n=="string")&&(e=this.node.clientWidth,n=this.node.clientHeight),!e||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const i=this.viewbox(),r=e/i.width,o=n/i.height,h=Math.min(r,o);if(s==null)return h;let u=h/s;u===1/0&&(u=Number.MAX_SAFE_INTEGER/100),t=t||new B(e/2/r+i.x,n/2/o+i.y);const l=new H(i).transform(new _({scale:u,origin:t}));return this.viewbox(l)}}});R(H,"Box");class It extends Array{constructor(t=[],...e){if(super(t,...e),typeof t=="number")return this;this.length=0,this.push(...t)}}I([It],{each(s,...t){return typeof s=="function"?this.map((e,n,i)=>s.call(e,e,n,i)):this.map(e=>e[s](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const Nr=["toArray","constructor","each"];It.extend=function(s){s=s.reduce((t,e)=>(Nr.includes(e)||e[0]==="_"||(t[e]=function(...n){return this.each(e,...n)}),t),{}),I([It],s)};function Yt(s,t){return new It(Ze((t||C.document).querySelectorAll(s),function(e){return ot(e)}))}function Rr(s){return Yt(s,this.node)}function Cr(s){return ot(this.node.querySelector(s))}let Or=0;const Kn={};function ts(s){let t=s.getEventHolder();return t===C.window&&(t=Kn),t.events||(t.events={}),t.events}function sn(s){return s.getEventTarget()}function zr(s){let t=s.getEventHolder();t===C.window&&(t=Kn),t.events&&(t.events={})}function Fe(s,t,e,n,i){const r=e.bind(n||s),o=W(s),h=ts(o),u=sn(o);t=Array.isArray(t)?t:t.split(dt),e._svgjsListenerId||(e._svgjsListenerId=++Or),t.forEach(function(l){const c=l.split(".")[0],a=l.split(".")[1]||"*";h[c]=h[c]||{},h[c][a]=h[c][a]||{},h[c][a][e._svgjsListenerId]=r,u.addEventListener(c,r,i||!1)})}function Lt(s,t,e,n){const i=W(s),r=ts(i),o=sn(i);typeof e=="function"&&(e=e._svgjsListenerId,!e)||(t=Array.isArray(t)?t:(t||"").split(dt),t.forEach(function(h){const u=h&&h.split(".")[0],l=h&&h.split(".")[1];let c,a;if(e)r[u]&&r[u][l||"*"]&&(o.removeEventListener(u,r[u][l||"*"][e],n||!1),delete r[u][l||"*"][e]);else if(u&&l){if(r[u]&&r[u][l]){for(a in r[u][l])Lt(o,[u,l].join("."),a);delete r[u][l]}}else if(l)for(h in r)for(c in r[h])l===c&&Lt(o,[h,l].join("."));else if(u){if(r[u]){for(c in r[u])Lt(o,[u,c].join("."));delete r[u]}}else{for(h in r)Lt(o,h);zr(i)}}))}function Pr(s,t,e,n){const i=sn(s);return t instanceof C.window.Event||(t=new C.window.CustomEvent(t,{detail:e,cancelable:!0,...n})),i.dispatchEvent(t),t}class te extends tn{addEventListener(){}dispatch(t,e,n){return Pr(this,t,e,n)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const n=e[t.type];for(const i in n)for(const r in n[i])n[i][r](t);return!t.defaultPrevented}fire(t,e,n){return this.dispatch(t,e,n),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,n){return Lt(this,t,e,n),this}on(t,e,n,i){return Fe(this,t,e,n,i),this}removeEventListener(){}}R(te,"EventTarget");function qn(){}const Ut={duration:400,ease:">",delay:0},qr={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class $t extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"?this:(this.length=0,this.push(...this.parse(t)),this)}parse(t=[]){return t instanceof Array?t:t.trim().split(dt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class E{constructor(...t){this.init(...t)}convert(t){return new E(this.value,t)}divide(t){return t=new E(t),new E(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(e=t.match(Wn),e&&(this.value=parseFloat(e[1]),e[5]==="%"?this.value/=100:e[5]==="s"&&(this.value*=1e3),this.unit=e[5])):t instanceof E&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new E(t),new E(this-t,this.unit||t.unit)}plus(t){return t=new E(t),new E(this+t,this.unit||t.unit)}times(t){return t=new E(t),new E(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const es=[];function Dr(s){es.push(s)}function Fr(s,t,e){if(s==null){s={},t=this.node.attributes;for(const n of t)s[n.nodeName]=Pn.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return s}else{if(s instanceof Array)return s.reduce((n,i)=>(n[i]=this.attr(i),n),{});if(typeof s=="object"&&s.constructor===Object)for(t in s)this.attr(t,s[t]);else if(t===null)this.node.removeAttribute(s);else{if(t==null)return t=this.node.getAttribute(s),t==null?qr[s]:Pn.test(t)?parseFloat(t):t;t=es.reduce((n,i)=>i(s,n,this),t),typeof t=="number"?t=new E(t):z.isColor(t)?t=new z(t):t.constructor===Array&&(t=new $t(t)),s==="leading"?this.leading&&this.leading(t):typeof e=="string"?this.node.setAttributeNS(e,s,t.toString()):this.node.setAttribute(s,t.toString()),this.rebuild&&(s==="font-size"||s==="x")&&this.rebuild()}}return this}class _t extends te{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return t=W(t),t.removeNamespace&&this.node instanceof C.window.SVGElement&&t.removeNamespace(),e==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return W(t).put(this,e)}children(){return new It(Ze(this.node.children,function(t){return ot(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(Jn(this.node.cloneNode(t)))}each(t,e){const n=this.children();let i,r;for(i=0,r=n.length;i<r;i++)t.apply(n[i],[i,n]),e&&n[i].each(t,e);return this}element(t,e){return this.put(new _t(Jt(t),e))}first(){return ot(this.node.firstChild)}get(t){return ot(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,Fi)}id(t){return typeof t>"u"&&!this.node.id&&(this.node.id=An(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return ot(this.node.lastChild)}matches(t){const e=this.node,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=ot(e.node.parentNode),!t)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=ot(e.node.parentNode));return e}put(t,e){return t=W(t),this.add(t,e),t}putIn(t,e){return W(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=W(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const n=10**t,i=this.attr(e);for(const r in i)typeof i[r]=="number"&&(i[r]=Math.round(i[r]*n)/n);return this.attr(i),this}svg(t,e){return this.xml(t,e,Ke)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const n=e.index(this);return e.put(t,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,e,n){if(typeof t=="boolean"&&(n=e,e=t,t=null),t==null||typeof t=="function"){e=e==null?!0:e,this.writeDataToDom();let h=this;if(t!=null){if(h=ot(h.node.cloneNode(!0)),e){const u=t(h);if(h=u||h,u===!1)return""}h.each(function(){const u=t(this),l=u||this;u===!1?this.remove():u&&this!==l&&this.replace(l)},!0)}return e?h.node.outerHTML:h.node.innerHTML}e=e==null?!1:e;const i=Jt("wrapper",n),r=C.document.createDocumentFragment();i.innerHTML=t;for(let h=i.children.length;h--;)r.appendChild(i.firstElementChild);const o=this.parent();return e?this.replace(r)&&o:this.add(r)}}I(_t,{attr:Fr,find:Rr,findOne:Cr});R(_t,"Dom");class at extends _t{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new E(t).plus(this.x()))}dy(t=0){return this.y(new E(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e=typeof t=="string";e||(t=W(t));const n=new It;let i=this;for(;(i=i.parent())&&i.node!==C.document&&i.nodeName!=="#document-fragment"&&(n.push(i),!(!e&&i.node===t.node||e&&i.matches(t)));)if(i.node===this.root().node)return null;return n}reference(t){if(t=this.attr(t),!t)return null;const e=(t+"").match(nr);return e?W(e[1]):null}root(){const t=this.parent(Gi(en));return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const n=Bt(this,t,e);return this.width(new E(n.width)).height(new E(n.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}I(at,{bbox:Tr,rbox:Mr,inside:Ir,point:Sr,ctm:Er,screenCTM:kr});R(at,"Element");const Xt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,t){return t==="color"?s:s+"-"+t}};["fill","stroke"].forEach(function(s){const t={};let e;t[s]=function(n){if(typeof n>"u")return this.attr(s);if(typeof n=="string"||n instanceof z||z.isRgb(n)||n instanceof at)this.attr(s,n);else for(e=Xt[s].length-1;e>=0;e--)n[Xt[s][e]]!=null&&this.attr(Xt.prefix(s,Xt[s][e]),n[Xt[s][e]]);return this},j(["Element","Runner"],t)});j(["Element","Runner"],{matrix:function(s,t,e,n,i,r){return s==null?new _(this):this.attr("transform",new _(s,t,e,n,i,r))},rotate:function(s,t,e){return this.transform({rotate:s,ox:t,oy:e},!0)},skew:function(s,t,e,n){return arguments.length===1||arguments.length===3?this.transform({skew:s,ox:t,oy:e},!0):this.transform({skew:[s,t],ox:e,oy:n},!0)},shear:function(s,t,e){return this.transform({shear:s,ox:t,oy:e},!0)},scale:function(s,t,e,n){return arguments.length===1||arguments.length===3?this.transform({scale:s,ox:t,oy:e},!0):this.transform({scale:[s,t],ox:e,oy:n},!0)},translate:function(s,t){return this.transform({translate:[s,t]},!0)},relative:function(s,t){return this.transform({relative:[s,t]},!0)},flip:function(s="both",t="center"){return"xybothtrue".indexOf(s)===-1&&(t=s,s="both"),this.transform({flip:s,origin:t},!0)},opacity:function(s){return this.attr("opacity",s)}});j("radius",{radius:function(s,t=s){return(this._element||this).type==="radialGradient"?this.attr("r",new E(s)):this.rx(s).ry(t)}});j("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(s){return new B(this.node.getPointAtLength(s))}});j(["Element","Runner"],{font:function(s,t){if(typeof s=="object"){for(t in s)this.font(t,s[t]);return this}return s==="leading"?this.leading(t):s==="anchor"?this.attr("text-anchor",t):s==="size"||s==="family"||s==="weight"||s==="stretch"||s==="variant"||s==="style"?this.attr("font-"+s,t):this.attr(s,t)}});const Lr=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(s,t){const e=function(n){return n===null?this.off(t):this.on(t,n),this};return s[t]=e,s},{});j("Element",Lr);function Gr(){return this.attr("transform",null)}function $r(){return(this.attr("transform")||"").split(sr).slice(0,-1).map(function(t){const e=t.trim().split("(");return[e[0],e[1].split(dt).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(t,e){return e[0]==="matrix"?t.lmultiply(_.fromArray(e[1])):t[e[0]].apply(t,e[1])},new _)}function Br(s,t){if(this===s)return this;const e=this.screenCTM(),n=s.screenCTM().inverse();return this.addTo(s,t).untransform().transform(n.multiply(e)),this}function Yr(s){return this.toParent(this.root(),s)}function Vr(s,t){if(s==null||typeof s=="string"){const i=new _(this).decompose();return s==null?i:i[s]}_.isMatrixLike(s)||(s={...s,origin:De(s,this)});const e=t===!0?this:t||!1,n=new _(e).transform(s);return this.attr("transform",n)}j("Element",{untransform:Gr,matrixify:$r,toParent:Br,toRoot:Yr,transform:Vr});class K extends at{flatten(t=this,e){return this.each(function(){if(this instanceof K)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),e=t.index(this)){return e=e===-1?t.children().length:e,this.each(function(n,i){return i[i.length-n-1].toParent(t,e)}),this.remove()}}R(K,"Container");class rn extends K{constructor(t,e=t){super(F("defs",t),e)}flatten(){return this}ungroup(){return this}}R(rn,"Defs");class it extends at{}R(it,"Shape");function on(s){return this.attr("rx",s)}function hn(s){return this.attr("ry",s)}function ns(s){return s==null?this.cx()-this.rx():this.cx(s+this.rx())}function ss(s){return s==null?this.cy()-this.ry():this.cy(s+this.ry())}function is(s){return this.attr("cx",s)}function rs(s){return this.attr("cy",s)}function os(s){return s==null?this.rx()*2:this.rx(new E(s).divide(2))}function hs(s){return s==null?this.ry()*2:this.ry(new E(s).divide(2))}var Xr={__proto__:null,rx:on,ry:hn,x:ns,y:ss,cx:is,cy:rs,width:os,height:hs};class ve extends it{constructor(t,e=t){super(F("ellipse",t),e)}size(t,e){const n=Bt(this,t,e);return this.rx(new E(n.width).divide(2)).ry(new E(n.height).divide(2))}}I(ve,Xr);j("Container",{ellipse:D(function(s=0,t=s){return this.put(new ve).size(s,t).move(0,0)})});R(ve,"Ellipse");class us extends _t{constructor(t=C.document.createDocumentFragment()){super(t)}xml(t,e,n){if(typeof t=="boolean"&&(n=e,e=t,t=null),t==null||typeof t=="function"){const i=new _t(Jt("wrapper",n));return i.add(this.node.cloneNode(!0)),i.xml(!1,n)}return super.xml(t,!1,n)}}R(us,"Fragment");function ls(s,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new E(s),fy:new E(t)}):this.attr({x1:new E(s),y1:new E(t)})}function cs(s,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new E(s),cy:new E(t)}):this.attr({x2:new E(s),y2:new E(t)})}var Hr={__proto__:null,from:ls,to:cs};class ee extends K{constructor(t,e){super(F(t+"Gradient",typeof t=="string"?null:t),e)}attr(t,e,n){return t==="transform"&&(t="gradientTransform"),super.attr(t,e,n)}bbox(){return new H}targets(){return Yt('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}I(ee,Hr);j({Container:{gradient(...s){return this.defs().gradient(...s)}},Defs:{gradient:D(function(s,t){return this.put(new ee(s)).update(t)})}});R(ee,"Gradient");class Wt extends K{constructor(t,e=t){super(F("pattern",t),e)}attr(t,e,n){return t==="transform"&&(t="patternTransform"),super.attr(t,e,n)}bbox(){return new H}targets(){return Yt('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}j({Container:{pattern(...s){return this.defs().pattern(...s)}},Defs:{pattern:D(function(s,t,e){return this.put(new Wt).update(e).attr({x:0,y:0,width:s,height:t,patternUnits:"userSpaceOnUse"})})}});R(Wt,"Pattern");class Se extends it{constructor(t,e=t){super(F("image",t),e)}load(t,e){if(!t)return this;const n=new C.window.Image;return Fe(n,"load",function(i){const r=this.parent(Wt);this.width()===0&&this.height()===0&&this.size(n.width,n.height),r instanceof Wt&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof e=="function"&&e.call(this,i)},this),Fe(n,"load error",function(){Lt(n)}),this.attr("href",n.src=t,Kt)}}Dr(function(s,t,e){return(s==="fill"||s==="stroke")&&rr.test(t)&&(t=e.root().defs().image(t)),t instanceof Se&&(t=e.root().defs().pattern(0,0,n=>{n.add(t)})),t});j({Container:{image:D(function(s,t){return this.put(new Se).size(0,0).load(s,t)})}});R(Se,"Image");class bt extends $t{bbox(){let t=-1/0,e=-1/0,n=1/0,i=1/0;return this.forEach(function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),n=Math.min(r[0],n),i=Math.min(r[1],i)}),new H(n,i,t-n,e-i)}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];t instanceof Array?t=Array.prototype.concat.apply([],t):t=t.trim().split(dt).map(parseFloat),t.length%2!==0&&t.pop();for(let n=0,i=t.length;n<i;n=n+2)e.push([t[n],t[n+1]]);return e}size(t,e){let n;const i=this.bbox();for(n=this.length-1;n>=0;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*t/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*e/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,n=this.length;e<n;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));for(let e=this.length;e--;){const[n,i]=this[e];this[e][0]=t.a*n+t.c*i+t.e,this[e][1]=t.b*n+t.d*i+t.f}return this}}const Ur=bt;function Ar(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)}function Jr(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)}function Wr(s){const t=this.bbox();return s==null?t.width:this.size(s,t.height)}function Qr(s){const t=this.bbox();return s==null?t.height:this.size(t.width,s)}var un={__proto__:null,MorphArray:Ur,x:Ar,y:Jr,width:Wr,height:Qr};class Qt extends it{constructor(t,e=t){super(F("line",t),e)}array(){return new bt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,n,i){return t==null?this.array():(typeof e<"u"?t={x1:t,y1:e,x2:n,y2:i}:t=new bt(t).toLine(),this.attr(t))}size(t,e){const n=Bt(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}I(Qt,un);j({Container:{line:D(function(...s){return Qt.prototype.plot.apply(this.put(new Qt),s[0]!=null?s:[0,0,0,0])})}});R(Qt,"Line");class me extends K{constructor(t,e=t){super(F("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}j({Container:{marker(...s){return this.defs().marker(...s)}},Defs:{marker:D(function(s,t,e){return this.put(new me).size(s,t).ref(s/2,t/2).viewbox(0,0,s,t).attr("orient","auto").update(e)})},marker:{marker(s,t,e,n){let i=["marker"];return s!=="all"&&i.push(s),i=i.join("-"),s=arguments[1]instanceof me?arguments[1]:this.defs().marker(t,e,n),this.attr(i,s)}}});R(me,"Marker");function Gt(s,t){return function(e){return e==null?this[s]:(this[s]=e,t&&t.call(this),this)}}const Zr={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return-Math.cos(s*Math.PI/2)+1},bezier:function(s,t,e,n){return function(i){return i<0?s>0?t/s*i:e>0?n/e*i:0:i>1?e<1?(1-n)/(1-e)*i+(n-e)/(1-e):s<1?(1-t)/(1-s)*i+(t-s)/(1-s):1:3*i*(1-i)**2*t+3*i**2*(1-i)*n+i**3}},steps:function(s,t="end"){t=t.split("-").reverse()[0];let e=s;return t==="none"?--e:t==="both"&&++e,(n,i=!1)=>{let r=Math.floor(n*s);const o=n*r%1===0;return(t==="start"||t==="both")&&++r,i&&o&&--r,n>=0&&r<0&&(r=0),n<=1&&r>e&&(r=e),r/e}}};class ln{done(){return!1}}class Le extends ln{constructor(t=Ut.ease){super(),this.ease=Zr[t]||t}step(t,e,n){return typeof t!="number"?n<1?t:e:t+(e-t)*this.ease(n)}}class de extends ln{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,n,i){return this.stepper(t,e,n,i)}}function Dn(){const s=(this._duration||500)/1e3,t=this._overshoot||0,e=1e-10,n=Math.PI,i=Math.log(t/100+e),r=-i/Math.sqrt(n*n+i*i),o=3.9/(r*s);this.d=2*r*o,this.k=o*o}class Kr extends de{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,n,i){if(typeof t=="string")return t;if(i.done=n===1/0,n===1/0)return e;if(n===0)return t;n>100&&(n=16),n/=1e3;const r=i.velocity||0,o=-this.d*r-this.k*(t-e),h=t+r*n+o*n*n/2;return i.velocity=r+o*n,i.done=Math.abs(e-h)+Math.abs(r)<.002,i.done?e:h}}I(Kr,{duration:Gt("_duration",Dn),overshoot:Gt("_overshoot",Dn)});class to extends de{constructor(t=.1,e=.01,n=0,i=1e3){super(),this.p(t).i(e).d(n).windup(i)}step(t,e,n,i){if(typeof t=="string")return t;if(i.done=n===1/0,n===1/0)return e;if(n===0)return t;const r=e-t;let o=(i.integral||0)+r*n;const h=(r-(i.error||0))/n,u=this._windup;return u!==!1&&(o=Math.max(-u,Math.min(o,u))),i.error=r,i.integral=o,i.done=Math.abs(r)<.001,i.done?e:t+(this.P*r+this.I*o+this.D*h)}}I(to,{windup:Gt("_windup"),p:Gt("P"),i:Gt("I"),d:Gt("D")});const eo={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ge={M:function(s,t,e){return t.x=e.x=s[0],t.y=e.y=s[1],["M",t.x,t.y]},L:function(s,t){return t.x=s[0],t.y=s[1],["L",s[0],s[1]]},H:function(s,t){return t.x=s[0],["H",s[0]]},V:function(s,t){return t.y=s[0],["V",s[0]]},C:function(s,t){return t.x=s[4],t.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,t){return t.x=s[2],t.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,t){return t.x=s[2],t.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,t){return t.x=s[0],t.y=s[1],["T",s[0],s[1]]},Z:function(s,t,e){return t.x=e.x,t.y=e.y,["Z"]},A:function(s,t){return t.x=s[5],t.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},Re="mlhvqtcsaz".split("");for(let s=0,t=Re.length;s<t;++s)Ge[Re[s]]=function(e){return function(n,i,r){if(e==="H")n[0]=n[0]+i.x;else if(e==="V")n[0]=n[0]+i.y;else if(e==="A")n[5]=n[5]+i.x,n[6]=n[6]+i.y;else for(let o=0,h=n.length;o<h;++o)n[o]=n[o]+(o%2?i.y:i.x);return Ge[e](n,i,r)}}(Re[s].toUpperCase());function no(s){const t=s.segment[0];return Ge[t](s.segment.slice(1),s.p,s.p0)}function $e(s){return s.segment.length&&s.segment.length-1===eo[s.segment[0].toUpperCase()]}function so(s,t){s.inNumber&&vt(s,!1);const e=nn.test(t);if(e)s.segment=[t];else{const n=s.lastCommand,i=n.toLowerCase(),r=n===i;s.segment=[i==="m"?r?"l":"L":n]}return s.inSegment=!0,s.lastCommand=s.segment[0],e}function vt(s,t){if(!s.inNumber)throw new Error("Parser Error");s.number&&s.segment.push(parseFloat(s.number)),s.inNumber=t,s.number="",s.pointSeen=!1,s.hasExponent=!1,$e(s)&&Be(s)}function Be(s){s.inSegment=!1,s.absolute&&(s.segment=no(s)),s.segments.push(s.segment)}function io(s){if(!s.segment.length)return!1;const t=s.segment[0].toUpperCase()==="A",e=s.segment.length;return t&&(e===4||e===5)}function ro(s){return s.lastToken.toUpperCase()==="E"}function oo(s,t=!0){let e=0,n="";const i={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new B,p:new B};for(;i.lastToken=n,n=s.charAt(e++);)if(!(!i.inSegment&&so(i,n))){if(n==="."){if(i.pointSeen||i.hasExponent){vt(i,!1),--e;continue}i.inNumber=!0,i.pointSeen=!0,i.number+=n;continue}if(!isNaN(parseInt(n))){if(i.number==="0"||io(i)){i.inNumber=!0,i.number=n,vt(i,!0);continue}i.inNumber=!0,i.number+=n;continue}if(n===" "||n===","){i.inNumber&&vt(i,!1);continue}if(n==="-"){if(i.inNumber&&!ro(i)){vt(i,!1),--e;continue}i.number+=n,i.inNumber=!0;continue}if(n.toUpperCase()==="E"){i.number+=n,i.hasExponent=!0;continue}if(nn.test(n)){if(i.inNumber)vt(i,!1);else if($e(i))Be(i);else throw new Error("parser Error");--e}}return i.inNumber&&vt(i,!1),i.inSegment&&$e(i)&&Be(i),i.segments}function ho(s){let t="";for(let e=0,n=s.length;e<n;e++)t+=s[e][0],s[e][1]!=null&&(t+=s[e][1],s[e][2]!=null&&(t+=" ",t+=s[e][2],s[e][3]!=null&&(t+=" ",t+=s[e][3],t+=" ",t+=s[e][4],s[e][5]!=null&&(t+=" ",t+=s[e][5],t+=" ",t+=s[e][6],s[e][7]!=null&&(t+=" ",t+=s[e][7])))));return t+" "}class Nt extends $t{bbox(){return wt().path.setAttribute("d",this.toString()),new H(wt.nodes.path.getBBox())}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i,r=this.length-1;r>=0;r--)i=this[r][0],i==="M"||i==="L"||i==="T"?(this[r][1]+=t,this[r][2]+=e):i==="H"?this[r][1]+=t:i==="V"?this[r][1]+=e:i==="C"||i==="S"||i==="Q"?(this[r][1]+=t,this[r][2]+=e,this[r][3]+=t,this[r][4]+=e,i==="C"&&(this[r][5]+=t,this[r][6]+=e)):i==="A"&&(this[r][6]+=t,this[r][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),oo(t)}size(t,e){const n=this.bbox();let i,r;for(n.width=n.width===0?1:n.width,n.height=n.height===0?1:n.height,i=this.length-1;i>=0;i--)r=this[i][0],r==="M"||r==="L"||r==="T"?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y):r==="H"?this[i][1]=(this[i][1]-n.x)*t/n.width+n.x:r==="V"?this[i][1]=(this[i][1]-n.y)*e/n.height+n.y:r==="C"||r==="S"||r==="Q"?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y,this[i][3]=(this[i][3]-n.x)*t/n.width+n.x,this[i][4]=(this[i][4]-n.y)*e/n.height+n.y,r==="C"&&(this[i][5]=(this[i][5]-n.x)*t/n.width+n.x,this[i][6]=(this[i][6]-n.y)*e/n.height+n.y)):r==="A"&&(this[i][1]=this[i][1]*t/n.width,this[i][2]=this[i][2]*e/n.height,this[i][6]=(this[i][6]-n.x)*t/n.width+n.x,this[i][7]=(this[i][7]-n.y)*e/n.height+n.y);return this}toString(){return ho(this)}}const as=s=>{const t=typeof s;return t==="number"?E:t==="string"?z.isColor(s)?z:dt.test(s)?nn.test(s)?Nt:$t:Wn.test(s)?E:Ye:cn.indexOf(s.constructor)>-1?s.constructor:Array.isArray(s)?$t:t==="object"?Zt:Ye};class St{constructor(t){this._stepper=t||new Le("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,n){return e&&n},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(as(t));let e=new this._type(t);return this._type===z&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===Zt&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map(function(n){return n.done=!0,n}),e}}class Ye{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class ne{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,ne.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}ne.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const uo=(s,t)=>s[0]<t[0]?-1:s[0]>t[0]?1:0;class Zt{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let n=0,i=e.length;n<i;++n){if(e[n+1]===t[n+1]){if(e[n+1]===z&&t[n+7]!==e[n+7]){const h=t[n+7],u=new z(this.values.splice(n+3,5))[h]().toArray();this.values.splice(n+3,0,...u)}n+=e[n+2]+2;continue}if(!t[n+1])return this;const r=new t[n+1]().toArray(),o=e[n+2]+3;e.splice(n,o,t[n],t[n+1],t[n+2],...r),n+=e[n+2]+2}return this}init(t){if(this.values=[],Array.isArray(t)){this.values=t.slice();return}t=t||{};const e=[];for(const n in t){const i=as(t[n]),r=new i(t[n]).toArray();e.push([n,i,r.length,...r])}return e.sort(uo),this.values=e.reduce((n,i)=>n.concat(i),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const n=e.shift(),i=e.shift(),r=e.shift(),o=e.splice(0,r);t[n]=new i(o)}return t}}const cn=[Ye,ne,Zt];function lo(s=[]){cn.push(...[].concat(s))}function co(){I(cn,{to(s){return new St().type(this.constructor).from(this.toArray()).to(s)},fromArray(s){return this.init(s),this},toConsumable(){return this.toArray()},morph(s,t,e,n,i){const r=function(o,h){return n.step(o,t[h],e,i[h],i)};return this.fromArray(s.map(r))}})}class Vt extends it{constructor(t,e=t){super(F("path",t),e)}array(){return this._array||(this._array=new Nt(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new Nt(t))}size(t,e){const n=Bt(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}Vt.prototype.MorphArray=Nt;j({Container:{path:D(function(s){return this.put(new Vt).plot(s||new Nt)})}});R(Vt,"Path");function ao(){return this._array||(this._array=new bt(this.attr("points")))}function fo(){return delete this._array,this}function po(s,t){return this.attr("points",this.array().move(s,t))}function mo(s){return s==null?this.array():this.clear().attr("points",typeof s=="string"?s:this._array=new bt(s))}function go(s,t){const e=Bt(this,s,t);return this.attr("points",this.array().size(e.width,e.height))}var fs={__proto__:null,array:ao,clear:fo,move:po,plot:mo,size:go};class se extends it{constructor(t,e=t){super(F("polygon",t),e)}}j({Container:{polygon:D(function(s){return this.put(new se).plot(s||new bt)})}});I(se,un);I(se,fs);R(se,"Polygon");class ie extends it{constructor(t,e=t){super(F("polyline",t),e)}}j({Container:{polyline:D(function(s){return this.put(new ie).plot(s||new bt)})}});I(ie,un);I(ie,fs);R(ie,"Polyline");class Ee extends it{constructor(t,e=t){super(F("rect",t),e)}}I(Ee,{rx:on,ry:hn});j({Container:{rect:D(function(s,t){return this.put(new Ee).size(s,t)})}});R(Ee,"Rect");class Ce{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=typeof t.next<"u"?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const O={nextDraw:null,frames:new Ce,timeouts:new Ce,immediates:new Ce,timer:()=>C.window.performance||C.window.Date,transforms:[],frame(s){const t=O.frames.push({run:s});return O.nextDraw===null&&(O.nextDraw=C.window.requestAnimationFrame(O._draw)),t},timeout(s,t){t=t||0;const e=O.timer().now()+t,n=O.timeouts.push({run:s,time:e});return O.nextDraw===null&&(O.nextDraw=C.window.requestAnimationFrame(O._draw)),n},immediate(s){const t=O.immediates.push(s);return O.nextDraw===null&&(O.nextDraw=C.window.requestAnimationFrame(O._draw)),t},cancelFrame(s){s!=null&&O.frames.remove(s)},clearTimeout(s){s!=null&&O.timeouts.remove(s)},cancelImmediate(s){s!=null&&O.immediates.remove(s)},_draw(s){let t=null;const e=O.timeouts.last();for(;(t=O.timeouts.shift())&&(s>=t.time?t.run():O.timeouts.push(t),t!==e););let n=null;const i=O.frames.last();for(;n!==i&&(n=O.frames.shift());)n.run(s);let r=null;for(;r=O.immediates.shift();)r();O.nextDraw=O.timeouts.first()||O.frames.first()?C.window.requestAnimationFrame(O._draw):null}},wo=function(s){const t=s.start,e=s.runner.duration(),n=t+e;return{start:t,duration:e,end:n,runner:s.runner}},yo=function(){const s=C.window;return(s.performance||s.Date).now()};class ps extends te{constructor(t=yo){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map(e=>e.start+e.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(t==null)return this.speed(-e);const n=Math.abs(e);return this.speed(t?-n:n)}schedule(t,e,n){if(t==null)return this._runners.map(wo);let i=0;const r=this.getEndTime();if(e=e||0,n==null||n==="last"||n==="after")i=r;else if(n==="absolute"||n==="start")i=e,e=0;else if(n==="now")i=this._time;else if(n==="relative"){const u=this.getRunnerInfoById(t.id);u&&(i=u.start+e,e=0)}else if(n==="with-last"){const u=this.getLastRunnerInfo();i=u?u.start:this._time}else throw new Error('Invalid value for the "when" parameter');t.unschedule(),t.timeline(this);const o=t.persist(),h={persist:o===null?this._persist:o,start:i+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(h),this._runners.sort((u,l)=>u.start-l.start),this._runnerIds=this._runners.map(u=>u.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0?this:(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return O.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():this._paused?this:(this._nextFrame=O.frame(this._step),this)}_stepFn(t=!1){const e=this._timeSource();let n=e-this._lastSourceTime;t&&(n=0);const i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const h=this._runners[o],u=h.runner;this._time-h.start<=0&&u.reset()}let r=!1;for(let o=0,h=this._runners.length;o<h;o++){const u=this._runners[o],l=u.runner;let c=i;const a=this._time-u.start;if(a<=0){r=!0;continue}else a<c&&(c=a);if(!l.active())continue;l.step(c).done?u.persist!==!0&&l.duration()-l.time()+this._time+u.persist<this._time&&(l.unschedule(),--o,--h):r=!0}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}j({Element:{timeline:function(s){return s==null?(this._timeline=this._timeline||new ps,this._timeline):(this._timeline=s,this)}}});class st extends te{constructor(t){super(),this.id=st.id++,t=t==null?Ut.duration:t,t=typeof t=="function"?new de(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof de,this._stepper=this._isDeclarative?t:new Le,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new _,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(t,e,n){let i=1,r=!1,o=0;return t=t||Ut.duration,e=e||Ut.delay,n=n||"last",typeof t=="object"&&!(t instanceof ln)&&(e=t.delay||e,n=t.when||n,r=t.swing||r,i=t.times||i,o=t.wait||o,t=t.duration||Ut.duration),{duration:t,delay:e,swing:r,times:i,wait:o,when:n}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,n){const i=st.sanitise(t,e,n),r=new st(i.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(i).schedule(i.delay,i.when)}clearTransform(){return this.transforms=new _,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Le(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,n){return typeof t=="object"&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,this._times===!0&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(t==null){const o=Math.floor(this._time/e),u=(this._time-o*e)/this._duration;return Math.min(o+u,this._times)}const n=Math.floor(t),i=t%1,r=e*n+this._duration*i;return this.time(r)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const e=this._time,n=this._duration,i=this._wait,r=this._times,o=this._swing,h=this._reverse;let u;if(t==null){const f=function(m){const d=o*Math.floor(m%(2*(i+n))/(i+n)),g=d&&!h||!d&&h,v=Math.pow(-1,g)*(m%(i+n))/n+g;return Math.max(Math.min(v,1),0)},p=r*(i+n)-i;return u=e<=0?Math.round(f(1e-5)):e<p?f(e):Math.round(f(p-1e-5)),u}const l=Math.floor(this.loops()),c=o&&l%2===0;return u=l+(c&&!h||h&&c?t:1-t),this.loops(u)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,n,i){return this._queue.push({initialiser:t||qn,runner:e||qn,retarget:n,isTransform:i,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(t){return this._reverse=t==null?!this._reverse:t,this}schedule(t,e,n){if(t instanceof ps||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}step(t){if(!this.enabled)return this;t=t==null?16:t,this._time+=t;const e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const i=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<i&&this._time>=i;this._lastTime=this._time,r&&this.fire("start",this);const h=this._isDeclarative;this.done=!h&&!o&&this._time>=i,this._reseted=!1;let u=!1;return(n||h)&&(this._initialise(n),this.transforms=new _,u=this._run(h?t:e),this.fire("step",this)),this.done=this.done||u&&h,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return typeof t>"u"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(!(!t&&!this._isDeclarative))for(let e=0,n=this._queue.length;e<n;++e){const i=this._queue[e],r=this._isDeclarative||!i.initialised&&t;t=!i.finished,r&&t&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(t){let e=!0;for(let n=0,i=this._queue.length;n<i;++n){const r=this._queue[n],o=r.runner.call(this,t);r.finished=r.finished||o===!0,e=e&&r.finished}return e}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){const r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const i=this.timeline();return i&&i.play(),!0}return!1}}st.id=0;class ge{constructor(t=new _,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}I([st,ge],{mergeWith(s){return new ge(s.transforms.lmultiply(this.transforms),s.id)}});const ms=(s,t)=>s.lmultiplyO(t),ds=s=>s.transforms;function _o(){const t=this._transformationRunners.runners.map(ds).reduce(ms,new _);this.transform(t),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class bo{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new ge).forEach(n=>n.clearTransformsFromQueue()),this}edit(t,e){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const n=this.runners[e];if(t&&n.done&&t.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(n.id);const r=n.mergeWith(t);this.edit(t.id,r),t=r,--e}else t=n}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}j({Element:{animate(s,t,e){const n=st.sanitise(s,t,e),i=this.timeline();return new st(n.duration).loop(n).element(this).timeline(i.play()).schedule(n.delay,n.when)},delay(s,t){return this.animate(0,s,t)},_clearTransformRunnersBefore(s){this._transformationRunners.clearBefore(s.id)},_currentTransform(s){return this._transformationRunners.runners.filter(t=>t.id<=s.id).map(ds).reduce(ms,new _)},_addRunner(s){this._transformationRunners.add(s),O.cancelImmediate(this._frameId),this._frameId=O.immediate(_o.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new bo().add(new ge(new _(this))))}}});const xo=(s,t)=>s.filter(e=>!t.includes(e));I(st,{attr(s,t){return this.styleAttr("attr",s,t)},css(s,t){return this.styleAttr("css",s,t)},styleAttr(s,t,e){if(typeof t=="string")return this.styleAttr(s,{[t]:e});let n=t;if(this._tryRetarget(s,n))return this;let i=new St(this._stepper).to(n),r=Object.keys(n);return this.queue(function(){i=i.from(this.element()[s](r))},function(o){return this.element()[s](i.at(o).valueOf()),i.done()},function(o){const h=Object.keys(o),u=xo(h,r);if(u.length){const c=this.element()[s](u),a=new Zt(i.from()).valueOf();Object.assign(a,c),i.from(a)}const l=new Zt(i.to()).valueOf();Object.assign(l,o),i.to(l),r=h,n=o}),this._rememberMorpher(s,i),this},zoom(s,t){if(this._tryRetarget("zoom",s,t))return this;let e=new St(this._stepper).to(new E(s));return this.queue(function(){e=e.from(this.element().zoom())},function(n){return this.element().zoom(e.at(n),t),e.done()},function(n,i){t=i,e.to(n)}),this._rememberMorpher("zoom",e),this},transform(s,t,e){if(t=s.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",s))return this;const n=_.isMatrixLike(s);e=s.affine!=null?s.affine:e!=null?e:!n;const i=new St(this._stepper).type(e?ne:_);let r,o,h,u,l;function c(){o=o||this.element(),r=r||De(s,o),l=new _(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)}function a(p){t||this.clearTransform();const{x:m,y:d}=new B(r).transform(o._currentTransform(this));let g=new _({...s,origin:[m,d]}),v=this._isDeclarative&&h?h:l;if(e){g=g.decompose(m,d),v=v.decompose(m,d);const k=g.rotate,T=v.rotate,L=[k-360,k,k+360],b=L.map(w=>Math.abs(w-T)),N=Math.min(...b),y=b.indexOf(N);g.rotate=L[y]}t&&(n||(g.rotate=s.rotate||0),this._isDeclarative&&u&&(v.rotate=u)),i.from(v),i.to(g);const S=i.at(p);return u=S.rotate,h=new _(S),this.addTransform(h),o._addRunner(this),i.done()}function f(p){(p.origin||"center").toString()!==(s.origin||"center").toString()&&(r=De(p,o)),s={...p,origin:r}}return this.queue(c,a,f,!0),this._isDeclarative&&this._rememberMorpher("transform",i),this},x(s,t){return this._queueNumber("x",s)},y(s){return this._queueNumber("y",s)},dx(s=0){return this._queueNumberDelta("x",s)},dy(s=0){return this._queueNumberDelta("y",s)},dmove(s,t){return this.dx(s).dy(t)},_queueNumberDelta(s,t){if(t=new E(t),this._tryRetarget(s,t))return this;const e=new St(this._stepper).to(t);let n=null;return this.queue(function(){n=this.element()[s](),e.from(n),e.to(n+t)},function(i){return this.element()[s](e.at(i)),e.done()},function(i){e.to(n+new E(i))}),this._rememberMorpher(s,e),this},_queueObject(s,t){if(this._tryRetarget(s,t))return this;const e=new St(this._stepper).to(t);return this.queue(function(){e.from(this.element()[s]())},function(n){return this.element()[s](e.at(n)),e.done()}),this._rememberMorpher(s,e),this},_queueNumber(s,t){return this._queueObject(s,new E(t))},cx(s){return this._queueNumber("cx",s)},cy(s){return this._queueNumber("cy",s)},move(s,t){return this.x(s).y(t)},center(s,t){return this.cx(s).cy(t)},size(s,t){let e;return(!s||!t)&&(e=this._element.bbox()),s||(s=e.width/e.height*t),t||(t=e.height/e.width*s),this.width(s).height(t)},width(s){return this._queueNumber("width",s)},height(s){return this._queueNumber("height",s)},plot(s,t,e,n){if(arguments.length===4)return this.plot([s,t,e,n]);if(this._tryRetarget("plot",s))return this;const i=new St(this._stepper).type(this._element.MorphArray).to(s);return this.queue(function(){i.from(this._element.array())},function(r){return this._element.plot(i.at(r)),i.done()}),this._rememberMorpher("plot",i),this},leading(s){return this._queueNumber("leading",s)},viewbox(s,t,e,n){return this._queueObject("viewbox",new H(s,t,e,n))},update(s){return typeof s!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",s.offset),this)}});I(st,{rx:on,ry:hn,from:ls,to:cs});R(st,"Runner");class an extends K{constructor(t,e=t){super(F("svg",t),e),this.namespace()}defs(){return this.isRoot()?ot(this.node.querySelector("defs"))||this.put(new rn):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof C.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Ke,version:"1.1"}).attr("xmlns:xlink",Kt,ce).attr("xmlns:svgjs",Li,ce):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,ce).attr("xmlns:svgjs",null,ce)}root(){return this.isRoot()?this:super.root()}}j({Container:{nested:D(function(){return this.put(new an)})}});R(an,"Svg",!0);class fn extends K{constructor(t,e=t){super(F("symbol",t),e)}}j({Container:{symbol:D(function(){return this.put(new fn)})}});R(fn,"Symbol");function vo(s){return this._build===!1&&this.clear(),this.node.appendChild(C.document.createTextNode(s)),this}function So(){return this.node.getComputedTextLength()}function Eo(s,t=this.bbox()){return s==null?t.x:this.attr("x",this.attr("x")+s-t.x)}function ko(s,t=this.bbox()){return s==null?t.y:this.attr("y",this.attr("y")+s-t.y)}function jo(s,t,e=this.bbox()){return this.x(s,e).y(t,e)}function To(s,t=this.bbox()){return s==null?t.cx:this.attr("x",this.attr("x")+s-t.cx)}function Mo(s,t=this.bbox()){return s==null?t.cy:this.attr("y",this.attr("y")+s-t.cy)}function Io(s,t,e=this.bbox()){return this.cx(s,e).cy(t,e)}function No(s){return this.attr("x",s)}function Ro(s){return this.attr("y",s)}function Co(s,t){return this.ax(s).ay(t)}function Oo(s){return this._build=!!s,this}var gs={__proto__:null,plain:vo,length:So,x:Eo,y:ko,move:jo,cx:To,cy:Mo,center:Io,ax:No,ay:Ro,amove:Co,build:Oo};class lt extends it{constructor(t,e=t){super(F("text",t),e),this.dom.leading=new E(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new E(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const e=this;let n=0;const i=this.dom.leading;this.each(function(r){const o=C.window.getComputedStyle(this.node).getPropertyValue("font-size"),h=i*new E(o);this.dom.newLined&&(this.attr("x",e.attr("x")),this.text()===`
`?n+=h:(this.attr("dy",r?h+n:0),n=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new E(t.leading||1.3),this}text(t){if(t===void 0){const e=this.node.childNodes;let n=0;t="";for(let i=0,r=e.length;i<r;++i){if(e[i].nodeName==="textPath"){i===0&&(n=1);continue}i!==n&&e[i].nodeType!==3&&ot(e[i]).dom.newLined===!0&&(t+=`
`),t+=e[i].textContent}return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else{t=(t+"").split(`
`);for(let e=0,n=t.length;e<n;e++)this.newLine(t[e])}return this.build(!1).rebuild()}}I(lt,gs);j({Container:{text:D(function(s=""){return this.put(new lt).text(s)}),plain:D(function(s=""){return this.put(new lt).plain(s)})}});R(lt,"Text");class ke extends it{constructor(t,e=t){super(F("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof lt))return this;const e=t.index(this),n=C.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=t.dom.leading*new E(n);return this.dy(e?i:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}I(ke,gs);j({Tspan:{tspan:D(function(s=""){const t=new ke;return this._build||this.clear(),this.put(t).text(s)})},Text:{newLine:function(s=""){return this.tspan(s).newLine()}}});R(ke,"Tspan");class pn extends it{constructor(t,e=t){super(F("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new E(t).divide(2))}}I(pn,{x:ns,y:ss,cx:is,cy:rs,width:os,height:hs});j({Container:{circle:D(function(s=0){return this.put(new pn).size(s).move(0,0)})}});R(pn,"Circle");class Ve extends K{constructor(t,e=t){super(F("clipPath",t),e)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return Yt('svg [clip-path*="'+this.id()+'"]')}}j({Container:{clip:D(function(){return this.defs().put(new Ve)})},Element:{clipper(){return this.reference("clip-path")},clipWith(s){const t=s instanceof Ve?s:this.parent().clip().add(s);return this.attr("clip-path",'url("#'+t.id()+'")')},unclip(){return this.attr("clip-path",null)}}});R(Ve,"ClipPath");class ws extends at{constructor(t,e=t){super(F("foreignObject",t),e)}}j({Container:{foreignObject:D(function(s,t){return this.put(new ws).size(s,t)})}});R(ws,"ForeignObject");function zo(s,t){return this.children().forEach((e,n)=>{let i;try{i=e.bbox()}catch{return}const r=new _(e),o=r.translate(s,t).transform(r.inverse()),h=new B(i.x,i.y).transform(o);e.move(h.x,h.y)}),this}function Po(s){return this.dmove(s,0)}function qo(s){return this.dmove(0,s)}function Do(s,t=this.bbox()){return s==null?t.height:this.size(t.width,s,t)}function Fo(s=0,t=0,e=this.bbox()){const n=s-e.x,i=t-e.y;return this.dmove(n,i)}function Lo(s,t,e=this.bbox()){const n=Bt(this,s,t,e),i=n.width/e.width,r=n.height/e.height;return this.children().forEach((o,h)=>{const u=new B(e).transform(new _(o).inverse());o.scale(i,r,u.x,u.y)}),this}function Go(s,t=this.bbox()){return s==null?t.width:this.size(s,t.height,t)}function $o(s,t=this.bbox()){return s==null?t.x:this.move(s,t.y,t)}function Bo(s,t=this.bbox()){return s==null?t.y:this.move(t.x,s,t)}var ys={__proto__:null,dmove:zo,dx:Po,dy:qo,height:Do,move:Fo,size:Lo,width:Go,x:$o,y:Bo};class mn extends K{constructor(t,e=t){super(F("g",t),e)}}I(mn,ys);j({Container:{group:D(function(){return this.put(new mn)})}});R(mn,"G");class we extends K{constructor(t,e=t){super(F("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Kt)}}I(we,ys);j({Container:{link:D(function(s){return this.put(new we).to(s)})},Element:{unlink(){const s=this.linker();if(!s)return this;const t=s.parent();if(!t)return this.remove();const e=t.index(s);return t.add(this,e),s.remove(),this},linkTo(s){let t=this.linker();return t||(t=new we,this.wrap(t)),typeof s=="function"?s.call(t,t):t.to(s),this},linker(){const s=this.parent();return s&&s.node.nodeName.toLowerCase()==="a"?s:null}}});R(we,"A");class Xe extends K{constructor(t,e=t){super(F("mask",t),e)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return Yt('svg [mask*="'+this.id()+'"]')}}j({Container:{mask:D(function(){return this.defs().put(new Xe)})},Element:{masker(){return this.reference("mask")},maskWith(s){const t=s instanceof Xe?s:this.parent().mask().add(s);return this.attr("mask",'url("#'+t.id()+'")')},unmask(){return this.attr("mask",null)}}});R(Xe,"Mask");class _s extends at{constructor(t,e=t){super(F("stop",t),e)}update(t){return(typeof t=="number"||t instanceof E)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new E(t.offset)),this}}j({Gradient:{stop:function(s,t,e){return this.put(new _s).update(s,t,e)}}});R(_s,"Stop");function Yo(s,t){if(!s)return"";if(!t)return s;let e=s+"{";for(const n in t)e+=Di(n)+":"+t[n]+";";return e+="}",e}class He extends at{constructor(t,e=t){super(F("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(Yo(t,e))}}j("Dom",{style(s,t){return this.put(new He).rule(s,t)},fontface(s,t,e){return this.put(new He).font(s,t,e)}});R(He,"Style");class dn extends lt{constructor(t,e=t){super(F("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let n=null;return e&&(n=e.plot(t)),t==null?n:this}track(){return this.reference("href")}}j({Container:{textPath:D(function(s,t){return s instanceof lt||(s=this.text(s)),s.path(t)})},Text:{path:D(function(s,t=!0){const e=new dn;s instanceof Vt||(s=this.defs().path(s)),e.attr("href","#"+s,Kt);let n;if(t)for(;n=this.node.firstChild;)e.node.appendChild(n);return this.put(e)}),textPath(){return this.findOne("textPath")}},Path:{text:D(function(s){return s instanceof lt||(s=new lt().addTo(this.parent()).text(s)),s.path(this)}),targets(){return Yt("svg textPath").filter(s=>(s.attr("href")||"").includes(this.id()))}}});dn.prototype.MorphArray=Nt;R(dn,"TextPath");class bs extends it{constructor(t,e=t){super(F("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,Kt)}}j({Container:{use:D(function(s,t){return this.put(new bs).use(s,t)})}});R(bs,"Use");const Vo=W;I([an,fn,Se,Wt,me],Z("viewbox"));I([Qt,ie,se,Vt],Z("marker"));I(lt,Z("Text"));I(Vt,Z("Path"));I(rn,Z("Defs"));I([lt,ke],Z("Tspan"));I([Ee,ve,ee,st],Z("radius"));I(te,Z("EventTarget"));I(_t,Z("Dom"));I(at,Z("Element"));I(it,Z("Shape"));I([K,us],Z("Container"));I(ee,Z("Gradient"));I(st,Z("Runner"));It.extend(Pi());lo([E,z,H,_,$t,bt,Nt,B]);co();class Xo{constructor(t){A(this,"n");A(this,"real_locations");A(this,"proj_locations");A(this,"transform");A(this,"rotate");A(this,"up_to_date");A(this,"z_offset");A(this,"dmin");A(this,"dmax");this.n=t,this.real_locations=x.zeros(t,3),this.proj_locations=x.zeros(t,3),this.transform=x.identity(4,4),this.rotate=x.identity(4,4),this.z_offset=.4,this.fov=2*Math.atan(.5/this.z_offset),this.dmin=0,this.dmax=1,this.transform.set(2,3,this.z_offset)}create_rotation_binding(){return t=>{this.rotate=t,this.up_to_date=!1}}real_matrix(){return this.real_locations.clone()}reset_real_cols(t,e,n){this.real_locations.setColumn(0,t),this.real_locations.setColumn(1,e),this.real_locations.setColumn(2,n),this.up_to_date=!1}set_positions(t){if(t.rows!==this.n)throw new Error("Wrong number of vertices to construct projective view");this.real_locations=t,this.up_to_date=!1}set_real(t){if(t.length!==this.n)throw new Error("Wrong number of vertices to construct projective view");for(let e=0;e<this.n;e++)this.real_locations.setRow(e,t[e]);this.up_to_date=!1}recompute_proj(){this.dmin=1/0,this.dmax=-1/0;for(let t=0;t<this.n;t++){let e=this.transform.mmul(this.rotate).mmul(x.from1DArray(4,1,[...this.real_locations.getRow(t),1])),[n,i,r,o]=e.getColumn(0),[h,u,l]=[n/o,i/o,r/o];l-this.z_offset;let c;l<0?c=-1:(c=Math.sqrt(h*h+u*u+l*l),this.dmin=Math.min(this.dmin,c),this.dmax=Math.max(this.dmax,c));let a=[h/l,u/l,c];this.proj_locations.setRow(t,a)}this.up_to_date=!0}opacity(t){let[e,n,i]=this.at(t);return i<0?0:1-Math.max(0,Math.min(.6,(i-this.dmin)/(this.dmax-this.dmin)))}at(t){return this.up_to_date||this.recompute_proj(),this.proj_locations.getRow(t)}}const Ho=s=>new x([[Math.cos(s),0,-Math.sin(s),0],[0,1,0,0],[Math.sin(s),0,Math.cos(s),0],[0,0,0,1]]),Uo=s=>new x([[1,0,0,0],[0,Math.cos(s),-Math.sin(s),0],[0,Math.sin(s),Math.cos(s),0],[0,0,0,1]]);class Ao{constructor(t){A(this,"groot");A(this,"matrix");A(this,"state");A(this,"change_callback");A(this,"MOUSE_SCALE_FACTOR");this.groot=t,this.matrix=x.eye(4),this.state={mouse_down:!1},this.MOUSE_SCALE_FACTOR=3,this.change_callback=e=>{},this.groot.addEventListener("pointerdown",this.pointerdown.bind(this)),this.groot.addEventListener("pointerup",this.pointerup.bind(this)),this.groot.addEventListener("pointermove",this.pointermove.bind(this)),this.groot.addEventListener("pointercancel",this.pointercancel.bind(this))}reset(){this.matrix=x.eye(4)}set_callback(t){this.change_callback=t}rotate(t,e){this.matrix=Uo(e).mmul(Ho(t)).mmul(this.matrix),this.change_callback(this.matrix)}pointerdown(t){this.groot.setPointerCapture(t.pointerId),this.state.mouse_down=!0,this.state.last_x=t.screenX,this.state.last_y=t.screenY}pointerup(t){this.state.mouse_down=!1,this.groot.releasePointerCapture(t.pointerId)}pointermove(t){if(!this.state.mouse_down)return;let e=t.screenX-this.state.last_x,n=t.screenY-this.state.last_y,i=1e3;this.rotate(e/i*this.MOUSE_SCALE_FACTOR,n/i*this.MOUSE_SCALE_FACTOR),this.state.last_x=t.screenX,this.state.last_y=t.screenY}pointercancel(t){this.state.mouse_down=!1,this.groot.releasePointerCapture(t.pointerId)}}function Jo(s){let t,e,n,i,r,o,h,u;return{c(){t=$("div"),e=pt(),n=$("div"),i=$("input"),r=Et(`
    (Play)

    `),o=$("input"),Y(t,"class","graph-display-container svelte-16unbvd"),Y(i,"type","range"),Y(i,"min","0"),Y(i,"max","100"),Y(i,"class","slider svelte-16unbvd"),Y(o,"type","checkbox"),Y(n,"class","controls svelte-16unbvd")},m(l,c){et(l,t,c),s[7](t),et(l,e,c),et(l,n,c),q(n,i),gt(i,s[1]),q(n,r),q(n,o),o.checked=s[0],h||(u=[rt(i,"change",s[8]),rt(i,"input",s[8]),rt(o,"change",s[9])],h=!0)},p(l,[c]){c&2&&gt(i,l[1]),c&1&&(o.checked=l[0])},i:J,o:J,d(l){l&&Q(t),s[7](null),l&&Q(e),l&&Q(n),h=!1,Rt(u)}}}function Wo(s,t,e){let{DisplayGraph:n}=t,{Interpolate:i=null}=t,{InputComponent:r}=t,{playing:o=!0}=t,h=0,u,l,c=new Xo(n.nv);c.set_positions(n.positions.clone());let a,f=c.real_matrix(),p=[],m=[],d=!1,g=setInterval(()=>{o&&e(1,h=(h+.5)%100)},32);Vs(()=>{l=Vo().addTo(u).size("100%","100%"),l.viewbox("-1 -1 2 2"),v(),a=new Ao(l.node);let w=c.create_rotation_binding();a.set_callback(P=>{w(P),k()})}),Xs(()=>{clearInterval(g)});function v(){let w=n;for(let[P,G]of w.edges){let[V,U,ft]=c.at(P),[Ct,X,xt]=c.at(G);m.push(l.line().plot(V,U,Ct,X).stroke({width:.005,color:"#000000"}))}for(let P=0;P<w.nv;P++){let[G,V,U]=c.at(P);p.push(l.circle().attr({cx:G,cy:V,fill:"#000",r:.015}))}e(6,d=!0)}function S(){let w=n,P=0;for(let[G,V]of w.edges){let[U,ft,Ct]=c.at(G),[X,xt,ct]=c.at(V);Math.round((1-Math.max(c.opacity(G),c.opacity(V)))*255),m[P].plot(U,ft,X,xt).stroke({opacity:Math.min(c.opacity(G),c.opacity(V))}),P++}for(let G=0;G<w.nv;G++){let[V,U,ft]=c.at(G);p[G].attr({cx:V,cy:U,opacity:c.opacity(G)})}}function k(){window.requestAnimationFrame(S)}let T;try{T=Nn(i===null?{spec:"noop"}:i)}catch(w){console.error(w),r.write_stderr("Interpolation failed. Probable cause: the given permutation is not even."),T=Nn({spec:"noop"})}function L(w){let P=T(f.getColumnVector(0),w);c.reset_real_cols(P,T(f.getColumnVector(1),w),T(f.getColumnVector(2),w)),k()}function b(w){Tt[w?"unshift":"push"](()=>{u=w,e(2,u)})}function N(){h=$s(this.value),e(1,h)}function y(){o=this.checked,e(0,o)}return s.$$set=w=>{"DisplayGraph"in w&&e(3,n=w.DisplayGraph),"Interpolate"in w&&e(4,i=w.Interpolate),"InputComponent"in w&&e(5,r=w.InputComponent),"playing"in w&&e(0,o=w.playing)},s.$$.update=()=>{s.$$.dirty&66&&d&&L(h/100)},[o,h,u,n,i,r,d,b,N,y]}class xs extends Qe{constructor(t){super(),We(this,t,Wo,Jo,ye,{DisplayGraph:3,Interpolate:4,InputComponent:5,playing:0})}}function Qo(s){return{c:J,m:J,p:J,i:J,o:J,d:J}}function Zo(s){let t=[s[1],s[0]],e,n,i=Fn(s);return{c(){i.c(),e=Gs()},m(r,o){i.m(r,o),et(r,e,o),n=!0},p(r,o){o&3&&ye(t,t=[r[1],r[0]])?($n(),Mt(i,1,1,J),Bn(),i=Fn(r),i.c(),yt(i,1),i.m(e.parentNode,e)):i.p(r,o)},i(r){n||(yt(i),n=!0)},o(r){Mt(i),n=!1},d(r){r&&Q(e),i.d(r)}}}function Fn(s){let t,e;return t=new xs({props:{DisplayGraph:s[1],Interpolate:s[0],InputComponent:s[2]}}),{c(){Je(t.$$.fragment)},m(n,i){_e(t,n,i),e=!0},p(n,i){const r={};i&2&&(r.DisplayGraph=n[1]),i&1&&(r.Interpolate=n[0]),i&4&&(r.InputComponent=n[2]),t.$set(r)},i(n){e||(yt(t.$$.fragment,n),e=!0)},o(n){Mt(t.$$.fragment,n),e=!1},d(n){be(t,n)}}}function Ko(s){let t,e,n;return e=new xs({props:{DisplayGraph:Ri()}}),{c(){t=$("div"),Je(e.$$.fragment),Y(t,"class","graph-display")},m(i,r){et(i,t,r),_e(e,t,null),n=!0},p:J,i(i){n||(yt(e.$$.fragment,i),n=!0)},o(i){Mt(e.$$.fragment,i),n=!1},d(i){i&&Q(t),be(e)}}}function th(s){let t,e,n,i,r,o,h,u,l,c,a,f,p,m={ctx:s,current:null,token:null,hasCatch:!1,pending:Ko,then:Zo,catch:Qo,blocks:[,,,]};Js(s[3],m);function d(S){s[5](S)}function g(S){s[6](S)}let v={};return s[1]!==void 0&&(v.InGraph=s[1]),s[0]!==void 0&&(v.InTerpolate=s[0]),u=new zi({props:v}),s[4](u),Tt.push(()=>Sn(u,"InGraph",d)),Tt.push(()=>Sn(u,"InTerpolate",g)),{c(){t=$("main"),e=$("div"),m.block.c(),n=pt(),i=$("div"),r=$("h2"),r.textContent="Graph automorphism animator",o=pt(),h=$("div"),Je(u.$$.fragment),a=pt(),f=$("p"),f.textContent="~2022",Y(e,"class","left svelte-3td635"),Y(h,"class","graph-input"),Y(f,"class","read-the-docs svelte-3td635"),Y(i,"class","right svelte-3td635"),Y(t,"class","svelte-3td635")},m(S,k){et(S,t,k),q(t,e),m.block.m(e,m.anchor=null),m.mount=()=>e,m.anchor=null,q(t,n),q(t,i),q(i,r),q(i,o),q(i,h),_e(u,h,null),q(i,a),q(i,f),p=!0},p(S,[k]){s=S,Ws(m,s,k);const T={};!l&&k&2&&(l=!0,T.InGraph=s[1],vn(()=>l=!1)),!c&&k&1&&(c=!0,T.InTerpolate=s[0],vn(()=>c=!1)),u.$set(T)},i(S){p||(yt(m.block),yt(u.$$.fragment,S),p=!0)},o(S){for(let k=0;k<3;k+=1){const T=m.blocks[k];Mt(T)}Mt(u.$$.fragment,S),p=!1},d(S){S&&Q(t),m.block.d(),m.token=null,m=null,s[4](null),be(u)}}}async function Oe(s){return await(await fetch(s)).json()}function eh(s,t,e){let n,i,r,o=(async()=>{let c=await Oe("data/embed-6.json");e(1,i={nv:c.positions[0].length,positions:new x(c.positions).transpose(),edges:c.edges.map(f=>[f[0]-1,f[1]-1])}),i.positions.mul(2);let a={spec:"linear",permutation:await Oe("data/perm-seq-xi.json")};await Oe("data/atr-seq-gamma.json"),i.nv,e(0,n=a),console.log("Graph promise loaded")})();function h(c){Tt[c?"unshift":"push"](()=>{r=c,e(2,r)})}function u(c){i=c,e(1,i)}function l(c){n=c,e(0,n)}return[n,i,r,o,h,u,l]}class nh extends Qe{constructor(t){super(),We(this,t,eh,th,ye,{})}}new nh({target:document.getElementById("app")});
